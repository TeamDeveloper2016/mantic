<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
		Relación de consultas para las vistas de MANTIC
-->
<process>
	<dml> 
		<unit id="VistaVentasDto">
			<select id="lazy">
        select
					tc_mantic_ventas.id_venta as id_key,
					tc_mantic_ventas.id_empresa,  
				  tc_mantic_empresas.clave as empresa,  
					tc_mantic_ventas.consecutivo,  
					tc_mantic_clientes.id_cliente,  
					tc_mantic_clientes.razon_social as cliente,
					tc_mantic_clientes.limite_credito,
					tc_mantic_almacenes.clave,
					tc_mantic_almacenes.nombre as almacen,
					tc_mantic_ventas.total,
				  tc_mantic_ventas_estatus.nombre as estatus,
					tc_mantic_ventas.id_venta_estatus,
					tc_mantic_ventas.registro,
					tc_mantic_ventas_estatus.estatus_asociados
				from 
					tc_mantic_ventas
				inner join 
					tc_mantic_clientes on tc_mantic_ventas.id_cliente= tc_mantic_clientes.id_cliente
				inner join 
					tc_mantic_almacenes on tc_mantic_ventas.id_almacen= tc_mantic_almacenes.id_almacen
				inner join 
					tc_mantic_empresas on tc_mantic_ventas.id_empresa= tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_ventas_estatus on tc_mantic_ventas.id_venta_estatus=tc_mantic_ventas_estatus.id_venta_estatus
				where
					tc_mantic_ventas.id_empresa in ({idEmpresa})
					and {condicion}
				{sortOrder}
			</select>
			<select id="clientes">
        select
					tc_mantic_clientes.id_cliente as id_key,
					tc_mantic_clientes.clave,  
					tc_mantic_clientes.limite_credito,
					tc_mantic_clientes.razon_social as nombre
				from 
					tc_mantic_ventas
				inner join
					tc_mantic_clientes on tc_mantic_ventas.id_cliente= tc_mantic_clientes.id_cliente       
				where 		
				  tc_mantic_ventas.id_empresa in ({sucursales})
				group by
					tc_mantic_clientes.id_cliente,
					tc_mantic_clientes.clave,  
					tc_mantic_clientes.limite_credito,
					tc_mantic_clientes.razon_social
				order by
				  tc_mantic_clientes.clave
			</select>
		</unit>		
		<unit id="VistaKardexDto">
			<select id="row">
				select
					tc_mantic_articulos.id_articulo as id_key,
					tc_mantic_articulos_codigos.codigo as propio,
					tc_mantic_articulos.nombre,
					tc_mantic_articulos.descripcion,
					tc_mantic_empaques.nombre as empaque,
					tc_mantic_unidades_medidas.nombre as unidad_medida,
					tc_mantic_articulos.cantidad,
					if(tc_mantic_articulos.id_redondear= 1, "Si", "NO") as redondear,
					tc_mantic_articulos.precio,
					tc_mantic_articulos.precio as value,
					tc_mantic_articulos.iva,
					tc_mantic_articulos.menudeo,
					tc_mantic_articulos.limite_medio_mayoreo,
					tc_mantic_articulos.medio_mayoreo,
					tc_mantic_articulos.mayoreo,
					tc_mantic_articulos.limite_mayoreo,
					tc_mantic_articulos.id_imagen,
					tc_mantic_articulos.stock,
					tc_mantic_articulos.minimo,
					tc_mantic_articulos.maximo,
				  ((tc_mantic_articulos.menudeo* 100/ tc_mantic_articulos.precio)- 100) as utilidad,
					tc_mantic_articulos.sat,
					if(tc_mantic_articulos.id_vigente= 1, "Si", "NO") as vigente,
					tc_mantic_articulos.fecha,
					tc_mantic_articulos.registro
				from
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo= tc_mantic_articulos_codigos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1
				inner join
					tr_mantic_empaque_unidad_medida	on tc_mantic_articulos.id_empaque_unidad_medida= tr_mantic_empaque_unidad_medida.id_empaque_unidad_medida
				inner join
					tc_mantic_empaques on tr_mantic_empaque_unidad_medida.id_empaque= tc_mantic_empaques.id_empaque
				inner join
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida= tc_mantic_unidades_medidas.id_unidad_medida
				where 
					tc_mantic_articulos.id_articulo= {idArticulo}
				order by
					tc_mantic_articulos.registro
			</select>	
			<select id="historial">
				select
					tc_mantic_articulos_bitacora.id_articulo_bitacora as id_key,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_notas_entradas.consecutivo,
					tc_mantic_articulos_bitacora.*
				from
					tc_mantic_articulos_bitacora
				inner join
					tc_janal_usuarios on tc_mantic_articulos_bitacora.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				left join
					tc_mantic_notas_entradas on tc_mantic_articulos_bitacora.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada
				where
					tc_mantic_articulos_bitacora.id_articulo= {idArticulo}
				order by
					tc_mantic_articulos_bitacora.registro desc				
			</select>
			<select id="codigos">
        select      
          tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
          tc_mantic_articulos_codigos.codigo,
          if(tc_mantic_articulos_codigos.id_principal= 1, "SI", if(tc_mantic_articulos_codigos.id_proveedor is null, "AUXILIAR", "NO")) as principal,
          tc_mantic_proveedores.clave,
          tc_mantic_proveedores.prefijo,
          tc_mantic_proveedores.razon_social,
          tc_mantic_articulos_codigos.orden,
				  tc_mantic_articulos_codigos.registro
        from      
          tc_mantic_articulos_codigos
        left join 
          tc_mantic_proveedores on tc_mantic_articulos_codigos.id_proveedor= tc_mantic_proveedores.id_proveedor
        where      
          tc_mantic_articulos_codigos.id_articulo = {idArticulo}
				order by
				  tc_mantic_articulos_codigos.registro				
			</select>
			<select id="almacenes">
        select      
          tc_mantic_almacenes_articulos.id_almacen_articulo as id_key,
				  tc_mantic_almacenes.id_almacen,
          tc_mantic_almacenes.clave,
          tc_mantic_almacenes.nombre,
          tc_mantic_almacenes_articulos.id_articulo,
          tc_mantic_almacenes_articulos.stock,
          tc_mantic_almacenes_articulos.minimo,
          tc_mantic_almacenes_articulos.maximo,
          concat(tc_mantic_almacenes_ubicaciones.piso, "=> ", if(tc_mantic_almacenes_ubicaciones.cuarto is null, "", tc_mantic_almacenes_ubicaciones.cuarto), "=> ", if(tc_mantic_almacenes_ubicaciones.anaquel is null, "", tc_mantic_almacenes_ubicaciones.anaquel), "=> ", if(tc_mantic_almacenes_ubicaciones.charola is null, "", tc_mantic_almacenes_ubicaciones.charola)) as ubicacion,
          tc_mantic_almacenes.registro
				from      
          tc_mantic_almacenes_articulos
        inner join 
          tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
        inner join 
          tc_mantic_almacenes_ubicaciones on tc_mantic_almacenes_articulos.id_almacen_ubicacion= tc_mantic_almacenes_ubicaciones.id_almacen_ubicacion
        where      
          tc_mantic_almacenes_articulos.id_articulo = {idArticulo}
				order by
				  tc_mantic_almacenes.clave				
			</select>
		</unit>
		<unit id="VistaArticulosDto">
			<select id="row">
				select 
				  tc_mantic_articulos.id_articulo as id_key,
				  tc_mantic_articulos.nombre,          
				  tc_mantic_articulos.menudeo,          
				  tc_mantic_articulos.medio_mayoreo,          
				  tc_mantic_articulos.mayoreo,          
				  tc_mantic_articulos.stock,       
				  tc_mantic_articulos.iva,          
				  tc_mantic_articulos.desperdicio          
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				inner join
					tr_mantic_empaque_unidad_medida on tc_mantic_articulos.id_empaque_unidad_medida = tr_mantic_empaque_unidad_medida.id_unidad_medida
				inner join 
					tc_mantic_empaques on tr_mantic_empaque_unidad_medida.id_empaque = tc_mantic_empaques.id_empaque
				inner join 
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida = tc_mantic_unidades_medidas.id_unidad_medida
				where 
					tc_mantic_empresas.id_empresa = {idEmpresa}
				and 
					upper(tc_mantic_articulos_codigos.codigo) like upper('%{codigo}%')
				and 
					upper(tc_mantic_articulos.nombre) like upper('%{nombre}%')				
				group by 
				  tc_mantic_articulos.nombre,          
				  tc_mantic_articulos.menudeo,          
				  tc_mantic_articulos.medio_mayoreo,          
				  tc_mantic_articulos.mayoreo,          
				  tc_mantic_articulos.stock,          
				  tc_mantic_articulos.iva,          
				  tc_mantic_articulos.desperdicio          
				{sortOrder}
			</select>
		</unit>
		<unit id="VistaEmpaqueUnidadMedidaDto">
			<select id="empaqueUnidadMedida">
				select 
					tr_mantic_empaque_unidad_medida.id_empaque_unidad_medida as id_key,
					tc_mantic_unidades_medidas.nombre,
					tc_mantic_unidades_medidas.clave,
					tc_mantic_unidades_medidas.descripcion,
					tc_mantic_unidades_medidas.proporcion
				from
				  tr_mantic_empaque_unidad_medida
				inner join 
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida = tc_mantic_unidades_medidas.id_unidad_medida
				where 
					id_empaque= {idEmpaque}
			</select>
		</unit>
        <unit id="VistaProveedoresDto">
          <select id="row">
            select 
              tc_mantic_proveedores.id_proveedor as id_key,
              tc_mantic_proveedores.clave,
              tc_mantic_proveedores.rfc,
              tc_mantic_proveedores.razon_social,
              tc_mantic_tipos_proveedores.nombre as tipo_proveedor,
              tc_mantic_proveedores.dias_entrega,
              tc_mantic_tipos_dias.nombre as tipo_dia,
              tc_mantic_proveedores.descuento  
             from   
               tc_mantic_proveedores
             inner join
               tc_mantic_tipos_proveedores   on  tc_mantic_tipos_proveedores.id_tipo_proveedor= tc_mantic_proveedores.id_tipo_proveedor
             inner  join
               tc_mantic_tipos_dias  on tc_mantic_tipos_dias.id_tipo_dia=tc_mantic_proveedores.id_tipo_dia             
             where
               tc_mantic_proveedores.razon_social like '%{razonSocial}%'
              and
               (tc_mantic_proveedores.rfc like '%{rfc}%' or tc_mantic_proveedores.rfc is null)
              and
               tc_mantic_proveedores.clave like '%{clave}%'
              and 
                tc_mantic_proveedores.id_tipo_proveedor  in ({idTipoProveedor}) 
              and
                tc_mantic_proveedores.id_empresa={idEmpresa}            
              {sortOrder}
          </select>
          <select id="portal">
            select 
              tc_mantic_proveedores.id_proveedor as id_key,
              tc_mantic_proveedores.clave,
              tc_mantic_proveedores.rfc,
              tc_mantic_proveedores.razon_social,
              tc_mantic_tipos_proveedores.nombre as tipo_proveedor,
              tc_mantic_proveedores.dias_entrega,
              tc_mantic_tipos_dias.nombre as tipo_dia,
              tc_mantic_proveedores.descuento  
             from   
               tc_mantic_proveedores
             inner join
               tc_mantic_tipos_proveedores   on  tc_mantic_tipos_proveedores.id_tipo_proveedor= tc_mantic_proveedores.id_tipo_proveedor
             inner  join
               tc_mantic_tipos_dias  on tc_mantic_tipos_dias.id_tipo_dia=tc_mantic_proveedores.id_tipo_dia             
             where
               upper(tc_mantic_proveedores.razon_social) like upper('%{codigo}%')
              or
               (upper(tc_mantic_proveedores.rfc) like upper('%{codigo}%') or upper(tc_mantic_proveedores.rfc is null))
              or
               upper(tc_mantic_proveedores.clave like '%{codigo}%')
              and
                tc_mantic_proveedores.id_empresa in ({sucursales})
          </select>
          <select id="proveedorCondicionPago">
            select 
                tc_mantic_tipos_pagos.id_tipo_pago,
                tc_mantic_tipos_pagos.id_tipo_pago as id_key,            
                tc_mantic_tipos_pagos.nombre as nombre_pago,
                tc_mantic_tipos_formas_pagos.clave,
                tc_mantic_tipos_formas_pagos.nombre
            from 
              tc_mantic_tipos_pagos
            inner join 
              tc_mantic_tipos_formas_pagos on tc_mantic_tipos_formas_pagos.id_tipo_medio_pago=tc_mantic_tipos_pagos.id_tipo_medio_pago              
          </select>  
           <select id="direccionProveedor">
            select 
            tc_janal_entidades.id_entidad,tc_janal_municipios.id_municipio,tc_janal_localidades.id_localidad, tc_janal_entidades.id_entidad as id_key
          from 
            tc_janal_entidades 
          inner join
            tc_janal_municipios  on tc_janal_municipios.id_entidad=tc_janal_entidades.id_entidad
          inner join    
            tc_janal_localidades on tc_janal_localidades.id_municipio=tc_janal_municipios.id_municipio
           inner join
            tc_mantic_domicilios on tc_mantic_domicilios.id_localidad=tc_janal_localidades.id_localidad
           where 
            tc_mantic_domicilios.id_domicilio={idDomicilio}
          </select>            
        </unit> 
        <unit id="VistaClientesDto"> 
          <select id="row">
            select 
              tc_mantic_clientes.id_cliente as id_key,
              tc_mantic_clientes.clave,
              tc_mantic_clientes.rfc,
              tc_mantic_clientes.razon_social,
              tc_mantic_clientes.limite_credito,
              tc_mantic_clientes.plazo_dias,
              tc_mantic_domicilios.calle,
              tc_mantic_domicilios.numero_exterior,
              tc_mantic_domicilios.asentamiento,
              tc_mantic_domicilios.codigo_postal  
            from
              tc_mantic_clientes 
            left join
              tr_mantic_cliente_domicilio  on tr_mantic_cliente_domicilio.id_cliente=tc_mantic_clientes.id_cliente
            left join
              tc_mantic_domicilios on tc_mantic_domicilios.id_domicilio = tr_mantic_cliente_domicilio.id_domicilio
            where   
              tc_mantic_clientes.razon_social like '%{razonSocial}%'
            and
              tc_mantic_clientes.rfc like '%{rfc}%'
            and
              tc_mantic_clientes.clave like '%{clave}%' 
            and
              tc_mantic_clientes.id_empresa={idEmpresa} 
            and 
              tr_mantic_cliente_domicilio.id_principal={idPrincipal}            
            {sortOrder}            
          </select>         
          <select id="findRazonSocial">
            select 
              tc_mantic_clientes.id_cliente as id_key,
              tc_mantic_clientes.clave,
              tc_mantic_clientes.rfc,
              tc_mantic_clientes.razon_social,
              tc_mantic_clientes.limite_credito,
              tc_mantic_clientes.plazo_dias,
              tc_mantic_domicilios.calle,
              tc_mantic_domicilios.numero_exterior,
              tc_mantic_domicilios.asentamiento,
              tc_mantic_domicilios.codigo_postal  
            from
              tc_mantic_clientes 
            left join
              tr_mantic_cliente_domicilio  on tr_mantic_cliente_domicilio.id_cliente=tc_mantic_clientes.id_cliente
            left join
              tc_mantic_domicilios on tc_mantic_domicilios.id_domicilio = tr_mantic_cliente_domicilio.id_domicilio
            where   
              {condicion}
            and
              tc_mantic_clientes.id_empresa={idEmpresa}                        
          </select>         
        </unit>
        <unit id="VistaAlmacenesDto">
          <select id="row">
            select 
             tc_mantic_almacenes.id_almacen as id_key,
             tc_mantic_almacenes.clave,
             tc_mantic_almacenes.nombre,
             tc_mantic_almacenes.descripcion,
             tc_mantic_personas.nombres,
             tc_mantic_personas.paterno,
             tc_mantic_personas.materno,
             tc_mantic_domicilios.calle,
             tc_mantic_domicilios.numero_exterior,
             tc_mantic_domicilios.asentamiento,
             tc_mantic_domicilios.codigo_postal,
             tc_janal_entidades.descripcion as entidad,
             tc_janal_municipios.descripcion as municipio             
           from 
             tc_mantic_almacenes
           inner join
             tc_mantic_personas on tc_mantic_personas.id_persona=tc_mantic_almacenes.id_responsable
           inner join
             tr_mantic_almacen_domicilio on  tr_mantic_almacen_domicilio.id_almacen= tc_mantic_almacenes.id_almacen
           inner join
            tc_mantic_domicilios on tc_mantic_domicilios.id_domicilio = tr_mantic_almacen_domicilio.id_domicilio
           inner join
             tc_janal_localidades  on tc_mantic_domicilios.id_localidad=tc_janal_localidades.id_localidad
           inner join 
             tc_janal_municipios on tc_janal_municipios.id_municipio= tc_janal_localidades.id_municipio
            inner join
              tc_janal_entidades  on tc_janal_municipios.id_entidad=tc_janal_entidades.id_entidad
             where
              (tc_mantic_almacenes.clave like '%{clave}%' or tc_mantic_almacenes.clave is null)
             and
               tc_mantic_almacenes.nombre like '%{nombre}%'
              and 
                (tc_mantic_almacenes.descripcion  like '%{descripcion}%' or  tc_mantic_almacenes.descripcion is null)
              and
                tr_mantic_almacen_domicilio.id_principal={idPrincipal}  
              and
                  tc_mantic_almacenes.id_empresa={idEmpresa} 
             {sortOrder} 
          </select>  
        </unit>
		<unit id="VistaPersonasDto">
			<select id="row">
				select 
				  tc_mantic_personas.id_persona as id_key,
				  tc_mantic_personas.nombres,
				  tc_mantic_personas.paterno,
				  tc_mantic_personas.materno,
				  tc_mantic_personas.rfc,
				  tc_mantic_personas.curp,
				  tc_mantic_personas.fecha_nacimiento,
				  tc_mantic_tipos_personas.nombre as tipo_persona,
				  tc_janal_tipos_sexos.id_tipo_sexo,
		 		  tc_janal_tipos_sexos.nombre as sexo,
				  tc_janal_tipos_sexos.nombre,
				  tc_mantic_personas.cuenta 
				from 
					tc_mantic_personas
				inner join
					tr_mantic_empresa_personal on tc_mantic_personas.id_persona = tr_mantic_empresa_personal.id_persona
				inner join
					tc_mantic_personas_titulos on tc_mantic_personas_titulos.id_persona_titulo =tc_mantic_personas.id_persona_titulo
				inner join
					tc_mantic_tipos_personas  on tc_mantic_personas.id_tipo_persona=tc_mantic_tipos_personas.id_tipo_persona
				inner join
					tc_janal_tipos_sexos  on tc_janal_tipos_sexos.id_tipo_sexo = tc_mantic_personas.id_tipo_sexo
				where 
					(tc_mantic_personas.nombres like '%{nombres}%' 
				or
					tc_mantic_personas.paterno like '%{paterno}%'
				or
					tc_mantic_personas.materno  like '%{materno}%')
				and 
					tc_mantic_personas.rfc  like '%{rfc}%'
				and 
					tc_mantic_personas.id_tipo_sexo in ({idTipoSexo})
				and
					tc_mantic_personas.id_tipo_persona  in ({idTipoPersona})
				and 
					tr_mantic_empresa_personal.id_empresa= {idEmpresa}
				{sortOrder}  
			</select>              
			<select id="tipoPersona">
				select 
					tc_mantic_personas.*,tc_mantic_personas.id_persona as id_key
				from
					tc_mantic_personas
				inner join
					tr_mantic_empresa_personal on tc_mantic_personas.id_persona = tr_mantic_empresa_personal.id_persona
				where 
					tc_mantic_personas.id_tipo_persona= {idTipoPersona}
				and 
					tr_mantic_empresa_personal.id_empresa= {idEmpresa}
				order by
					paterno,materno,nombres
			</select>
    </unit>   
		<unit id="VistaGruposClientesDto">
			<select id="row">
				select      
					tc_mantic_grupos.id_grupo as id_key,
					tc_mantic_grupos.nombre,
					tc_mantic_grupos.registro
				from      
					tc_mantic_grupos
				inner join
					tc_mantic_grupos_clientes on tc_mantic_grupos.id_grupo= tc_mantic_grupos_clientes.id_grupo
				where      
					tc_mantic_grupos.nombre like '%{nombre}%' 
					or tc_mantic_grupos_clientes.id_cliente= {idCliente}
				group by
					tc_mantic_grupos.id_grupo,
					tc_mantic_grupos.nombre,
					tc_mantic_grupos.registro
				order by  
					tc_mantic_grupos.nombre
			</select>
		</unit>
		<unit id="VistaNotasEntradasDto">
			<select id="lazy">
        select
					tc_mantic_notas_entradas.id_nota_entrada as id_key,
					tc_mantic_notas_entradas.id_nota_entrada,
					tc_mantic_ordenes_compras.id_orden_compra,
					tc_mantic_ordenes_compras.consecutivo as orden_compra,
					tc_mantic_notas_entradas.consecutivo,
					tc_mantic_empresas.clave as empresa,
					if(tc_mantic_notas_entradas.id_directa= 1, "DIRECTA", "FACTURA") as directa,
					tc_mantic_notas_entradas.id_directa,
					tc_mantic_proveedores.razon_social,
					tc_mantic_notas_entradas.total,
					tc_mantic_notas_estatus.id_nota_estatus,
					tc_mantic_notas_estatus.nombre as estatus,
					tc_mantic_notas_estatus.estatus_asociados,
					tc_mantic_notas_entradas.registro     
        from
          tc_mantic_notas_entradas         
        inner join
          tc_mantic_empresas on tc_mantic_notas_entradas.id_empresa= tc_mantic_empresas.id_empresa         
        inner join
          tc_mantic_proveedores on tc_mantic_notas_entradas.id_proveedor= tc_mantic_proveedores.id_proveedor         
        inner join
          tc_mantic_notas_estatus on tc_mantic_notas_entradas.id_nota_estatus= tc_mantic_notas_estatus.id_nota_estatus      
        left join
          tc_mantic_ordenes_compras on tc_mantic_notas_entradas.id_orden_compra= tc_mantic_ordenes_compras.id_orden_compra     
        where
					tc_mantic_notas_entradas.id_empresa in ({idEmpresa})
					and {condicion}
				{sortOrder}
			</select>
			<select id="ordenes">
				select
				  tc_mantic_ordenes_compras.id_orden_compra as id_key,
				  tc_mantic_ordenes_compras.consecutivo,
					tc_mantic_proveedores.clave,
					tc_mantic_proveedores.razon_social,
				  tc_mantic_ordenes_compras.total,
					tc_mantic_ordenes_compras.id_orden_estatus,
				  tc_mantic_ordenes_estatus.nombre as estatus,
				  tc_mantic_ordenes_compras.registro
				from
				  tc_mantic_ordenes_compras
				inner join 
					tc_mantic_empresas on tc_mantic_ordenes_compras.id_empresa = tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_proveedores on tc_mantic_ordenes_compras.id_proveedor= tc_mantic_proveedores.id_proveedor
				inner join 
					tc_mantic_ordenes_estatus on tc_mantic_ordenes_compras.id_orden_estatus=tc_mantic_ordenes_estatus.id_orden_estatus
				where
				  tc_mantic_empresas.id_empresa in ({sucursales})
				  and tc_mantic_ordenes_compras.id_orden_estatus in (3,4,5)
				  and (tc_mantic_ordenes_compras.id_orden_compra= {idOrdenCompra} or {idOrdenCompra} is null)
				order by
				  tc_mantic_ordenes_compras.registro			
			</select>
		</unit>
		<unit id="VistaOrdenesComprasDto">
			<select id="lazy">
				select
					tc_mantic_ordenes_compras.id_orden_compra as id_key,
					tc_mantic_ordenes_compras.id_empresa,  
				  tc_mantic_empresas.clave as empresa,  
					tc_mantic_ordenes_compras.consecutivo,  
					tc_mantic_proveedores.id_proveedor,  
					tc_mantic_proveedores.razon_social as proveedor,
					tc_mantic_ordenes_compras.total,
				  tc_mantic_ordenes_estatus.nombre as estatus,
					tc_mantic_ordenes_compras.id_orden_estatus,
					tc_mantic_ordenes_compras.registro,
					tc_mantic_ordenes_estatus.estatus_asociados
				from 
					tc_mantic_ordenes_compras
				inner join 
					tr_mantic_proveedor_pago on tc_mantic_ordenes_compras.id_proveedor_pago= tr_mantic_proveedor_pago.id_proveedor_pago
				inner join 
					tc_mantic_proveedores on tr_mantic_proveedor_pago.id_proveedor= tc_mantic_proveedores.id_proveedor
				inner join 
					tc_mantic_empresas on tc_mantic_ordenes_compras.id_empresa= tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_ordenes_estatus on tc_mantic_ordenes_compras.id_orden_estatus=tc_mantic_ordenes_estatus.id_orden_estatus
				where
					tc_mantic_ordenes_compras.id_empresa in ({idEmpresa})
					and {condicion}
				{sortOrder}
			</select>
			<select id="solicitado">
        select      
          tc_mantic_ordenes_detalles.id_orden_detalle as id_key,
				  tc_mantic_articulos.nombre,     
				  tc_mantic_ordenes_compras.consecutivo,
          tc_mantic_ordenes_detalles.cantidad,
          tc_mantic_ordenes_detalles.costo/tc_mantic_ordenes_compras.tipo_de_cambio as costo,
          tc_mantic_proveedores.razon_social,
          tc_mantic_tipos_monedas.nombre as moneda,
          tc_mantic_ordenes_detalles.registro
        from      
          tc_mantic_ordenes_detalles
				inner join
					tc_mantic_articulos on tc_mantic_ordenes_detalles.id_articulo = tc_mantic_articulos.id_articulo
				inner join 
					tc_mantic_ordenes_compras on tc_mantic_ordenes_detalles.id_orden_compra= tc_mantic_ordenes_compras.id_orden_compra
				inner join
					tc_mantic_proveedores on tc_mantic_ordenes_compras.id_proveedor= tc_mantic_proveedores.id_proveedor       
        inner join 
          tc_mantic_tipos_monedas on tc_mantic_proveedores.id_tipo_moneda= tc_mantic_tipos_monedas.id_tipo_moneda
        where      
          tc_mantic_ordenes_detalles.id_articulo = {idArticulo}
          and tc_mantic_ordenes_compras.id_orden_estatus in (3,4,5)
        order by
          tc_mantic_ordenes_detalles.registro desc				
			</select>
			<select id="almacen">
				select
					tc_mantic_articulos.id_articulo as id_key,
					tc_mantic_articulos_codigos.codigo as propio,
					tc_mantic_articulos.nombre,
					tc_mantic_articulos.precio as costo,
					'0.00' as descuento,
					-1 as id_orden_compra,
					'0.00' as extras,
					tc_mantic_articulos.precio as importe,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= {idProveedor}) as codigo,
					tc_mantic_articulos.iva,
					0.0 as total_impuesto,
					0.0 as sub_total,
					tc_mantic_almacenes_articulos.maximo- tc_mantic_almacenes_articulos.stock as cantidad,
					-1 as id_orden_detalle,
					tc_mantic_articulos.id_articulo,
					0.0 as descuentos,
					-1 as id_proveedor,
					tc_mantic_almacenes_articulos.stock,
					tc_mantic_almacenes_articulos.minimo,
					tc_mantic_almacenes_articulos.maximo
				from
					tc_mantic_articulos
				inner join
					tc_mantic_almacenes_articulos on tc_mantic_articulos.id_articulo= tc_mantic_almacenes_articulos.id_articulo
				inner join
					tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo= tc_mantic_articulos_codigos.id_articulo
				where 
					tc_mantic_almacenes.id_empresa in ({sucursales})
					and tc_mantic_almacenes.id_almacen= {idAlmacen}
					and tc_mantic_almacenes_articulos.stock &lt;= tc_mantic_almacenes_articulos.minimo
					and tc_mantic_articulos_codigos.id_principal= 1
				order by
					tc_mantic_articulos.nombre
			</select>
			<select id="proveedor">
				select
					tc_mantic_articulos.id_articulo as id_key,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
					tc_mantic_articulos.nombre,
					tc_mantic_articulos.precio as costo,
					'0.00' as descuento,
					-1 as id_orden_compra,
					'0.00' as extras,
					tc_mantic_articulos.precio as importe,
					tc_mantic_articulos_codigos.codigo,
					tc_mantic_articulos.iva,
					0.0 as total_impuesto,
					0.0 as sub_total,
					tc_mantic_almacenes_articulos.maximo- tc_mantic_almacenes_articulos.stock as cantidad,
					-1 as id_orden_detalle,
					tc_mantic_articulos.id_articulo,
					0.0 as descuentos,
					tc_mantic_proveedores.id_proveedor,
					tc_mantic_almacenes_articulos.stock,
					tc_mantic_almacenes_articulos.minimo,
					tc_mantic_almacenes_articulos.maximo
				from
					tc_mantic_articulos
				inner join
					tc_mantic_almacenes_articulos on tc_mantic_articulos.id_articulo= tc_mantic_almacenes_articulos.id_articulo
				inner join
					tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo= tc_mantic_articulos_codigos.id_articulo
				inner join
					tc_mantic_proveedores on tc_mantic_articulos_codigos.id_proveedor= tc_mantic_proveedores.id_proveedor
				where 
					tc_mantic_almacenes.id_empresa in ({sucursales})
					and tc_mantic_almacenes.id_almacen= {idAlmacen}
					and tc_mantic_almacenes_articulos.stock&lt;= tc_mantic_almacenes_articulos.minimo
					and tc_mantic_proveedores.id_proveedor= {idProveedor}
				order by
					tc_mantic_articulos.nombre				
			</select>
			<select id="faltantes">
				select
					tc_mantic_articulos.id_articulo as id_key,
					tc_mantic_articulos.id_articulo,
					tc_mantic_articulos_codigos.codigo as propio,
					tc_mantic_articulos.nombre,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= {idProveedor}) as codigo,
					tc_mantic_articulos.iva,
					tc_mantic_articulos.precio as costo,
					tc_mantic_articulos.precio,
					ifnull(tc_mantic_ordenes_compras.id_orden_estatus, 0) as id_orden_estatus,
					tc_mantic_ordenes_estatus.nombre as estatus,
					tc_mantic_almacenes_articulos.maximo- tc_mantic_almacenes_articulos.stock as cantidad,
					tc_mantic_almacenes_articulos.stock,
					tc_mantic_almacenes_articulos.minimo,
					tc_mantic_almacenes_articulos.maximo
				from
					tc_mantic_articulos
				inner join
					tc_mantic_almacenes_articulos on tc_mantic_articulos.id_articulo= tc_mantic_almacenes_articulos.id_articulo
				inner join
					tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo= tc_mantic_articulos_codigos.id_articulo
				left join	
					tc_mantic_ordenes_detalles on tc_mantic_articulos.id_articulo= tc_mantic_ordenes_detalles.id_articulo
				left join 
					tc_mantic_ordenes_compras on tc_mantic_ordenes_detalles.id_orden_compra= tc_mantic_ordenes_compras.id_orden_compra
				left join
					tc_mantic_ordenes_estatus on tc_mantic_ordenes_estatus.id_orden_estatus= tc_mantic_ordenes_compras.id_orden_estatus
				where 
					tc_mantic_almacenes.id_empresa in ({sucursales})
					and tc_mantic_almacenes.id_almacen= {idAlmacen}
					and tc_mantic_almacenes_articulos.stock &lt;= tc_mantic_almacenes_articulos.minimo
					and tc_mantic_articulos_codigos.id_principal= 1
          and (tc_mantic_ordenes_compras.id_orden_estatus in (3,4,5) or tc_mantic_ordenes_compras.id_orden_estatus is null)
				order by
					tc_mantic_articulos.nombre
			</select>			
			<select id="ultimo">
        select      
          tc_mantic_ordenes_detalles.id_orden_detalle as id_key,
				  tc_mantic_articulos.nombre,
				  tc_mantic_ordenes_compras.consecutivo,
          tc_mantic_ordenes_detalles.costo/tc_mantic_ordenes_compras.tipo_de_cambio	as costo,
          tc_mantic_articulos.stock,
          tc_mantic_proveedores.razon_social,
          tc_mantic_tipos_monedas.nombre as moneda,
          tc_mantic_ordenes_detalles.registro
        from      
          tc_mantic_ordenes_detalles
				inner join
					tc_mantic_articulos on tc_mantic_ordenes_detalles.id_articulo = tc_mantic_articulos.id_articulo
				inner join 
					tc_mantic_ordenes_compras on tc_mantic_ordenes_detalles.id_orden_compra= tc_mantic_ordenes_compras.id_orden_compra
				inner join
						tc_mantic_proveedores on tc_mantic_ordenes_compras.id_proveedor= tc_mantic_proveedores.id_proveedor       
        inner join 
          tc_mantic_tipos_monedas on tc_mantic_proveedores.id_tipo_moneda= tc_mantic_tipos_monedas.id_tipo_moneda
        where      
          tc_mantic_ordenes_detalles.id_articulo =  {idArticulo}
          and tc_mantic_ordenes_compras.id_orden_estatus in (6)
        order by
          tc_mantic_ordenes_detalles.registro desc				
			</select>
			<select id="sugerido">
        select      
          tr_mantic_articulo_precio_sugerido.id_articulo_precio_sugerido as id_key,   
				  tc_mantic_articulos.nombre,     
          tc_mantic_proveedores.clave as clave_proveedor,
          tc_mantic_proveedores.razon_social as proveedor,
          tr_mantic_articulo_precio_sugerido.precio,
          tr_mantic_articulo_precio_sugerido.descuento,
          tr_mantic_articulo_precio_sugerido.observaciones,
          tr_mantic_articulo_precio_sugerido.id_leido
        from      
          tr_mantic_articulo_precio_sugerido
				inner join
					tc_mantic_articulos on tr_mantic_articulo_precio_sugerido.id_articulo = tc_mantic_articulos.id_articulo
				inner join 
					tc_mantic_proveedores on tr_mantic_articulo_precio_sugerido.id_proveedor= tc_mantic_proveedores.id_proveedor
        where      
          tr_mantic_articulo_precio_sugerido.id_articulo = {idArticulo} and tr_mantic_articulo_precio_sugerido.id_leido= 2
				order by
				  tr_mantic_articulo_precio_sugerido.registro				
			</select>
			<select id="articulo">
        select 
          tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
				  tc_mantic_articulos.id_articulo,
				  tc_mantic_articulos_codigos.codigo,
				  tc_mantic_articulos_codigos.id_principal,
				  tc_mantic_articulos_codigos.id_proveedor
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and (
				    (tc_mantic_articulos.id_articulo= {idArticulo} and tc_mantic_articulos_codigos.id_principal= 1)
				    or
				    (tc_mantic_articulos.id_articulo= {idArticulo} and tc_mantic_articulos_codigos.id_proveedor= {idProveedor})	
				   ) 			
				order by 
				  tc_mantic_articulos_codigos.id_articulo,
				  tc_mantic_articulos_codigos.id_principal
			</select>
			<select id="codigos">
				select 
				  tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
				  tc_mantic_articulos.id_articulo,
				  tc_mantic_articulos_codigos.codigo as propio,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= 1) as codigo,
				  tc_mantic_articulos_codigos.id_principal,
				  tc_mantic_articulos_codigos.id_proveedor,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and (
				      upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%'
				    or 
				      upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*'
				    or
				      (upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%' and tc_mantic_articulos_codigos.id_proveedor= {idProveedor})	
				    or
				      tc_mantic_articulos.id_articulo= {idArticulo}
				   ) 			
				order by 
				  tc_mantic_articulos.nombre
			</select>			
			<select id="porNombre">
				select 
				  tc_mantic_articulos.id_articulo as id_key,
				  tc_mantic_articulos.id_articulo,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear
				from 
					tc_mantic_articulos
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and 
				  (
				    upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*'
				  or
				    tc_mantic_articulos.id_articulo= {idArticulo}
				  ) 			
				order by 
				  tc_mantic_articulos.nombre				
			</select>
			<select id="porCodigo">
				select 
				  tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
				  tc_mantic_articulos.id_articulo,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and (
				      upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%'
				    or
				      tc_mantic_articulos.id_articulo= {idArticulo}
				   ) 			
				order by 
				  tc_mantic_articulos.nombre
			</select>
			<select id="proveedores">
        select
					tc_mantic_proveedores.id_proveedor as id_key,
					tc_mantic_proveedores.clave,  
					tc_mantic_proveedores.razon_social as nombre,
					tc_mantic_proveedores.dias_entrega
				from 
					tc_mantic_ordenes_compras
				inner join
						tr_mantic_proveedor_pago on tc_mantic_ordenes_compras.id_proveedor_pago= tr_mantic_proveedor_pago.id_proveedor_pago
				inner join
						tc_mantic_proveedores on tr_mantic_proveedor_pago.id_proveedor= tc_mantic_proveedores.id_proveedor       
				where 		
				  tc_mantic_ordenes_compras.id_empresa in ({sucursales})
				group by
          tc_mantic_proveedores.id_proveedor,
					tc_mantic_proveedores.clave,  
					tc_mantic_proveedores.razon_social,
					tc_mantic_proveedores.dias_entrega			
				order by
				  tc_mantic_proveedores.clave
			</select>
			<select id="condiciones">
        select      
				  tr_mantic_proveedor_pago.id_proveedor_pago as id_key,
          tr_mantic_proveedor_pago.id_proveedor,
          tr_mantic_proveedor_pago.clave,
          tr_mantic_proveedor_pago.descuento,
          tr_mantic_proveedor_pago.id_tipo_pago,
          tc_mantic_tipos_compras.id_tipo_compra,
          tc_mantic_tipos_compras.nombre,
          tr_mantic_proveedor_pago.observaciones
        from      
          tr_mantic_proveedor_pago
        inner join 
          tc_mantic_tipos_compras on tr_mantic_proveedor_pago.id_tipo_compra= tc_mantic_tipos_compras.id_tipo_compra
        where      
          tr_mantic_proveedor_pago.id_proveedor = {idProveedor}
				order by
				  tr_mantic_proveedor_pago.clave				
			</select>	
			<select id="moneda">
        select      
					tc_mantic_proveedores.id_proveedor as id_key,
          tc_mantic_proveedores.*,
          tc_mantic_tipos_monedas.nombre as moneda,
          tc_mantic_tipos_monedas.siglas,
          tc_mantic_tipos_monedas.simbolo,
          tc_mantic_tipos_proveedores.nombre as tipo_proveedor,
          tc_mantic_tipos_proveedores.dias,
          tc_mantic_tipos_dias.nombre as tipo_dia
        from      
          tc_mantic_proveedores
        inner join 
          tc_mantic_tipos_monedas on tc_mantic_proveedores.id_tipo_moneda= tc_mantic_tipos_monedas.id_tipo_moneda
        inner join 
          tc_mantic_tipos_proveedores on tc_mantic_proveedores.id_tipo_proveedor= tc_mantic_tipos_proveedores.id_tipo_proveedor
        inner join 
          tc_mantic_tipos_dias on tc_mantic_proveedores.id_tipo_dia= tc_mantic_tipos_dias.id_tipo_dia
        where 
          tc_mantic_proveedores.id_empresa in ({sucursales})
				order by
				  tc_mantic_proveedores.clave
			</select>
		</unit>
		<unit id="VistaDomiciliosCatalogosDto">
			<select id="domicilios">
				select 
          tc_mantic_domicilios.id_domicilio as id_key,
          tc_mantic_domicilios.*,
          concat(tc_janal_entidades.descripcion,' , ',calle,' ',numero_exterior,' ',asentamiento) as domicilio,          
          tc_janal_localidades.clave as clave_localidad,
          tc_janal_localidades.descripcion as localidad,
          tc_janal_municipios.id_municipio,
          tc_janal_municipios.clave as clave_municipio,
          tc_janal_municipios.descripcion as municipio,
          tc_janal_entidades.id_entidad,
          tc_janal_entidades.clave as clave_entidad,
          tc_janal_entidades.descripcion as entidad
        from 
          tc_mantic_domicilios
        inner join 
          tc_janal_localidades on tc_mantic_domicilios.id_localidad = tc_janal_localidades.id_localidad
        inner join
          tc_janal_municipios on tc_janal_localidades.id_municipio = tc_janal_municipios.id_municipio
        inner join 
          tc_janal_entidades on tc_janal_municipios.id_entidad = tc_janal_entidades.id_entidad
        where 
          {condicion}
        order by 
          tc_janal_entidades.clave,
          tc_janal_municipios.clave,
          tc_janal_localidades.clave,
          tc_mantic_domicilios.codigo_postal
			</select>
		</unit>
		<unit id="VistaArticulosAlmacenDto">
			<select id="articulos">
				select 
				  tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
				  tc_mantic_articulos.id_articulo,
				  tc_mantic_articulos_codigos.codigo as propio,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= 1) as codigo,
				  tc_mantic_articulos_codigos.id_principal,
				  tc_mantic_articulos_codigos.id_proveedor,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and (
				    (upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%' and tc_mantic_articulos_codigos.id_principal= 1)
				    or 
				    upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*'
				    or
				    upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%' 
				   ) 			
				order by 
				  tc_mantic_articulos.nombre
			</select>
			<select id="findArticulo">
				select 
					*
				from (
				select 				  
				  tc_mantic_articulos.id_articulo as id_key,				  
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= 1) as codigo,				  
				  tc_mantic_articulos.nombre				  
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and (
				    (upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%' and tc_mantic_articulos_codigos.id_principal= 1)
				    or 
				    upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*'
				    or
				    upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%' 
				   ) 		
				order by 
				  tc_mantic_articulos.nombre) principal
				group by 
					id_key, codigo, nombre
			</select>
		</unit>
		<unit id="VistaPortalProveedoresDto">
			<select id="banca">
				select 
					tc_mantic_proveedores_bancos.id_proveedor_banca as id_key,
					tc_mantic_proveedores_bancos.convenio_cuenta,
					tc_mantic_proveedores_bancos.clabe_referencia,
					tc_mantic_bancos.nombre
				 from 
					 tc_mantic_proveedores_bancos
				 inner join
					 tc_mantic_bancos on tc_mantic_proveedores_bancos.id_banco = tc_mantic_bancos.id_banco
				 where 
					 tc_mantic_proveedores_bancos.id_proveedor = {idProveedor}
					and 
					 tc_mantic_proveedores_bancos.id_tipo_cuenta= {idTipoCuenta}
			</select>
		</unit>
		<unit id="VistaEmpresasDto">
			<select id="row">
				select 
					tc_mantic_empresas.id_empresa as id_key,
					tc_mantic_empresas.id_tipo_empresa,
					tc_mantic_empresas.clave, 
					tc_mantic_empresas.nombre,
					tc_mantic_empresas.titulo,
					tc_mantic_tipos_empresas.nombre tipo 
				from 
					tc_mantic_empresas
				inner join 
					tc_mantic_tipos_empresas on tc_mantic_tipos_empresas.id_tipo_empresa = tc_mantic_empresas.id_tipo_empresa
				where 
					upper(tc_mantic_empresas.clave) like upper('%{clave}%')
				and 
					upper(tc_mantic_empresas.nombre) like upper('%{nombre}%')
				and
					upper(tc_mantic_empresas.titulo) like upper('%{titulo}%')
				and 
					tc_mantic_tipos_empresas.id_tipo_empresa in ({tipoEmpresa}) 					
				{sortOrder}
			</select>
		</unit>
		<unit id="VistaTallerServiciosDto">
			<select id="principal">
				select  
					tc_mantic_servicios.id_servicio as id_key,
					tc_mantic_servicios.consecutivo,
					tc_mantic_servicios.herramienta,
					tc_mantic_servicios.marca,
					tc_mantic_servicios.modelo,
					tc_mantic_servicios.fecha_estimada,
          tc_mantic_clientes.razon_social, 
					tc_mantic_servicios_estatus.nombre estatus
				from 
					tc_mantic_servicios
				inner join 
					tc_mantic_clientes on tc_mantic_servicios.id_cliente = tc_mantic_clientes.id_cliente
				inner join 
					tc_mantic_servicios_estatus on tc_mantic_servicios.id_servicio_estatus = tc_mantic_servicios_estatus.id_servicio_estatus
				where 
					tc_mantic_servicios.id_empresa={idEmpresa}
				and
					tc_mantic_servicios.consecutivo like '%{consecutivo}%'
				and 
					tc_mantic_servicios_estatus.id_servicio_estatus in ({estatus})
				and 
					upper(tc_mantic_servicios.herramienta) like upper('%{herramienta}%')
				and 
					upper(tc_mantic_clientes.razon_social) like upper('%{cliente}%')
				{sortOrder}
			</select>			
		</unit>
	</dml>    
</process>
