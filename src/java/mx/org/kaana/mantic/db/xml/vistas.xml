<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
		Relación de consultas para las vistas de MANTIC
-->
<process>
	<dml> 
		<unit id="VistaArticulosDto">
			<select id="row">
				select 
				  tc_mantic_articulos.id_articulo as id_key,
				  tc_mantic_articulos.nombre,          
				  tc_mantic_articulos.menudeo,          
				  tc_mantic_articulos.medio_mayoreo,          
				  tc_mantic_articulos.mayoreo,          
				  tc_mantic_articulos.stock,       
				  tc_mantic_articulos.iva,          
				  tc_mantic_articulos.desperdicio          
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				inner join
					tr_mantic_empaque_unidad_medida on tc_mantic_articulos.id_empaque_unidad_medida = tr_mantic_empaque_unidad_medida.id_unidad_medida
				inner join 
					tc_mantic_empaques on tr_mantic_empaque_unidad_medida.id_empaque = tc_mantic_empaques.id_empaque
				inner join 
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida = tc_mantic_unidades_medidas.id_unidad_medida
				where 
					tc_mantic_empresas.id_empresa = {idEmpresa}
				and 
					upper(tc_mantic_articulos_codigos.codigo) like upper('%{codigo}%')
				and 
					upper(tc_mantic_articulos.nombre) like upper('%{nombre}%')				
				group by 
				  tc_mantic_articulos.nombre,          
				  tc_mantic_articulos.menudeo,          
				  tc_mantic_articulos.medio_mayoreo,          
				  tc_mantic_articulos.mayoreo,          
				  tc_mantic_articulos.stock,          
				  tc_mantic_articulos.iva,          
				  tc_mantic_articulos.desperdicio          
				{sortOrder}
			</select>
		</unit>
		<unit id="VistaEmpaqueUnidadMedidaDto">
			<select id="empaqueUnidadMedida">
				select 
					tr_mantic_empaque_unidad_medida.id_empaque_unidad_medida as id_key,
					tc_mantic_unidades_medidas.nombre,
					tc_mantic_unidades_medidas.clave,
					tc_mantic_unidades_medidas.descripcion,
					tc_mantic_unidades_medidas.proporcion
				from
				  tr_mantic_empaque_unidad_medida
				inner join 
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida = tc_mantic_unidades_medidas.id_unidad_medida
				where 
					id_empaque= {idEmpaque}
			</select>
		</unit>
	</dml>    
</process>
