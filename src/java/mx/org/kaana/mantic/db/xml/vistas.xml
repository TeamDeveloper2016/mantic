<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
		Relación de consultas para las vistas de MANTIC
-->
<process>
	<dml> 
		<unit id="VistaCierresCajasDto">
			<select id="creditos">
					select
						tc_mantic_ventas.id_venta as id_key,
						tc_mantic_clientes.id_cliente,  
						tc_mantic_clientes.razon_social as cliente,
						tc_mantic_ventas.ticket,
						tc_mantic_ventas.total,
						tc_mantic_ventas.id_venta_estatus,
						tc_mantic_ventas.registro,
						tc_mantic_personas.cuenta,
						concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as vendedor
					from 
						tc_mantic_ventas
					inner join 
						tc_mantic_clientes on tc_mantic_ventas.id_cliente= tc_mantic_clientes.id_cliente
					inner join 
						tc_mantic_empresas on tc_mantic_ventas.id_empresa= tc_mantic_empresas.id_empresa
					inner join 
						tc_mantic_ventas_estatus on tc_mantic_ventas.id_venta_estatus=tc_mantic_ventas_estatus.id_venta_estatus
					inner join 
						tc_janal_usuarios on tc_mantic_ventas.id_usuario = tc_janal_usuarios.id_usuario
					inner join				
						tc_mantic_personas on tc_mantic_personas.id_persona = tc_janal_usuarios.id_persona		
					inner join 
						tr_mantic_venta_medio_pago on tc_mantic_ventas.id_venta = tr_mantic_venta_medio_pago.id_venta
					where
						tc_mantic_ventas.id_empresa in ({idEmpresa})
						and tr_mantic_venta_medio_pago.id_caja= {idCaja}
						and tc_mantic_ventas.id_venta_estatus= 4
						and date_format(tc_mantic_ventas.registro, '%Y%m%d%H%i%S')>= '{vigenciaInicio}'
				    and date_format(tc_mantic_ventas.registro, '%Y%m%d%H%i%S')<= '{vigenciaFin}'
					group by
            tc_mantic_ventas.id_venta,
						tc_mantic_clientes.id_cliente,  
						tc_mantic_clientes.razon_social,
						tc_mantic_ventas.ticket,
						tc_mantic_ventas.total,
						tc_mantic_ventas.id_venta_estatus,
						tc_mantic_ventas.registro,
						tc_mantic_personas.cuenta,			
						concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno)
					order by
					  tc_mantic_ventas.registro
			</select>
      <select id="unica">
        select      
          tc_mantic_cajas.id_caja as id_key,
          tc_mantic_cajas.*
        from 
          tc_mantic_cajas
        where 
          tc_mantic_cajas.id_empresa= {idEmpresa}
          and tc_mantic_cajas.id_caja not in (
        select      
          distinct(tc_mantic_cierres_cajas.id_caja) as id_caja
        from      
          tc_mantic_cierres 
        inner join
          tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
        inner join 
          tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
        where
          tc_mantic_cajas.id_empresa= {idEmpresa}
			  )
			</select>
			<select id="abiertas">
        select
					tc_mantic_ventas.id_venta as id_key,
					tc_mantic_ventas.id_empresa,  
				  tc_mantic_empresas.clave as empresa,  
				  tc_mantic_empresas.nombre as nombre_empresa,  
					tc_mantic_ventas.dia,  
					tc_mantic_ventas.consecutivo,  
					tc_mantic_ventas.total,
				  tc_mantic_ventas_estatus.nombre as estatus,
					tc_mantic_ventas.id_venta_estatus,
					tc_mantic_ventas.registro,
					tc_mantic_personas.cuenta,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre
				from 
					tc_mantic_ventas
				inner join 
					tc_mantic_empresas on tc_mantic_ventas.id_empresa= tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_ventas_estatus on tc_mantic_ventas.id_venta_estatus=tc_mantic_ventas_estatus.id_venta_estatus
				inner join 
				  tc_janal_usuarios on tc_mantic_ventas.id_usuario = tc_janal_usuarios.id_usuario
				inner join				
					tc_mantic_personas on tc_mantic_personas.id_persona = tc_janal_usuarios.id_persona
				where
				  tc_mantic_ventas.id_empresa= {idEmpresa}
				  and tc_mantic_ventas.id_venta_estatus in (1, 2)
        order by
          tc_mantic_ventas.consecutivo
			</select>
			<select id="global">
				select
					tc_mantic_cierres.id_cierre as id_key,
					tc_mantic_empresas.id_empresa,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_cajas.clave as caja,
					tc_mantic_cajas.id_caja,
					tc_mantic_cajas.limite,
				  tc_mantic_cierres_alertas.mensaje,
					tc_mantic_cierres_cajas.id_tipo_medio_pago,
					tc_mantic_cierres_cajas.id_cierre_caja,
				  tc_mantic_cierres_cajas.disponible,
				  tc_mantic_cierres_cajas.acumulado,
				  tc_mantic_cierres_cajas.saldo,
				  tc_mantic_cierres_cajas.dia,
				  tc_mantic_cierres_cajas.importe,
				  tc_mantic_cierres_alertas.registro
				from
					tc_mantic_cierres
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join 
					tc_mantic_cierres_alertas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_alertas.id_cierre
				inner join
					tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
				inner join
					tc_mantic_empresas on tc_mantic_cajas.id_empresa= tc_mantic_empresas.id_empresa
				where
				  tc_mantic_empresas.id_empresa in ({sucursales})
				  and tc_mantic_cierres_alertas.id_notifica= 1
				  and tc_mantic_cierres_cajas.id_tipo_medio_pago= 1
				order by
				  tc_mantic_cierres_cajas.registro				
			</select>			
			<select id="depurar">
        select
					tc_mantic_cierres.*
				from
				  tc_mantic_cierres
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				where 
				  tc_mantic_cierres_cajas.id_caja={idCaja}				
			</select>	
			<select id="abonos">
				select
					count(tc_mantic_cierres_cajas.id_caja) as total
				from
				  tc_mantic_cierres_cajas
				inner join  
					tc_mantic_cierres_retiros on tc_mantic_cierres_cajas.id_cierre_caja= tc_mantic_cierres_retiros.id_cierre_caja
				where 
				  tc_mantic_cierres_cajas.id_caja= {idCaja}
			</select>	
			<select id="movimientos">
        select
					tc_mantic_cierres_bitacora.id_cierre_bitacora as id_key,
					tc_mantic_cajas.clave as consecutivo,
					sum(tc_mantic_cierres_cajas.acumulado) as importe,
					tc_mantic_cierres_bitacora.justificacion,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre,
				  tc_mantic_cierres_estatus.nombre as estatus,
					tc_mantic_cierres_bitacora.registro
				from 
					tc_mantic_cierres_bitacora
				inner join
					tc_mantic_cierres_estatus on tc_mantic_cierres_bitacora.id_cierre_estatus= tc_mantic_cierres_estatus.id_cierre_estatus
				inner join
					tc_janal_usuarios on tc_mantic_cierres_bitacora.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres_bitacora.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join
					tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
				where
					tc_mantic_cierres_bitacora.id_cierre= {idCierre}				
				order by
					tc_mantic_cierres_bitacora.registro desc
			</select>
			<select id="lazy">
				select
				  tc_mantic_cierres_cajas.id_cierre_caja as id_key,
					tc_mantic_cierres.id_cierre,
					tc_mantic_empresas.id_empresa,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_cajas.clave as caja,
					tc_mantic_cajas.limite,
					if(tc_mantic_cierres.id_diferencias= 1, 'SI', 'NO') as diferencias,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as usuario,
					tc_mantic_cierres_estatus.nombre as estatus,
					sum(tc_mantic_cierres_cajas.disponible) as disponible,
					sum(tc_mantic_cierres_cajas.acumulado) as acumulado,
					sum(tc_mantic_cierres_cajas.saldo) as saldo,
					sum(tc_mantic_cierres_cajas.saldo) as efectivo,
					sum(tc_mantic_cierres_cajas.importe) as capturado,
					tc_mantic_cierres.observaciones,
					tc_mantic_cierres.registro,
					tc_mantic_cierres.id_cierre_estatus,
					tc_mantic_cajas.id_caja
				from
					tc_mantic_cierres
				inner join
					tc_janal_usuarios on tc_mantic_cierres.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join
					tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
				inner join
					tc_mantic_empresas on tc_mantic_cajas.id_empresa= tc_mantic_empresas.id_empresa
				inner join
					tc_mantic_cierres_estatus on tc_mantic_cierres.id_cierre_estatus= tc_mantic_cierres_estatus.id_cierre_estatus
				where
					tc_mantic_cajas.id_empresa in ({idEmpresa})
					and {condicion}
				group by
					tc_mantic_cierres.id_cierre,
					tc_mantic_empresas.id_empresa,
					tc_mantic_empresas.clave,
					tc_mantic_cajas.clave,
					if(tc_mantic_cierres.id_diferencias= 1, 'SI', 'NO'),
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno),
					tc_mantic_cierres_estatus.nombre,
					tc_mantic_cierres.observaciones,
					tc_mantic_cierres.registro,
					tc_mantic_cierres.id_cierre_estatus,
					tc_mantic_cajas.id_caja
				{sortOrder}
			</select>
			<select id="retiros">
				select
					tc_mantic_cierres_retiros.id_cierre_retiro as id_key,
					tc_mantic_cierres.id_cierre,
					tc_mantic_cierres.id_cierre_estatus,
					tc_mantic_empresas.id_empresa,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_cajas.clave as caja,
					tc_mantic_cierres_retiros.consecutivo,
					tc_mantic_cierres_retiros.id_abono,
				  if(tc_mantic_cierres_retiros.id_abono= 1, 'ABONO', 'RETIRO') as tipo,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as usuario,
					tc_mantic_tipos_medios_pagos.nombre as medio,
				  tc_mantic_cierres_retiros.concepto,
					tc_mantic_cierres_retiros.importe,
					tc_mantic_cierres_retiros.observaciones,
					tc_mantic_cierres_retiros.registro,
					tc_mantic_cajas.id_caja,
					tc_mantic_tipos_medios_pagos.id_tipo_medio_pago,
					tc_mantic_tipos_medios_pagos.nombre as moneda,
					tc_mantic_cierres_cajas.id_cierre_caja,
				  tc_mantic_cierres_retiros.id_cierre_retiro
				from
					tc_mantic_cierres
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join
					tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
				inner join
					tc_mantic_empresas on tc_mantic_cajas.id_empresa= tc_mantic_empresas.id_empresa
				inner join
					tc_mantic_cierres_retiros on tc_mantic_cierres_cajas.id_cierre_caja= tc_mantic_cierres_retiros.id_cierre_caja
				inner join
					tc_mantic_tipos_medios_pagos on tc_mantic_cierres_retiros.id_tipo_medio_pago= tc_mantic_tipos_medios_pagos.id_tipo_medio_pago
				inner join
					tc_janal_usuarios on tc_mantic_cierres_retiros.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
				  tc_mantic_cierres.id_cierre= {idCierre}
				group by
					tc_mantic_cierres.id_cierre,
					tc_mantic_cierres.id_cierre_estatus,
					tc_mantic_empresas.id_empresa,
					tc_mantic_empresas.clave,
					tc_mantic_cajas.clave,
					tc_mantic_cierres_retiros.consecutivo,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno),
					tc_mantic_tipos_medios_pagos.nombre,
					tc_mantic_cierres_retiros.importe,
					tc_mantic_cierres_retiros.observaciones,
					tc_mantic_cierres_retiros.registro,
					tc_mantic_cajas.id_caja,
					tc_mantic_tipos_medios_pagos.id_tipo_medio_pago,
					tc_mantic_tipos_medios_pagos.nombre,
					tc_mantic_cierres_cajas.id_cierre_caja
				{sortOrder}
			</select>
			<select id="caja">
				select
					tc_mantic_cierres.id_cierre as id_key,
					tc_mantic_cierres.id_cierre_estatus,
					tc_mantic_empresas.id_empresa,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_cajas.clave as caja,
					tc_mantic_cajas.id_caja,
					tc_mantic_cierres_cajas.id_tipo_medio_pago,
					tc_mantic_cierres_cajas.id_cierre_caja,
				  tc_mantic_cierres_cajas.disponible,
				  tc_mantic_cierres_cajas.acumulado,
				  tc_mantic_cierres_cajas.saldo,
				  tc_mantic_cierres_cajas.dia,
				  tc_mantic_cierres_cajas.importe
				from
					tc_mantic_cierres
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join
					tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
				inner join
					tc_mantic_empresas on tc_mantic_cajas.id_empresa= tc_mantic_empresas.id_empresa
				where
				  tc_mantic_cierres.id_cierre= {idCierre}
				  and tc_mantic_cierres_cajas.id_tipo_medio_pago= 1
				order by
				  tc_mantic_cierres_cajas.registro
			</select>
			<select id="cierre">
				select
					tc_mantic_cierres.id_cierre as id_key,
					tc_mantic_empresas.id_empresa,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_cajas.clave as caja,
					tc_mantic_cajas.id_caja,
					tc_mantic_cierres_cajas.id_tipo_medio_pago,
					tc_mantic_cierres_cajas.id_cierre_caja,
				  tc_mantic_cierres_cajas.disponible,
				  tc_mantic_cierres_cajas.acumulado,
				  tc_mantic_cierres_cajas.saldo,
				  tc_mantic_cierres_cajas.dia,
				  tc_mantic_cierres_cajas.importe
				from
					tc_mantic_cierres
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join
					tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
				inner join
					tc_mantic_empresas on tc_mantic_cajas.id_empresa= tc_mantic_empresas.id_empresa
				where
				  tc_mantic_empresas.id_empresa= {idEmpresa}
				  and tc_mantic_cajas.id_caja= {idCaja}
				  and tc_mantic_cierres_cajas.id_tipo_medio_pago= 1
				order by
				  tc_mantic_cierres_cajas.registro				
			</select>
			<select id="cierreVigente">
				select
					tc_mantic_cierres.id_cierre as id_key,
					tc_mantic_empresas.id_empresa,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_cajas.clave as caja,
					tc_mantic_cajas.id_caja,
					tc_mantic_cierres_cajas.id_tipo_medio_pago,
					tc_mantic_cierres_cajas.id_cierre_caja,
				  tc_mantic_cierres_cajas.disponible,
				  tc_mantic_cierres_cajas.acumulado,
				  tc_mantic_cierres_cajas.saldo,
				  tc_mantic_cierres_cajas.dia,
				  tc_mantic_cierres_cajas.importe
				from
					tc_mantic_cierres
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join
					tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
				inner join
					tc_mantic_empresas on tc_mantic_cajas.id_empresa= tc_mantic_empresas.id_empresa
				where
				  tc_mantic_empresas.id_empresa= {idEmpresa}
				  and tc_mantic_cajas.id_caja= {idCaja}
					and id_cierre_estatus in ({estatusAbierto})				  
				order by
				  tc_mantic_cierres_cajas.registro				
			</select>
			<select id="alerta">
				select
					tc_mantic_cierres.id_cierre as id_key,
					tc_mantic_empresas.id_empresa,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_cajas.clave as caja,
					tc_mantic_cajas.id_caja,
				  tc_mantic_cierres_alertas.mensaje,
					tc_mantic_cierres_cajas.id_tipo_medio_pago,
					tc_mantic_cierres_cajas.id_cierre_caja,
				  tc_mantic_cierres_cajas.disponible,
				  tc_mantic_cierres_cajas.acumulado,
				  tc_mantic_cierres_cajas.saldo,
				  tc_mantic_cierres_cajas.dia,
				  tc_mantic_cierres_cajas.importe
				from
					tc_mantic_cierres
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join 
					tc_mantic_cierres_alertas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_alertas.id_cierre
				inner join
					tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
				inner join
					tc_mantic_empresas on tc_mantic_cajas.id_empresa= tc_mantic_empresas.id_empresa
				where
				  tc_mantic_empresas.id_empresa= {idEmpresa}
				  and tc_mantic_cajas.id_caja= {idCaja}
				  and tc_mantic_cierres_alertas.id_notifica= 1
				order by
				  tc_mantic_cierres_cajas.registro				
			</select>
      <select id="ambos">
        select      
          sum(if(tc_mantic_cierres_retiros.id_abono= 1, tc_mantic_cierres_retiros.importe, 0)) as abonos,
          sum(if(tc_mantic_cierres_retiros.id_abono= 2, tc_mantic_cierres_retiros.importe, 0)) as retiros
        from      
          tc_mantic_cierres
				inner join
				  tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join
				  tc_mantic_cierres_retiros on tc_mantic_cierres_cajas.id_cierre_caja= tc_mantic_cierres_retiros.id_cierre_caja
        where      
          tc_mantic_cierres.id_cierre = {idCierre}
      </select>
			<select id="importes">
				select
				  tc_mantic_cierres_cajas.id_cierre_caja as id_key,
					tc_mantic_cajas.clave as caja,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_tipos_medios_pagos.nombre as medio_pago,
					tc_mantic_cierres_cajas.*
				from
					tc_mantic_cierres
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join
					tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
				inner join
					tc_mantic_empresas on tc_mantic_cajas.id_empresa= tc_mantic_empresas.id_empresa
				inner join
					tc_mantic_tipos_medios_pagos on tc_mantic_cierres_cajas.id_tipo_medio_pago= tc_mantic_tipos_medios_pagos.id_tipo_medio_pago
				where
				  tc_mantic_cajas.id_caja= {idCaja}
				  and tc_mantic_cierres.id_cierre= {idCierre}
				order by
				  tc_mantic_tipos_medios_pagos.orden				
			</select>
			<select id="fondo">
				select
				  tc_mantic_cierres_cajas.id_cierre_caja as id_key,
					tc_mantic_cajas.clave as caja,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_tipos_medios_pagos.nombre as medio_pago,
					tc_mantic_cierres_cajas.*
				from
					tc_mantic_cierres
				inner join
					tc_mantic_cierres_cajas on tc_mantic_cierres.id_cierre= tc_mantic_cierres_cajas.id_cierre
				inner join
					tc_mantic_cajas on tc_mantic_cierres_cajas.id_caja= tc_mantic_cajas.id_caja
				inner join
					tc_mantic_empresas on tc_mantic_cajas.id_empresa= tc_mantic_empresas.id_empresa
				inner join
					tc_mantic_tipos_medios_pagos on tc_mantic_cierres_cajas.id_tipo_medio_pago= tc_mantic_tipos_medios_pagos.id_tipo_medio_pago
				where
				  tc_mantic_cajas.id_caja= {idCaja}
				  and tc_mantic_cierres.id_cierre= {idCierre}
				  and tc_mantic_cierres_cajas.id_tipo_medio_pago= 1
				order by
				  tc_mantic_tipos_medios_pagos.orden				
			</select>
			<select id="denominacion">
				select 
				  tc_mantic_cierres_monedas.*,
				  tc_mantic_monedas.nombre, 
				  tc_mantic_monedas.denominacion
  			from 
				  tc_mantic_cierres_monedas 
				inner join 
				  tc_mantic_monedas on tc_mantic_cierres_monedas.id_moneda= tc_mantic_monedas.id_moneda 
				where 
				  tc_mantic_cierres_monedas.id_cierre= {idCierre}
				  and tc_mantic_cierres_monedas.id_efectivo= {idEfectivo}
				order by 
				  tc_mantic_monedas.orden
			</select>
		</unit>
		<unit id="VistaCreditosNotasDto">
			<select id="meses">
        select
          tc_janal_meses.id_mes as id_key,
          tc_janal_meses.nombre
        from
          tc_janal_meses 
        where
          tc_janal_meses.id_mes in (
        select      
          distinct(tc_mantic_creditos_archivos.mes)
        from      
          tc_mantic_creditos_archivos
				where
				  tc_mantic_creditos_archivos.ejercicio= {ejercicio}
				)
 				order by
				  tc_janal_meses.id_mes				  
			</select>	
			<select id="facturas">
        select
					tc_mantic_creditos_notas.id_credito_nota as id_key,
					tc_mantic_creditos_archivos.ejercicio,
					tc_mantic_creditos_archivos.mes,
				  tc_janal_meses.nombre,
					tc_mantic_creditos_notas.id_credito_nota,
          tc_mantic_creditos_notas.id_empresa,
					tc_mantic_creditos_notas.consecutivo,
					tc_mantic_empresas.clave as empresa,
				  tc_mantic_tipos_creditos_notas.id_tipo_credito_nota,
				  tc_mantic_tipos_creditos_notas.nombre as tipo,
					tc_mantic_creditos_notas.importe,
					tc_mantic_creditos_notas.registro     
        from
          tc_mantic_creditos_archivos
				inner join
					tc_janal_meses on tc_mantic_creditos_archivos.mes= tc_janal_meses.id_mes          
        inner join
          tc_mantic_creditos_notas on tc_mantic_creditos_archivos.id_credito_nota= tc_mantic_creditos_notas.id_credito_nota
        inner join
          tc_mantic_tipos_creditos_notas on tc_mantic_creditos_notas.id_tipo_credito_nota=tc_mantic_tipos_creditos_notas.id_tipo_credito_nota      
        inner join
          tc_mantic_empresas on tc_mantic_creditos_notas.id_empresa= tc_mantic_empresas.id_empresa         
        where
					tc_mantic_creditos_notas.id_empresa in ({idEmpresa})
					and tc_mantic_creditos_archivos.id_principal= 1
					and {condicion}
				group by
					tc_mantic_creditos_notas.id_credito_nota,
					tc_mantic_creditos_archivos.ejercicio,
					tc_mantic_creditos_archivos.mes,
				  tc_janal_meses.nombre,
					tc_mantic_creditos_notas.id_credito_nota,
          tc_mantic_creditos_notas.id_empresa,
					tc_mantic_creditos_notas.consecutivo,
					tc_mantic_empresas.clave,
				  tc_mantic_tipos_creditos_notas.id_tipo_credito_nota,
				  tc_mantic_tipos_creditos_notas.nombre,
					tc_mantic_creditos_notas.importe,
					tc_mantic_creditos_notas.registro     
				{sortOrder}				
			</select>
			<select id="exportar">
        select
					tc_mantic_creditos_archivos.alias as nombre
        from
          tc_mantic_creditos_archivos
				inner join
					tc_janal_meses on tc_mantic_creditos_archivos.mes= tc_janal_meses.id_mes          
        inner join
          tc_mantic_creditos_notas on tc_mantic_creditos_archivos.id_credito_nota= tc_mantic_creditos_notas.id_credito_nota
        inner join
          tc_mantic_tipos_creditos_notas on tc_mantic_creditos_notas.id_tipo_credito_nota=tc_mantic_tipos_creditos_notas.id_tipo_credito_nota      
        inner join
          tc_mantic_empresas on tc_mantic_creditos_notas.id_empresa= tc_mantic_empresas.id_empresa         
        where
					tc_mantic_creditos_notas.id_empresa in ({idEmpresa})
					and tc_mantic_creditos_archivos.id_principal= 1
					and {condicion}
			</select>
			<select id="total">
				select
					sum(importe) as total
				from (
					select
						tc_mantic_creditos_notas.importe
					from
						tc_mantic_creditos_notas
					inner join
						tc_mantic_notas_entradas on tc_mantic_creditos_notas.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada and tc_mantic_creditos_notas.id_tipo_credito_nota= 2
					where
						tc_mantic_creditos_notas.id_empresa in ({sucursales})
						and tc_mantic_creditos_notas.id_nota_entrada= {idNotaEntrada}
					union
					select
						tc_mantic_creditos_notas.importe
					from
						tc_mantic_creditos_notas
					inner join
						tc_mantic_devoluciones on tc_mantic_creditos_notas.id_devolucion= tc_mantic_devoluciones.id_devolucion and tc_mantic_creditos_notas.id_tipo_credito_nota= 1
					where
						tc_mantic_devoluciones.id_empresa in ({sucursales})
						and tc_mantic_devoluciones.id_nota_entrada= {idNotaEntrada}
				) as tc_matic_importes
			</select>
			<select id="parcial">
				select
					sum(tc_mantic_creditos_notas.importe) as total
				from
					tc_mantic_creditos_notas
				inner join
					tc_mantic_devoluciones on tc_mantic_creditos_notas.id_devolucion= tc_mantic_devoluciones.id_devolucion and tc_mantic_creditos_notas.id_tipo_credito_nota= 1
				where
					tc_mantic_devoluciones.id_empresa in ({sucursales})
					and tc_mantic_devoluciones.id_devolucion= {idDevolucion}				
			</select>
			<select id="movimientos">
				select
					tc_mantic_creditos_bitacora.id_credito_bitacora as id_key,
					tc_mantic_creditos_bitacora.consecutivo,
					tc_mantic_creditos_bitacora.importe,
					tc_mantic_creditos_bitacora.justificacion,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre,
				  tc_mantic_creditos_estatus.nombre as estatus,
					tc_mantic_creditos_bitacora.registro
				from 
					tc_mantic_creditos_bitacora
				inner join
					tc_mantic_creditos_estatus on tc_mantic_creditos_bitacora.id_credito_estatus= tc_mantic_creditos_estatus.id_credito_estatus
				inner join
					tc_janal_usuarios on tc_mantic_creditos_bitacora.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_creditos_bitacora.id_credito_nota= {idCreditoNota}
				order by
					tc_mantic_creditos_bitacora.registro desc				
			</select>	
			<select id="lazy">
        select
					tc_mantic_creditos_notas.id_credito_nota as id_key,
					tc_mantic_creditos_notas.id_credito_nota,
					tc_mantic_creditos_notas.id_devolucion,
					tc_mantic_devoluciones.consecutivo as devolucion,
				  tc_mantic_notas_entradas.id_nota_entrada,
					tc_mantic_notas_entradas.consecutivo as nota_entrada,
          tc_mantic_notas_entradas.id_almacen,
          tc_mantic_notas_entradas.id_empresa,
				  tc_mantic_proveedores.id_proveedor,
					tc_mantic_proveedores.razon_social as proveedor,
					tc_mantic_creditos_notas.consecutivo,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_creditos_notas.folio,
					tc_mantic_creditos_notas.importe,
		  		tc_mantic_creditos_estatus.nombre as estatus,
					tc_mantic_creditos_estatus.id_credito_estatus,
				  tc_mantic_tipos_creditos_notas.id_tipo_credito_nota,
				  tc_mantic_tipos_creditos_notas.nombre,
					tc_mantic_creditos_notas.registro     
        from
          tc_mantic_creditos_notas         
        inner join
          tc_mantic_tipos_creditos_notas on tc_mantic_creditos_notas.id_tipo_credito_nota=tc_mantic_tipos_creditos_notas.id_tipo_credito_nota      
        inner join
          tc_mantic_creditos_estatus on tc_mantic_creditos_notas.id_credito_estatus=tc_mantic_creditos_estatus.id_credito_estatus      
        inner join
          tc_mantic_empresas on tc_mantic_creditos_notas.id_empresa= tc_mantic_empresas.id_empresa         
        left join
          tc_mantic_devoluciones on tc_mantic_creditos_notas.id_devolucion= tc_mantic_devoluciones.id_devolucion
        left join
          tc_mantic_notas_entradas on tc_mantic_creditos_notas.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada
        left join
          tc_mantic_proveedores on tc_mantic_creditos_notas.id_proveedor= tc_mantic_proveedores.id_proveedor
        where
					tc_mantic_creditos_notas.id_empresa in ({idEmpresa})
					and {condicion}
				{sortOrder}
			</select> 
			<select id="devoluciones">
				select
				  tc_mantic_devoluciones.id_devolucion as id_key,
				  tc_mantic_devoluciones.id_devolucion,
				  tc_mantic_devoluciones.consecutivo,
					tc_mantic_proveedores.id_proveedor,
					tc_mantic_proveedores.clave,
					tc_mantic_proveedores.razon_social,
				  tc_mantic_devoluciones.total,
					tc_mantic_devoluciones.id_devolucion_estatus,
				  tc_mantic_devoluciones_estatus.nombre as estatus,
				  tc_mantic_devoluciones.registro,
				  tc_mantic_notas_entradas.id_nota_entrada
				from
				  tc_mantic_devoluciones
				inner join 
					tc_mantic_empresas on tc_mantic_devoluciones.id_empresa = tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_notas_entradas on tc_mantic_devoluciones.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada
				inner join 
					tc_mantic_proveedores on tc_mantic_notas_entradas.id_proveedor= tc_mantic_proveedores.id_proveedor
				inner join 
					tc_mantic_devoluciones_estatus on tc_mantic_devoluciones.id_devolucion_estatus=tc_mantic_devoluciones_estatus.id_devolucion_estatus
				where
				  tc_mantic_empresas.id_empresa in ({sucursales})
				  and tc_mantic_devoluciones.id_devolucion_estatus in (3, 4)
				  and (tc_mantic_devoluciones.id_devolucion= {idDevolucion} or {idDevolucion} is null)
				order by
				  tc_mantic_devoluciones.registro						
			</select>
			<select id="notas">
				select
				  tc_mantic_notas_entradas.id_nota_entrada as id_key,
				  tc_mantic_notas_entradas.consecutivo,
					tc_mantic_proveedores.id_proveedor,
					tc_mantic_proveedores.clave,
					tc_mantic_proveedores.razon_social,
				  tc_mantic_notas_entradas.total,
					tc_mantic_notas_entradas.id_nota_estatus,
				  tc_mantic_notas_estatus.nombre as estatus,
				  tc_mantic_notas_entradas.registro
				from
				  tc_mantic_notas_entradas
				inner join 
					tc_mantic_empresas on tc_mantic_notas_entradas.id_empresa = tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_proveedores on tc_mantic_notas_entradas.id_proveedor= tc_mantic_proveedores.id_proveedor
				inner join 
					tc_mantic_notas_estatus on tc_mantic_notas_entradas.id_nota_estatus=tc_mantic_notas_estatus.id_nota_estatus
				where
				  tc_mantic_empresas.id_empresa in ({sucursales})
				  and tc_mantic_notas_entradas.id_nota_estatus in (3, 5, 6)
				  and (tc_mantic_notas_entradas.id_nota_entrada= {idNotaEntrada} or {idNotaEntrada} is null)
				order by
				  tc_mantic_notas_entradas.registro						
			</select>
			<select id="importados">
				select
					tc_mantic_creditos_archivos.id_credito_archivo as id_key,
					tc_mantic_creditos_archivos.id_credito_nota,
					tc_mantic_creditos_archivos.id_tipo_archivo,
					tc_mantic_tipos_archivos.nombre as tipo,
					tc_mantic_creditos_archivos.nombre,
					tc_mantic_creditos_archivos.alias,
					tc_mantic_creditos_archivos.ruta,
					tc_mantic_creditos_archivos.id_principal,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as usuario,
					tc_mantic_creditos_archivos.observaciones,
					tc_mantic_creditos_archivos.registro
				from
					tc_mantic_creditos_archivos
				inner join
					tc_mantic_tipos_archivos on tc_mantic_creditos_archivos.id_tipo_archivo= tc_mantic_tipos_archivos.id_tipo_archivo
				inner join
					tc_janal_usuarios on tc_mantic_creditos_archivos.id_usuario= tc_janal_usuarios.id_usuario          
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_creditos_archivos.id_credito_nota= {idCreditoNota}
				order by
					tc_mantic_creditos_archivos.id_tipo_archivo, tc_mantic_creditos_archivos.registro desc				
			</select>
			<select id="proveedores">
        select      
					tc_mantic_proveedores.id_proveedor as id_key,
          tc_mantic_proveedores.*,
          tc_mantic_tipos_monedas.nombre as moneda,
          tc_mantic_tipos_monedas.siglas,
          tc_mantic_tipos_monedas.simbolo,
          tc_mantic_tipos_proveedores.nombre as tipo_proveedor,
          tc_mantic_tipos_proveedores.dias,
          tc_mantic_tipos_dias.nombre as tipo_dia
        from      
          tc_mantic_proveedores
        inner join 
          tc_mantic_tipos_monedas on tc_mantic_proveedores.id_tipo_moneda= tc_mantic_tipos_monedas.id_tipo_moneda
        inner join 
          tc_mantic_tipos_proveedores on tc_mantic_proveedores.id_tipo_proveedor= tc_mantic_tipos_proveedores.id_tipo_proveedor
        inner join 
          tc_mantic_tipos_dias on tc_mantic_proveedores.id_tipo_dia= tc_mantic_tipos_dias.id_tipo_dia
        where 
          tc_mantic_proveedores.id_empresa in ({sucursales})
				  and tc_mantic_proveedores.id_proveedor= {idProveedor}
				order by
				  tc_mantic_proveedores.clave
			</select>
		</unit>
		<unit id="VistaVentasDto">
			<select id="movimientos">
				select
					tc_mantic_ventas_bitacora.id_venta_bitacora as id_key,
					tc_mantic_ventas_bitacora.consecutivo,
					tc_mantic_ventas_bitacora.importe,
					tc_mantic_ventas_bitacora.justificacion,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre,
				  tc_mantic_ventas_estatus.nombre as estatus,
					tc_mantic_ventas_bitacora.registro
				from 
					tc_mantic_ventas_bitacora
				inner join
					tc_mantic_ventas_estatus on tc_mantic_ventas_bitacora.id_venta_estatus= tc_mantic_ventas_estatus.id_venta_estatus
				inner join
					tc_janal_usuarios on tc_mantic_ventas_bitacora.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_ventas_bitacora.id_venta= {idVenta}
				order by
					tc_mantic_ventas_bitacora.registro desc				
			</select>	
			<select id="lazy">
        select
					tc_mantic_ventas.id_venta as id_key,
					tc_mantic_ventas.id_empresa,  
				  tc_mantic_empresas.clave as empresa,  
				  tc_mantic_empresas.nombre as nombre_empresa,  
					tc_mantic_ventas.consecutivo,  
					tc_mantic_clientes.id_cliente,  
					tc_mantic_clientes.razon_social as cliente,
					tc_mantic_clientes.limite_credito,
					tc_mantic_almacenes.clave,
					tc_mantic_almacenes.nombre as almacen,
					tc_mantic_ventas.total,
					tc_mantic_ventas.total as precio_total,
				  tc_mantic_ventas_estatus.nombre as estatus,
					tc_mantic_ventas.id_venta_estatus,
					tc_mantic_ventas.registro,
					tc_mantic_ventas_estatus.estatus_asociados, 					
					tc_mantic_personas.cuenta,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre,
					tc_mantic_clientes.id_credito,
          (select saldo from tc_mantic_clientes_deudas where tc_mantic_clientes_deudas.id_venta= tc_mantic_ventas.id_venta) saldo,
          (select limite from tc_mantic_clientes_deudas where tc_mantic_clientes_deudas.id_venta= tc_mantic_ventas.id_venta) limite
				from 
					tc_mantic_ventas
				inner join 
					tc_mantic_clientes on tc_mantic_ventas.id_cliente= tc_mantic_clientes.id_cliente
				inner join 
					tc_mantic_almacenes on tc_mantic_ventas.id_almacen= tc_mantic_almacenes.id_almacen
				inner join 
					tc_mantic_empresas on tc_mantic_ventas.id_empresa= tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_ventas_estatus on tc_mantic_ventas.id_venta_estatus=tc_mantic_ventas_estatus.id_venta_estatus
				inner join 
				  tc_janal_usuarios on tc_mantic_ventas.id_usuario = tc_janal_usuarios.id_usuario
				inner join				
					tc_mantic_personas on tc_mantic_personas.id_persona = tc_janal_usuarios.id_persona				
				where
					tc_mantic_ventas.id_empresa in ({idEmpresa})
					and {condicion}
				{sortOrder}
			</select>
			<select id="lazyVenta">
        select
					tc_mantic_ventas.id_venta as id_key,
					tc_mantic_ventas.id_empresa,  
				  tc_mantic_empresas.clave as empresa,  
				  tc_mantic_empresas.nombre as nombre_empresa,  
					tc_mantic_ventas.consecutivo,  
					tc_mantic_clientes.id_cliente,  
					tc_mantic_clientes.razon_social as cliente,
					tc_mantic_clientes.limite_credito,
					tc_mantic_almacenes.clave,
					tc_mantic_almacenes.nombre as almacen,
					tc_mantic_ventas.total,
					tc_mantic_ventas.total as precio_total,
				  tc_mantic_ventas_estatus.nombre as estatus,
					tc_mantic_ventas.id_venta_estatus,
					tc_mantic_ventas.registro,
					tc_mantic_ventas_estatus.estatus_asociados, 					
					tc_mantic_personas.cuenta,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre,
					tc_mantic_clientes.id_credito
				from 
					tc_mantic_ventas
				inner join 
					tc_mantic_clientes on tc_mantic_ventas.id_cliente= tc_mantic_clientes.id_cliente
				inner join 
					tc_mantic_almacenes on tc_mantic_ventas.id_almacen= tc_mantic_almacenes.id_almacen
				inner join 
					tc_mantic_empresas on tc_mantic_ventas.id_empresa= tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_ventas_estatus on tc_mantic_ventas.id_venta_estatus=tc_mantic_ventas_estatus.id_venta_estatus
				inner join 
				  tc_janal_usuarios on tc_mantic_ventas.id_usuario = tc_janal_usuarios.id_usuario
				inner join				
					tc_mantic_personas on tc_mantic_personas.id_persona = tc_janal_usuarios.id_persona
				where
					tc_mantic_ventas.id_venta= {idVenta}					
			</select>
			<select id="cotizacion">
				select * from (
					select
						tc_mantic_ventas.id_venta as id_key,
						tc_mantic_ventas.id_empresa,  
						tc_mantic_empresas.clave as empresa,  
						tc_mantic_empresas.nombre as nombre_empresa,  
						tc_mantic_ventas.ccotizacion consecutivo,
						tc_mantic_clientes.id_cliente,  
						tc_mantic_clientes.razon_social as cliente,
						tc_mantic_clientes.limite_credito,
						tc_mantic_almacenes.clave,
						tc_mantic_almacenes.nombre as almacen,
						tc_mantic_ventas.total,
						tc_mantic_ventas.total as precio_total,
						tc_mantic_ventas_estatus.nombre as estatus,
						tc_mantic_ventas.id_venta_estatus,
						tc_mantic_ventas.registro,
						tc_mantic_ventas_estatus.estatus_asociados, 					
						tc_mantic_personas.cuenta,
						concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre,
						tc_mantic_clientes.id_credito,
						(select saldo from tc_mantic_clientes_deudas where tc_mantic_clientes_deudas.id_venta= tc_mantic_ventas.id_venta) saldo,
						(select limite from tc_mantic_clientes_deudas where tc_mantic_clientes_deudas.id_venta= tc_mantic_ventas.id_venta) limite
					from 
						tc_mantic_ventas
					inner join 
						tc_mantic_clientes on tc_mantic_ventas.id_cliente= tc_mantic_clientes.id_cliente
					inner join 
						tc_mantic_almacenes on tc_mantic_ventas.id_almacen= tc_mantic_almacenes.id_almacen
					inner join 
						tc_mantic_empresas on tc_mantic_ventas.id_empresa= tc_mantic_empresas.id_empresa
					inner join 
						tc_mantic_ventas_estatus on tc_mantic_ventas.id_venta_estatus=tc_mantic_ventas_estatus.id_venta_estatus
					inner join 
						tc_janal_usuarios on tc_mantic_ventas.id_usuario = tc_janal_usuarios.id_usuario
					inner join				
						tc_mantic_personas on tc_mantic_personas.id_persona = tc_janal_usuarios.id_persona		
					inner join 
						tc_mantic_ventas_detalles on tc_mantic_ventas.id_venta = tc_mantic_ventas_detalles.id_venta
					where
						tc_mantic_ventas.id_empresa in ({idEmpresa})
						and {condicion}) principal
				group by 
					id_key, id_empresa, empresa, nombre_empresa, consecutivo, id_cliente, cliente, limite_credito, clave, almacen, 
				  total, precio_total, estatus, id_venta_estatus, registro, estatus_asociados, cuenta, nombre, id_credito, saldo, limite				
				{sortOrder}
			</select>
			<select id="clientes">
        select
					tc_mantic_clientes.id_cliente as id_key,
					tc_mantic_clientes.clave,  
					tc_mantic_clientes.limite_credito,
					tc_mantic_clientes.razon_social as nombre
				from 
					tc_mantic_ventas
				inner join
					tc_mantic_clientes on tc_mantic_ventas.id_cliente= tc_mantic_clientes.id_cliente       
				where 		
				  tc_mantic_ventas.id_empresa in ({sucursales})
				group by
					tc_mantic_clientes.id_cliente,
					tc_mantic_clientes.clave,  
					tc_mantic_clientes.limite_credito,
					tc_mantic_clientes.razon_social
				order by
				  tc_mantic_clientes.clave
			</select>
			<select id="descuentoGrupoVigente">
				select 
					tc_mantic_articulos.id_articulo as id_key,
					tr_mantic_articulo_grupo_descuento.porcentaje
				from 
					tc_mantic_articulos
				inner join 
					tr_mantic_articulo_grupo_descuento on tc_mantic_articulos.id_articulo = tr_mantic_articulo_grupo_descuento.id_articulo	    
				inner join 
					tc_mantic_grupos on tr_mantic_articulo_grupo_descuento.id_grupo= tc_mantic_grupos.id_grupo
				inner join
					tc_mantic_grupos_clientes on tc_mantic_grupos.id_grupo = tc_mantic_grupos_clientes.id_grupo
				where
					tc_mantic_articulos.id_articulo= {idArticulo}
				and 
					tc_mantic_grupos_clientes.id_cliente= {idCliente}
				and 
					(sysdate() between tr_mantic_articulo_grupo_descuento.vigencia_inicial and tr_mantic_articulo_grupo_descuento.vigencia_final)
				and 
					tc_mantic_articulos.id_empresa= {idEmpresa}
			</select>
		</unit>		
		<unit id="VistaKardexDto">
			<select id="row">
				select
					tc_mantic_articulos.id_articulo as id_key,
					tc_mantic_articulos_codigos.codigo as propio,
					tc_mantic_articulos.nombre,
					tc_mantic_articulos.descripcion,
					tc_mantic_empaques.nombre as empaque,
					tc_mantic_unidades_medidas.nombre as unidad_medida,
					tc_mantic_articulos.cantidad,
					if(tc_mantic_articulos.id_redondear= 1, "Si", 'NO') as redondear,
					tc_mantic_articulos.precio,
					tc_mantic_articulos.precio as value,
					tc_mantic_articulos.iva,
					tc_mantic_articulos.menudeo,
					tc_mantic_articulos.limite_medio_mayoreo,
					tc_mantic_articulos.medio_mayoreo,
					tc_mantic_articulos.mayoreo,
					tc_mantic_articulos.limite_mayoreo,
					tc_mantic_articulos.id_imagen,
					tc_mantic_articulos.stock,
					tc_mantic_articulos.minimo,
					tc_mantic_articulos.maximo,
				  ((tc_mantic_articulos.menudeo* 100/ tc_mantic_articulos.precio)- 100) as utilidad,
					tc_mantic_articulos.sat,
					if(tc_mantic_articulos.id_vigente= 1, "Si", 'NO') as vigente,
					tc_mantic_articulos.fecha,
					tc_mantic_articulos.registro
				from
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo= tc_mantic_articulos_codigos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1
				inner join
					tr_mantic_empaque_unidad_medida	on tc_mantic_articulos.id_empaque_unidad_medida= tr_mantic_empaque_unidad_medida.id_empaque_unidad_medida
				inner join
					tc_mantic_empaques on tr_mantic_empaque_unidad_medida.id_empaque= tc_mantic_empaques.id_empaque
				inner join
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida= tc_mantic_unidades_medidas.id_unidad_medida
				where 
					tc_mantic_articulos.id_articulo= {idArticulo}
				order by
					tc_mantic_articulos.registro
			</select>	
			<select id="historial">
				select
					tc_mantic_articulos_bitacora.id_articulo_bitacora as id_key,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					if(tc_mantic_notas_entradas.consecutivo is null, 'KARDEX', tc_mantic_notas_entradas.consecutivo) as consecutivo,					
				  tc_mantic_articulos_bitacora.*
				from
					tc_mantic_articulos_bitacora
				inner join
					tc_janal_usuarios on tc_mantic_articulos_bitacora.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				left join
					tc_mantic_notas_entradas on tc_mantic_articulos_bitacora.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada
				where
					tc_mantic_articulos_bitacora.id_articulo= {idArticulo}
				  and date_format(tc_mantic_articulos_bitacora.registro, '%Y%m%d')&gt;= '{registro}'
				order by
					tc_mantic_articulos_bitacora.registro desc				
			</select>
			<select id="codigos">
        select      
          tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
          tc_mantic_articulos_codigos.codigo,
          if(tc_mantic_articulos_codigos.id_principal= 1, 'SI', if(tc_mantic_articulos_codigos.id_proveedor is null, 'AUXILIAR', 'NO')) as principal,
          tc_mantic_proveedores.clave,
          tc_mantic_proveedores.prefijo,
          tc_mantic_proveedores.razon_social,
          tc_mantic_articulos_codigos.orden,
				  tc_mantic_articulos_codigos.registro
        from      
          tc_mantic_articulos_codigos
        left join 
          tc_mantic_proveedores on tc_mantic_articulos_codigos.id_proveedor= tc_mantic_proveedores.id_proveedor
        where      
          tc_mantic_articulos_codigos.id_articulo = {idArticulo}
				order by
				  tc_mantic_articulos_codigos.registro				
			</select>
			<select id="almacenes">
        select      
          tc_mantic_almacenes_articulos.id_almacen_articulo as id_key,
				  tc_mantic_almacenes.id_almacen,
          tc_mantic_almacenes.clave,
          tc_mantic_almacenes.nombre,
          tc_mantic_almacenes_articulos.id_articulo,
          tc_mantic_almacenes_articulos.stock,
          tc_mantic_almacenes_articulos.minimo,
          tc_mantic_almacenes_articulos.maximo,
          concat(tc_mantic_almacenes_ubicaciones.piso, '=> ', if(tc_mantic_almacenes_ubicaciones.cuarto is null, '', tc_mantic_almacenes_ubicaciones.cuarto), '=> ', if(tc_mantic_almacenes_ubicaciones.anaquel is null, '', tc_mantic_almacenes_ubicaciones.anaquel), '=> ', if(tc_mantic_almacenes_ubicaciones.charola is null, '', tc_mantic_almacenes_ubicaciones.charola)) as ubicacion,
          tc_mantic_almacenes.registro
				from      
          tc_mantic_almacenes_articulos
        inner join 
          tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
        inner join 
          tc_mantic_almacenes_ubicaciones on tc_mantic_almacenes_articulos.id_almacen_ubicacion= tc_mantic_almacenes_ubicaciones.id_almacen_ubicacion
        where      
          tc_mantic_almacenes_articulos.id_articulo = {idArticulo}
				order by
				  tc_mantic_almacenes.clave				
			</select>
		</unit>
		<unit id="VistaArticulosDto">
			<select id="row">
				select 
				  tc_mantic_articulos.id_articulo as id_key,
				  tc_mantic_articulos.nombre,          
				  tc_mantic_articulos.menudeo,          
				  tc_mantic_articulos.medio_mayoreo,          
				  tc_mantic_articulos.mayoreo,          
				  tc_mantic_articulos.stock,       
				  tc_mantic_articulos.iva,          
				  tc_mantic_articulos.desperdicio          
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				inner join
					tr_mantic_empaque_unidad_medida on tc_mantic_articulos.id_empaque_unidad_medida = tr_mantic_empaque_unidad_medida.id_unidad_medida
				inner join 
					tc_mantic_empaques on tr_mantic_empaque_unidad_medida.id_empaque = tc_mantic_empaques.id_empaque
				inner join 
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida = tc_mantic_unidades_medidas.id_unidad_medida
				where 
					tc_mantic_empresas.id_empresa = {idEmpresa}
				and 
					upper(tc_mantic_articulos_codigos.codigo) like upper('%{codigo}%')
				and 
					upper(tc_mantic_articulos.nombre) like upper('%{nombre}%')				
				group by 
				  tc_mantic_articulos.nombre,          
				  tc_mantic_articulos.menudeo,          
				  tc_mantic_articulos.medio_mayoreo,          
				  tc_mantic_articulos.mayoreo,          
				  tc_mantic_articulos.stock,          
				  tc_mantic_articulos.iva,          
				  tc_mantic_articulos.desperdicio          
				{sortOrder}
			</select>
			<select id="detalle">
				select 
				  tc_mantic_articulos.id_articulo as id_key,
				  tc_mantic_articulos.nombre,          
				  tc_mantic_articulos.menudeo,          
				  tc_mantic_articulos.medio_mayoreo,          
				  tc_mantic_articulos.limite_medio_mayoreo,          
				  tc_mantic_articulos.mayoreo,          
				  tc_mantic_articulos.limite_mayoreo,          
				  tc_mantic_articulos.stock,       
				  tc_mantic_articulos.peso_estimado,       
				  tc_mantic_articulos.precio,       
				  tc_mantic_articulos.iva,          
				  tc_mantic_articulos.desperdicio,
					tc_mantic_articulos_codigos.codigo,
					tc_mantic_unidades_medidas.nombre unidad_medida,
					tc_mantic_empaques.nombre empaque
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				inner join
					tr_mantic_empaque_unidad_medida on tc_mantic_articulos.id_empaque_unidad_medida = tr_mantic_empaque_unidad_medida.id_unidad_medida
				inner join 
					tc_mantic_empaques on tr_mantic_empaque_unidad_medida.id_empaque = tc_mantic_empaques.id_empaque
				inner join 
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida = tc_mantic_unidades_medidas.id_unidad_medida
				where 
					tc_mantic_articulos.id_articulo = {idArticulo}				
			</select>
			<select id="inventario">
				select 
				  tc_mantic_articulos.id_articulo as id_key,
				  tc_mantic_articulos.nombre,          
				  tc_mantic_articulos.menudeo,          
				  tc_mantic_articulos.medio_mayoreo,          
				  tc_mantic_articulos.mayoreo,          
				  tc_mantic_articulos.stock,       
				  tc_mantic_articulos.iva,          
				  tc_mantic_articulos.desperdicio,
					tc_mantic_articulos_codigos.codigo          
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				inner join
					tr_mantic_empaque_unidad_medida on tc_mantic_articulos.id_empaque_unidad_medida = tr_mantic_empaque_unidad_medida.id_unidad_medida
				inner join 
					tc_mantic_empaques on tr_mantic_empaque_unidad_medida.id_empaque = tc_mantic_empaques.id_empaque
				inner join 
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida = tc_mantic_unidades_medidas.id_unidad_medida
				where 
					tc_mantic_empresas.id_empresa = {idEmpresa}
				and 
					(upper(tc_mantic_articulos_codigos.codigo) like upper('%{codigo}%')
				or
					upper(tc_mantic_articulos.nombre) like upper('%{nombre}%'))
				group by 
				  tc_mantic_articulos.nombre,          
				  tc_mantic_articulos.menudeo,          
				  tc_mantic_articulos.medio_mayoreo,          
				  tc_mantic_articulos.mayoreo,          
				  tc_mantic_articulos.stock,          
				  tc_mantic_articulos.iva,          
				  tc_mantic_articulos.desperdicio,
					tc_mantic_articulos_codigos.codigo         
			</select>
		</unit>
		<unit id="VistaEmpaqueUnidadMedidaDto">
			<select id="empaqueUnidadMedida">
				select 
					tr_mantic_empaque_unidad_medida.id_empaque_unidad_medida as id_key,
					tc_mantic_unidades_medidas.nombre,
					tc_mantic_unidades_medidas.clave,
					tc_mantic_unidades_medidas.descripcion,
					tc_mantic_unidades_medidas.proporcion
				from
				  tr_mantic_empaque_unidad_medida
				inner join 
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida = tc_mantic_unidades_medidas.id_unidad_medida
				where 
					id_empaque= {idEmpaque}
			</select>
		</unit>
		<unit id="VistaProveedoresDto">
			<select id="row">
				select 
					tc_mantic_proveedores.id_proveedor as id_key,
					tc_mantic_proveedores.clave,
					tc_mantic_proveedores.rfc,
					tc_mantic_proveedores.razon_social,
					tc_mantic_tipos_proveedores.nombre as tipo_proveedor,
					tc_mantic_proveedores.dias_entrega,
					tc_mantic_tipos_dias.nombre as tipo_dia,
					tc_mantic_proveedores.descuento  
				 from   
					 tc_mantic_proveedores
				 inner join
					 tc_mantic_tipos_proveedores   on  tc_mantic_tipos_proveedores.id_tipo_proveedor= tc_mantic_proveedores.id_tipo_proveedor
				 inner  join
					 tc_mantic_tipos_dias  on tc_mantic_tipos_dias.id_tipo_dia=tc_mantic_proveedores.id_tipo_dia             
				 where
					 tc_mantic_proveedores.razon_social like '%{razonSocial}%'
					and
					 (tc_mantic_proveedores.rfc like '%{rfc}%' or tc_mantic_proveedores.rfc is null)
					and
					 tc_mantic_proveedores.clave like '%{clave}%'
					and 
						tc_mantic_proveedores.id_tipo_proveedor  in ({idTipoProveedor}) 
					and
						tc_mantic_proveedores.id_empresa={idEmpresa}            
					{sortOrder}
			</select>
			<select id="portal">
				select 
					tc_mantic_proveedores.id_proveedor as id_key,
					tc_mantic_proveedores.clave,
					tc_mantic_proveedores.rfc,
					tc_mantic_proveedores.razon_social,
					tc_mantic_tipos_proveedores.nombre as tipo_proveedor,
					tc_mantic_proveedores.dias_entrega,
					tc_mantic_tipos_dias.nombre as tipo_dia,
					tc_mantic_proveedores.descuento  
				 from   
					 tc_mantic_proveedores
				 inner join
					 tc_mantic_tipos_proveedores   on  tc_mantic_tipos_proveedores.id_tipo_proveedor= tc_mantic_proveedores.id_tipo_proveedor
				 inner  join
					 tc_mantic_tipos_dias  on tc_mantic_tipos_dias.id_tipo_dia=tc_mantic_proveedores.id_tipo_dia             
				 where
					 upper(tc_mantic_proveedores.razon_social) like upper('%{codigo}%')
					or
					 (upper(tc_mantic_proveedores.rfc) like upper('%{codigo}%') or upper(tc_mantic_proveedores.rfc is null))
					or
					 upper(tc_mantic_proveedores.clave like '%{codigo}%')
					and
						tc_mantic_proveedores.id_empresa in ({sucursales})
			</select>
			<select id="proveedorCondicionPago">
				select 
						tc_mantic_tipos_pagos.id_tipo_pago,
						tc_mantic_tipos_pagos.id_tipo_pago as id_key,            
						tc_mantic_tipos_pagos.nombre as nombre_pago,
						tc_mantic_tipos_formas_pagos.clave,
						tc_mantic_tipos_formas_pagos.nombre
				from 
					tc_mantic_tipos_pagos
				inner join 
					tc_mantic_tipos_formas_pagos on tc_mantic_tipos_formas_pagos.id_tipo_medio_pago=tc_mantic_tipos_pagos.id_tipo_medio_pago              
			</select>  
			 <select id="direccionProveedor">
				select 
				tc_janal_entidades.id_entidad,tc_janal_municipios.id_municipio,tc_janal_localidades.id_localidad, tc_janal_entidades.id_entidad as id_key
			from 
				tc_janal_entidades 
			inner join
				tc_janal_municipios  on tc_janal_municipios.id_entidad=tc_janal_entidades.id_entidad
			inner join    
				tc_janal_localidades on tc_janal_localidades.id_municipio=tc_janal_municipios.id_municipio
			 inner join
				tc_mantic_domicilios on tc_mantic_domicilios.id_localidad=tc_janal_localidades.id_localidad
			 where 
				tc_mantic_domicilios.id_domicilio={idDomicilio}
			</select>            
		</unit> 
		<unit id="VistaClientesDto"> 
			<select id="row">
				select 
					tc_mantic_clientes.id_cliente as id_key,
					tc_mantic_clientes.clave,
					tc_mantic_clientes.rfc,
					tc_mantic_clientes.razon_social,
					tc_mantic_clientes.limite_credito,
					tc_mantic_clientes.plazo_dias,
					tc_mantic_domicilios.calle,
					tc_mantic_domicilios.numero_exterior,
					tc_mantic_domicilios.asentamiento,
					tc_mantic_domicilios.codigo_postal  
				from
					tc_mantic_clientes 
				left join
					tr_mantic_cliente_domicilio on tr_mantic_cliente_domicilio.id_cliente=tc_mantic_clientes.id_cliente
				left join
					tc_mantic_domicilios on tc_mantic_domicilios.id_domicilio = tr_mantic_cliente_domicilio.id_domicilio
				where   
					tc_mantic_clientes.razon_social like '%{razonSocial}%'
				and
					tc_mantic_clientes.rfc like '%{rfc}%'
				and
					tc_mantic_clientes.clave like '%{clave}%' 
				and
					tc_mantic_clientes.id_empresa={idEmpresa} 
				and 
					(tr_mantic_cliente_domicilio.id_principal={idPrincipal} or tr_mantic_cliente_domicilio.id_principal is null)
				{sortOrder}            
			</select>         
			<select id="findRazonSocial">
				select 
					tc_mantic_clientes.id_cliente as id_key,
					tc_mantic_clientes.clave,
					tc_mantic_clientes.rfc,
					tc_mantic_clientes.razon_social,
					tc_mantic_clientes.limite_credito,
					tc_mantic_clientes.plazo_dias,
					tc_mantic_domicilios.calle,
					tc_mantic_domicilios.numero_exterior,
					tc_mantic_domicilios.asentamiento,
					tc_mantic_domicilios.codigo_postal, 
					tc_mantic_tipos_ventas.nombre tipo_venta,
					tc_mantic_clientes.saldo
				from
					tc_mantic_clientes 
				inner join 
					tc_mantic_tipos_ventas on tc_mantic_clientes.id_tipo_venta = tc_mantic_tipos_ventas.id_tipo_venta
				left join
					tr_mantic_cliente_domicilio  on tr_mantic_cliente_domicilio.id_cliente=tc_mantic_clientes.id_cliente
				left join
					tc_mantic_domicilios on tc_mantic_domicilios.id_domicilio = tr_mantic_cliente_domicilio.id_domicilio
				where   
					{condicion}
				and
					tc_mantic_clientes.id_empresa in ({idEmpresa})
			</select>    
			<select id="clienteDefault">
				select 
					tc_mantic_clientes.id_cliente as id_key,
					tc_mantic_clientes.clave,
					tc_mantic_clientes.rfc,
					tc_mantic_clientes.razon_social,
					tc_mantic_clientes.limite_credito,
					tc_mantic_clientes.plazo_dias,
					tc_mantic_domicilios.calle,
					tc_mantic_domicilios.numero_exterior,
					tc_mantic_domicilios.asentamiento,
					tc_mantic_domicilios.codigo_postal, 
					tc_mantic_tipos_ventas.nombre tipo_venta
				from
					tc_mantic_clientes 
				inner join 
					tc_mantic_tipos_ventas on tc_mantic_clientes.id_tipo_venta = tc_mantic_tipos_ventas.id_tipo_venta
				left join
					tr_mantic_cliente_domicilio  on tr_mantic_cliente_domicilio.id_cliente=tc_mantic_clientes.id_cliente
				left join
					tc_mantic_domicilios on tc_mantic_domicilios.id_domicilio = tr_mantic_cliente_domicilio.id_domicilio
				where   
					tc_mantic_clientes.id_empresa in ({sucursales})
				and 
					tc_mantic_clientes.clave='{clave}'				                       
			</select>    
			<select id="cuentas">
				select
					tc_mantic_clientes_deudas.id_cliente_deuda as id_key,
					tc_mantic_clientes_deudas.id_cliente,
					tc_mantic_ventas.consecutivo,
					tc_mantic_clientes_deudas.importe,
					tc_mantic_clientes_deudas.saldo,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_clientes_deudas.limite,
					tc_mantic_clientes_deudas.registro,
					datediff(tc_mantic_clientes_deudas.limite, now()) as dias,
					tc_mantic_clientes.razon_social,
					tc_mantic_clientes_deudas.id_cliente_estatus,
					tc_mantic_ventas.id_venta
				from
					tc_mantic_clientes_deudas
				inner join
					tc_mantic_ventas on tc_mantic_clientes_deudas.id_venta= tc_mantic_ventas.id_venta
				inner join 
					tc_mantic_clientes on tc_mantic_clientes_deudas.id_cliente = tc_mantic_clientes.id_cliente
				inner join
					tc_janal_usuarios on tc_mantic_clientes_deudas.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_clientes_deudas.id_cliente= {idCliente}
				  and {condicion}
				{sortOrder}								
			</select>		
			<select id="cuentasBusqueda">
				select
					tc_mantic_clientes_deudas.id_cliente_deuda as id_key,
					tc_mantic_clientes_deudas.id_cliente,
					tc_mantic_ventas.consecutivo,
					tc_mantic_clientes_deudas.importe,
					tc_mantic_clientes_deudas.saldo,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_clientes_deudas.limite,
					tc_mantic_clientes_deudas.registro,
					datediff(tc_mantic_clientes_deudas.limite, now()) as dias,
					tc_mantic_clientes.razon_social
				from
					tc_mantic_clientes_deudas
				inner join
					tc_mantic_ventas on tc_mantic_clientes_deudas.id_venta= tc_mantic_ventas.id_venta
				inner join 
					tc_mantic_clientes on tc_mantic_clientes_deudas.id_cliente = tc_mantic_clientes.id_cliente
				inner join
					tc_janal_usuarios on tc_mantic_clientes_deudas.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					{condicion}				
				and 
					(tc_mantic_clientes.razon_social like upper('%{cliente}%') or tc_mantic_clientes.clave like upper('%{cliente}%') or tc_mantic_clientes.rfc like upper('%{cliente}%'))
				and 
					tc_mantic_ventas.id_empresa in ({idEmpresa})
				{sortOrder}						
			</select>		
			<select id="deuda">
				select
					tc_mantic_clientes.id_cliente as id_key,
					tc_mantic_clientes.razon_social,															
					sum(tc_mantic_clientes_deudas.importe) importe,
					sum(tc_mantic_clientes_deudas.saldo) saldo
				from
					tc_mantic_clientes
				inner join 
					tc_mantic_clientes_deudas on tc_mantic_clientes_deudas.id_cliente = tc_mantic_clientes.id_cliente				
				where
					tc_mantic_clientes.id_cliente= {idCliente}
				group by 
					tc_mantic_clientes.id_cliente,
					tc_mantic_clientes.razon_social
			</select>		
			<select id="pagos">
				select
					tc_mantic_clientes_pagos.id_cliente_pago as id_key,
					tc_mantic_ventas.consecutivo,
					tc_mantic_clientes_deudas.importe,
					tc_mantic_clientes_deudas.saldo,
					tc_mantic_clientes_pagos.pago,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_clientes_pagos.registro,
					tc_mantic_clientes_pagos.observaciones
				from
					tc_mantic_clientes_pagos
				inner join
					tc_mantic_clientes_deudas on tc_mantic_clientes_pagos.id_cliente_deuda= tc_mantic_clientes_deudas.id_cliente_deuda
				inner join
					tc_mantic_ventas on tc_mantic_clientes_deudas.id_venta= tc_mantic_ventas.id_venta
				inner join
					tc_janal_usuarios on tc_mantic_clientes_pagos.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_clientes_deudas.id_cliente= {idCliente}
				order by
					tc_mantic_ventas.consecutivo, 
					tc_mantic_clientes_deudas.registro desc						
			</select>
			<select id="pagosDeuda">
				select
					tc_mantic_clientes_pagos.id_cliente_pago as id_key,
					tc_mantic_ventas.consecutivo,
					tc_mantic_clientes_deudas.importe,
					tc_mantic_clientes_deudas.saldo,
					tc_mantic_clientes_pagos.pago,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_clientes_pagos.registro,
					tc_mantic_clientes_pagos.observaciones,
					tc_mantic_tipos_medios_pagos.nombre as tipo_pago
				from
					tc_mantic_clientes_pagos
				inner join
					tc_mantic_clientes_deudas on tc_mantic_clientes_pagos.id_cliente_deuda= tc_mantic_clientes_deudas.id_cliente_deuda
				inner join
					tc_mantic_ventas on tc_mantic_clientes_deudas.id_venta= tc_mantic_ventas.id_venta
				inner join
					tc_janal_usuarios on tc_mantic_clientes_pagos.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				inner join 
					tc_mantic_tipos_medios_pagos on tc_mantic_clientes_pagos.id_tipo_medio_pago = tc_mantic_tipos_medios_pagos.id_tipo_medio_pago
				where
					tc_mantic_clientes_deudas.id_cliente_deuda= {idClienteDeuda}									
				order by
					tc_mantic_ventas.consecutivo, 
					tc_mantic_clientes_deudas.registro desc						
			</select>
			<select id="pagosBusqueda">
				select
					tc_mantic_clientes_pagos.id_cliente_pago as id_key,
					tc_mantic_ventas.consecutivo,
					tc_mantic_clientes_deudas.importe,
					tc_mantic_clientes_deudas.saldo,
					tc_mantic_clientes_pagos.pago,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_clientes_pagos.registro,
					tc_mantic_clientes.razon_social
				from
					tc_mantic_clientes_pagos
				inner join
					tc_mantic_clientes_deudas on tc_mantic_clientes_pagos.id_cliente_deuda= tc_mantic_clientes_deudas.id_cliente_deuda
				inner join 
					tc_mantic_clientes on tc_mantic_clientes_deudas.id_cliente = tc_mantic_clientes.id_cliente
				inner join
					tc_mantic_ventas on tc_mantic_clientes_deudas.id_venta= tc_mantic_ventas.id_venta
				inner join
					tc_janal_usuarios on tc_mantic_clientes_pagos.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					{condicion}				
				and 
					(tc_mantic_clientes.razon_social like upper('%{cliente}%') or tc_mantic_clientes.clave like upper('%{cliente}%') or tc_mantic_clientes.rfc like upper('%{cliente}%'))
				and 
					tc_mantic_ventas.id_empresa in ({idEmpresa})
				order by
					tc_mantic_ventas.consecutivo, 
					tc_mantic_clientes_deudas.registro desc						
			</select>
			<select id="venta">
				select
					tc_mantic_clientes_pagos.id_cliente_pago as id_key,
					tc_mantic_ventas.consecutivo,
					tc_mantic_clientes_deudas.importe,
					tc_mantic_clientes_deudas.saldo,
					tc_mantic_clientes_pagos.pago,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_clientes_pagos.registro
				from
					tc_mantic_clientes_pagos
				inner join
					tc_mantic_clientes_deudas on tc_mantic_clientes_pagos.id_cliente_deuda= tc_mantic_clientes_deudas.id_cliente_deuda
				inner join
					tc_mantic_ventas on tc_mantic_clientes_deudas.id_venta= tc_mantic_ventas.id_venta
				inner join
					tc_janal_usuarios on tc_mantic_clientes_pagos.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_clientes_deudas.id_venta= {idVenta}
				{sortOrder}
			</select>
			<select id="importados">
				select
					tc_mantic_clientes_pagos_archivos.id_cliente_pago_archivo AS id_key,
					tc_mantic_clientes_pagos_archivos.id_cliente_pago,
					tc_mantic_clientes_pagos_archivos.id_tipo_archivo,
					tc_mantic_tipos_archivos.nombre AS tipo,
					tc_mantic_clientes_pagos_archivos.nombre,
					tc_mantic_clientes_pagos_archivos.alias,
					tc_mantic_clientes_pagos_archivos.ruta,
					tc_mantic_clientes_pagos_archivos.id_principal,
					CONCAT(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) AS usuario,
					tc_mantic_clientes_pagos_archivos.observaciones,
					tc_mantic_clientes_pagos_archivos.registro,
					tc_mantic_clientes_pagos.pago
				from
					tc_mantic_clientes_pagos_archivos
				inner join
					tc_mantic_tipos_archivos ON tc_mantic_clientes_pagos_archivos.id_tipo_archivo= tc_mantic_tipos_archivos.id_tipo_archivo
				inner join
					tc_mantic_clientes_pagos ON tc_mantic_clientes_pagos_archivos.id_cliente_pago = tc_mantic_clientes_pagos.id_cliente_pago
				inner join
					tc_janal_usuarios ON tc_mantic_clientes_pagos.id_usuario = tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas ON tc_janal_usuarios.id_persona = tc_mantic_personas.id_persona
				where
					tc_mantic_clientes_pagos.id_cliente_deuda= {idClienteDeuda}
				order by
					tc_mantic_clientes_pagos_archivos.id_tipo_archivo, 
				  tc_mantic_clientes_pagos_archivos.registro desc	
			</select>
			<select id="existsPagos">
        select      
          tc_mantic_clientes_pagos_archivos.*
        from      
          tc_mantic_clientes_pagos_archivos
				inner join
					tc_mantic_clientes_pagos on tc_mantic_clientes_pagos_archivos.id_cliente_pago = tc_mantic_clientes_pagos.id_cliente_pago
        where      
          tc_mantic_clientes_pagos_archivos.id_tipo_archivo = {idTipoArchivo} and tc_mantic_clientes_pagos.id_cliente_deuda= {idClienteDeuda}
				order by
				  tc_mantic_clientes_pagos_archivos.registro desc
      </select>
		</unit>
		<unit id="VistaAlmacenesDto">
			<select id="row">
				select 
				 tc_mantic_almacenes.id_almacen as id_key,
				 tc_mantic_almacenes.clave,
				 tc_mantic_almacenes.nombre,
				 tc_mantic_almacenes.descripcion,
				 tc_mantic_personas.nombres,
				 tc_mantic_personas.paterno,
				 tc_mantic_personas.materno,
				 tc_mantic_domicilios.calle,
				 tc_mantic_domicilios.numero_exterior,
				 tc_mantic_domicilios.asentamiento,
				 tc_mantic_domicilios.codigo_postal,
				 tc_janal_entidades.descripcion as entidad,
				 tc_janal_municipios.descripcion as municipio             
			 from 
				 tc_mantic_almacenes
			 inner join
				 tc_mantic_personas on tc_mantic_personas.id_persona=tc_mantic_almacenes.id_responsable
			 inner join
				 tr_mantic_almacen_domicilio on  tr_mantic_almacen_domicilio.id_almacen= tc_mantic_almacenes.id_almacen
			 inner join
				tc_mantic_domicilios on tc_mantic_domicilios.id_domicilio = tr_mantic_almacen_domicilio.id_domicilio
			 inner join
				 tc_janal_localidades  on tc_mantic_domicilios.id_localidad=tc_janal_localidades.id_localidad
			 inner join 
				 tc_janal_municipios on tc_janal_municipios.id_municipio= tc_janal_localidades.id_municipio
				inner join
					tc_janal_entidades  on tc_janal_municipios.id_entidad=tc_janal_entidades.id_entidad
				 where
					(tc_mantic_almacenes.clave like '%{clave}%' or tc_mantic_almacenes.clave is null)
				 and
					 tc_mantic_almacenes.nombre like '%{nombre}%'
					and 
						(tc_mantic_almacenes.descripcion  like '%{descripcion}%' or  tc_mantic_almacenes.descripcion is null)
					and
						tr_mantic_almacen_domicilio.id_principal={idPrincipal}  
					and
							tc_mantic_almacenes.id_empresa={idEmpresa} 
				 {sortOrder} 
			</select>  
			<select id="almacenesEmpresa">
				select 
				  tc_mantic_almacenes.id_almacen as id_key,
				  tc_mantic_almacenes.clave,
				  tc_mantic_almacenes.nombre,
				  tc_mantic_almacenes.descripcion,
				  tc_mantic_personas.nombres,
				  tc_mantic_personas.paterno,
				  tc_mantic_personas.materno,
				  tc_mantic_domicilios.calle,
				  tc_mantic_domicilios.numero_exterior,
				  tc_mantic_domicilios.asentamiento,
				  tc_mantic_domicilios.codigo_postal,
				  tc_janal_entidades.descripcion as entidad,
				  tc_janal_municipios.descripcion as municipio             
			  from 
				  tc_mantic_almacenes
			  inner join
				  tc_mantic_personas on tc_mantic_personas.id_persona=tc_mantic_almacenes.id_responsable
			  inner join
				  tr_mantic_almacen_domicilio on  tr_mantic_almacen_domicilio.id_almacen= tc_mantic_almacenes.id_almacen
			  inner join
				  tc_mantic_domicilios on tc_mantic_domicilios.id_domicilio = tr_mantic_almacen_domicilio.id_domicilio
			  inner join
				 tc_janal_localidades  on tc_mantic_domicilios.id_localidad=tc_janal_localidades.id_localidad
			  inner join 
				  tc_janal_municipios on tc_janal_municipios.id_municipio= tc_janal_localidades.id_municipio
				inner join
					tc_janal_entidades  on tc_janal_municipios.id_entidad=tc_janal_entidades.id_entidad
				where					
					tc_mantic_almacenes.id_empresa= {idEmpresa} 				
			</select> 
		</unit>
		<unit id="VistaPersonasDto">
			<select id="row">
				select 
				  tc_mantic_personas.id_persona as id_key,
				  tc_mantic_personas.nombres,
				  tc_mantic_personas.paterno,
				  tc_mantic_personas.materno,
				  tc_mantic_personas.rfc,
				  tc_mantic_personas.curp,
				  tc_mantic_personas.fecha_nacimiento,
				  tc_mantic_tipos_personas.nombre as tipo_persona,
				  tc_janal_tipos_sexos.id_tipo_sexo,
		 		  tc_janal_tipos_sexos.nombre as sexo,
				  tc_janal_tipos_sexos.nombre,
				  tc_mantic_personas.cuenta 
				from 
					tc_mantic_personas
				inner join
					tr_mantic_empresa_personal on tc_mantic_personas.id_persona = tr_mantic_empresa_personal.id_persona
				inner join
					tc_mantic_personas_titulos on tc_mantic_personas_titulos.id_persona_titulo =tc_mantic_personas.id_persona_titulo
				inner join
					tc_mantic_tipos_personas  on tc_mantic_personas.id_tipo_persona=tc_mantic_tipos_personas.id_tipo_persona
				inner join
					tc_janal_tipos_sexos  on tc_janal_tipos_sexos.id_tipo_sexo = tc_mantic_personas.id_tipo_sexo
				where 
					(tc_mantic_personas.nombres like '%{nombres}%' 
				or
					tc_mantic_personas.paterno like '%{paterno}%'
				or
					tc_mantic_personas.materno  like '%{materno}%')
				and 
					tc_mantic_personas.rfc  like '%{rfc}%'
				and 
					tc_mantic_personas.id_tipo_sexo in ({idTipoSexo})
				and
					tc_mantic_personas.id_tipo_persona  in ({idTipoPersona})
				and 
					tr_mantic_empresa_personal.id_empresa= {idEmpresa}
				{sortOrder}  
			</select>              
			<select id="tipoPersona">
				select 
					tc_mantic_personas.*,tc_mantic_personas.id_persona as id_key
				from
					tc_mantic_personas
				inner join
					tr_mantic_empresa_personal on tc_mantic_personas.id_persona = tr_mantic_empresa_personal.id_persona
				where 
					tc_mantic_personas.id_tipo_persona= {idTipoPersona}
				and 
					tr_mantic_empresa_personal.id_empresa= {idEmpresa}
				order by
					paterno,materno,nombres
			</select>
    </unit>   
		<unit id="VistaGruposClientesDto">
			<select id="row">
				select      
					tc_mantic_grupos.id_grupo as id_key,
					tc_mantic_grupos.nombre,
					tc_mantic_grupos.registro
				from      
					tc_mantic_grupos
				inner join
					tc_mantic_grupos_clientes on tc_mantic_grupos.id_grupo= tc_mantic_grupos_clientes.id_grupo
				where      
					tc_mantic_grupos.nombre like '%{nombre}%' 
					or tc_mantic_grupos_clientes.id_cliente= {idCliente}
				group by
					tc_mantic_grupos.id_grupo,
					tc_mantic_grupos.nombre,
					tc_mantic_grupos.registro
				order by  
					tc_mantic_grupos.nombre
			</select>
		</unit>
		<unit id="VistaDevolucionesDto">
			<select id="movimientos">
				select
					tc_mantic_devoluciones_bitacora.id_devolucion_bitacora as id_key,
					tc_mantic_devoluciones_bitacora.consecutivo,
					tc_mantic_devoluciones_bitacora.importe,
					tc_mantic_devoluciones_bitacora.justificacion,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre,
				  tc_mantic_devoluciones_estatus.nombre as estatus,
					tc_mantic_devoluciones_bitacora.registro
				from 
					tc_mantic_devoluciones_bitacora
				inner join
					tc_mantic_devoluciones_estatus on tc_mantic_devoluciones_bitacora.id_devolucion_estatus= tc_mantic_devoluciones_estatus.id_devolucion_estatus
				inner join
					tc_janal_usuarios on tc_mantic_devoluciones_bitacora.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_devoluciones_bitacora.id_devolucion= {idDevolucion}
				order by
					tc_mantic_devoluciones_bitacora.registro desc				
			</select>	
			<select id="bitacora">
				select 
					tc_mantic_articulos_bitacora.id_articulo_bitacora as id_key,
					tc_mantic_notas_entradas.consecutivo,
					tc_mantic_articulos_bitacora.id_articulo,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_notas_detalles.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
					tc_mantic_notas_detalles.codigo,
					tc_mantic_notas_detalles.nombre,
					tc_mantic_articulos_bitacora.cantidad,
					tc_mantic_articulos_bitacora.costo,
					tc_mantic_articulos_bitacora.menudeo,
					tc_mantic_articulos_bitacora.medio_mayoreo,
					tc_mantic_articulos_bitacora.mayoreo,
					tc_mantic_articulos_bitacora.registro
				from
					tc_mantic_articulos_bitacora
				inner join
					tc_mantic_notas_entradas on tc_mantic_articulos_bitacora.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada
				inner join
					tc_mantic_notas_detalles on tc_mantic_articulos_bitacora.id_articulo= tc_mantic_notas_detalles.id_articulo and tc_mantic_articulos_bitacora.id_nota_entrada= tc_mantic_notas_detalles.id_nota_entrada
				where 
					tc_mantic_articulos_bitacora.id_nota_entrada= {idNotaEntrada}
				{sortOrder}
			</select>	
			<select id="articulos">
				select 
					tc_mantic_articulos_bitacora.id_articulo_bitacora as id_key,
					tc_mantic_articulos_bitacora.id_articulo,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_notas_detalles.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
					tc_mantic_notas_detalles.codigo,
					tc_mantic_notas_detalles.nombre,
					tc_mantic_articulos.cantidad,
					tc_mantic_articulos.precio as costo,
					tc_mantic_articulos.menudeo,
					tc_mantic_articulos.medio_mayoreo,
					tc_mantic_articulos.mayoreo,
					tc_mantic_notas_detalles.registro
				from
					tc_mantic_articulos_bitacora
				inner join
					tc_mantic_notas_detalles on tc_mantic_articulos_bitacora.id_articulo= tc_mantic_notas_detalles.id_articulo and tc_mantic_articulos_bitacora.id_nota_entrada= tc_mantic_notas_detalles.id_nota_entrada
				inner join
					tc_mantic_articulos on tc_mantic_articulos_bitacora.id_articulo= tc_mantic_articulos.id_articulo
				where 
					tc_mantic_articulos_bitacora.id_nota_entrada= {idNotaEntrada}
				{sortOrder}
			</select>	
			<select id="lazy">
        select
					tc_mantic_devoluciones.id_devolucion as id_key,
					tc_mantic_devoluciones.id_devolucion,
					tc_mantic_devoluciones.id_nota_entrada,
          tc_mantic_notas_entradas.id_almacen,
          tc_mantic_notas_entradas.id_empresa,
          tc_mantic_notas_entradas.id_proveedor,
					tc_mantic_notas_entradas.consecutivo as nota_entrada,
					tc_mantic_devoluciones.consecutivo,
					tc_mantic_empresas.clave as empresa,
          tc_mantic_empresas.nombre as nombre_empresa,
			 	  (select count(*) from tc_mantic_devoluciones_detalles where tc_mantic_devoluciones_detalles.id_devolucion= tc_mantic_devoluciones.id_devolucion) as articulos,
					tc_mantic_devoluciones.total,
		  		tc_mantic_devoluciones_estatus.nombre as estatus,
					tc_mantic_devoluciones_estatus.id_devolucion_estatus,
					tc_mantic_devoluciones.registro     
        from
          tc_mantic_devoluciones         
        inner join
          tc_mantic_devoluciones_estatus on tc_mantic_devoluciones_estatus.id_devolucion_estatus= tc_mantic_devoluciones.id_devolucion_estatus         
        inner join
          tc_mantic_empresas on tc_mantic_devoluciones.id_empresa= tc_mantic_empresas.id_empresa         
        inner join
          tc_mantic_notas_entradas on tc_mantic_devoluciones.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada
        where
					tc_mantic_notas_entradas.id_empresa in ({idEmpresa})
					and {condicion}
				{sortOrder}
			</select>
      <select id="diferencia">
        select      
				  tc_mantic_notas_entradas.id_nota_entrada as id_key,
          tc_mantic_notas_entradas.id_sin_iva as sin_iva, 
					tc_mantic_notas_entradas.tipo_de_cambio, 
					tc_mantic_articulos.nombre, 
					tc_mantic_notas_detalles.sat, 
					tc_mantic_notas_detalles.codigo, 
					tc_mantic_notas_detalles.costo, 
					(tc_mantic_notas_detalles.costo- (tc_mantic_notas_detalles.descuentos/ tc_mantic_notas_detalles.cantidad)) as valor, 
					tc_mantic_notas_detalles.descuento, 
					tc_mantic_notas_detalles.id_nota_entrada, 
					tc_mantic_notas_detalles.extras, 
					tc_mantic_notas_detalles.importe, 
					tc_mantic_notas_entradas.total, 
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
					tc_mantic_notas_detalles.iva, 
					tc_mantic_notas_detalles.impuestos, 
					tc_mantic_notas_detalles.sub_total, 
					0 as cantidad, 
					tc_mantic_notas_detalles.cantidades as solicitados, 
					tc_mantic_notas_detalles.id_nota_detalle as id_orden_detalle, 
					tc_mantic_notas_detalles.id_articulo, 
					tc_mantic_notas_detalles.descuentos, 
					tc_mantic_notas_entradas.id_proveedor, 
					false as ultimo, 
					false as solicitado, 
					0 as stock,
				  tc_mantic_notas_detalles.excedentes
        from      
          tc_mantic_notas_entradas
        inner join      
          tc_mantic_notas_detalles on tc_mantic_notas_entradas.id_nota_entrada= tc_mantic_notas_detalles.id_nota_entrada
        inner join
          tc_mantic_articulos on tc_mantic_notas_detalles.id_articulo= tc_mantic_articulos.id_articulo
        where      
          tc_mantic_notas_entradas.id_nota_entrada = {idNotaEntrada}
				  and tc_mantic_notas_detalles.cantidades&lt;&gt; 0
				order by
				  tc_mantic_notas_detalles.registro		
			</select>
			<select id="notas">
				select
				  tc_mantic_notas_entradas.id_nota_entrada as id_key,
				  tc_mantic_notas_entradas.consecutivo,
					tc_mantic_proveedores.clave,
					tc_mantic_proveedores.razon_social,
				  tc_mantic_notas_entradas.total,
					tc_mantic_notas_entradas.id_nota_estatus,
				  tc_mantic_notas_estatus.nombre as estatus,
				  tc_mantic_notas_entradas.registro
				from
				  tc_mantic_notas_entradas
				inner join 
					tc_mantic_empresas on tc_mantic_notas_entradas.id_empresa = tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_proveedores on tc_mantic_notas_entradas.id_proveedor= tc_mantic_proveedores.id_proveedor
				inner join 
					tc_mantic_notas_estatus on tc_mantic_notas_entradas.id_nota_estatus=tc_mantic_notas_estatus.id_nota_estatus
				where
				  tc_mantic_empresas.id_empresa in ({sucursales})
				  and tc_mantic_notas_entradas.id_nota_estatus in (3, 5)
				  and (tc_mantic_notas_entradas.id_nota_entrada= {idNotaEntrada} or {idNotaEntrada} is null)
				order by
				  tc_mantic_notas_entradas.registro						
			</select>
			<select id="consulta">
				select
					tc_mantic_notas_detalles.id_nota_detalle as id_key,
					tc_mantic_devoluciones.id_devolucion,
					tc_mantic_devoluciones.consecutivo,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_notas_detalles.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
					tc_mantic_notas_detalles.sat,
					tc_mantic_notas_detalles.codigo,
					tc_mantic_notas_detalles.nombre,
					tc_mantic_devoluciones_detalles.cantidad,
					tc_mantic_notas_detalles.costo,
					tc_mantic_notas_detalles.descuento,
					tc_mantic_notas_detalles.extras,
					tc_mantic_notas_detalles.importe,
				  tc_mantic_devoluciones_estatus.nombre as estatus,
				  tc_mantic_devoluciones.id_nota_entrada
				from
					tc_mantic_devoluciones
				inner join
					tc_mantic_devoluciones_detalles on tc_mantic_devoluciones.id_devolucion= tc_mantic_devoluciones_detalles.id_devolucion
				inner join
					tc_mantic_notas_detalles on tc_mantic_devoluciones_detalles.id_nota_detalle= tc_mantic_notas_detalles.id_nota_detalle
				inner join
				  tc_mantic_devoluciones_estatus on tc_mantic_devoluciones.id_devolucion_estatus= tc_mantic_devoluciones_estatus.id_devolucion_estatus
				where  
					tc_mantic_devoluciones.id_nota_entrada= {idNotaEntrada}
				  {condicion}
				{sortOrder}
			</select>
			<select id="confronta">
				select
					tc_mantic_notas_detalles.id_nota_detalle as id_key,
				  tc_mantic_notas_entradas.id_nota_entrada,
				  tc_mantic_notas_entradas.consecutivo,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_notas_detalles.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
					tc_mantic_notas_detalles.codigo,
					tc_mantic_notas_detalles.nombre,
					tc_mantic_notas_detalles.cantidad,
					tc_mantic_notas_detalles.costo,
					tc_mantic_notas_detalles.descuento,
					tc_mantic_notas_detalles.extras,
					tc_mantic_notas_detalles.importe,
					tc_mantic_notas_detalles.cantidades as unidades,
					tc_mantic_notas_detalles.cantidades,
				  tc_mantic_notas_detalles.id_articulo
				from
					tc_mantic_notas_entradas
				inner join
					tc_mantic_notas_detalles on tc_mantic_notas_entradas.id_nota_entrada= tc_mantic_notas_detalles.id_nota_entrada
				where  
					tc_mantic_notas_entradas.id_nota_entrada= {idNotaEntrada}
				{sortOrder}
			</select>	
			<select id="detalle">
        select      
				  tc_mantic_devoluciones_detalles.id_devolucion as id_comodin,
          tc_mantic_devoluciones_detalles.id_devolucion,
          tc_mantic_devoluciones_detalles.id_nota_detalle,
          tc_mantic_notas_detalles.codigo,
          tc_mantic_notas_detalles.sat,
          tc_mantic_notas_detalles.nombre,
          tc_mantic_notas_detalles.costo,
          tc_mantic_notas_detalles.costo as valor,
          tc_mantic_notas_detalles.descuento,
          tc_mantic_notas_detalles.extras,
          tc_mantic_notas_detalles.iva,
          tc_mantic_notas_detalles.sub_total,
          tc_mantic_notas_detalles.importe,
          tc_mantic_notas_detalles.unidad_medida,
          tc_mantic_devoluciones_detalles.cantidad,
          tc_mantic_devoluciones_detalles.registro
        from      
          tc_mantic_devoluciones_detalles
        inner join
          tc_mantic_notas_detalles on tc_mantic_devoluciones_detalles.id_nota_detalle= tc_mantic_notas_detalles.id_nota_detalle
        where      
          tc_mantic_devoluciones_detalles.id_devolucion = {idDevolucion}
				order by
				  tc_mantic_devoluciones_detalles.registro
			</select>	
		</unit>
		<unit id="VistaNotasEntradasDto">
			<select id="surtidores">
				select
					tc_mantic_proveedores.id_proveedor as id_key,
					tc_mantic_proveedores.rfc,
					tc_mantic_proveedores.clave,
					tc_mantic_proveedores.razon_social
				from
					tc_mantic_proveedores
				where
					tc_mantic_proveedores.id_proveedor in (
					select
						distinct(tc_mantic_notas_entradas.id_proveedor) 
					from
						tc_mantic_notas_archivos
					inner join
						tc_mantic_notas_entradas on tc_mantic_notas_archivos.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada
					where
						tc_mantic_notas_archivos.ejercicio= {ejercicio}
						and tc_mantic_notas_archivos.mes= {mes}
				)
				order by
					tc_mantic_proveedores.clave				
			</select>
			<select id="meses">
        select
          tc_janal_meses.id_mes as id_key,
          tc_janal_meses.nombre
        from
          tc_janal_meses 
        where
          tc_janal_meses.id_mes in (
        select      
          distinct(tc_mantic_notas_archivos.mes)
        from      
          tc_mantic_notas_archivos
				where
				  tc_mantic_notas_archivos.ejercicio= {ejercicio}
				)
 				order by
				  tc_janal_meses.id_mes				  
			</select>	
			<select id="facturas">
        select
					tc_mantic_notas_entradas.id_nota_entrada as id_key,
					tc_mantic_notas_archivos.ejercicio,
					tc_mantic_notas_archivos.mes,
				  tc_janal_meses.nombre,
					tc_mantic_notas_entradas.id_nota_entrada,
          tc_mantic_notas_entradas.id_empresa,
					tc_mantic_notas_entradas.consecutivo,
					tc_mantic_empresas.clave as empresa,
					tc_mantic_proveedores.razon_social,
					tc_mantic_notas_entradas.total,
					tc_mantic_notas_entradas.registro     
        from
          tc_mantic_notas_archivos
				inner join
					tc_janal_meses on tc_mantic_notas_archivos.mes= tc_janal_meses.id_mes          
        inner join
          tc_mantic_notas_entradas on tc_mantic_notas_archivos.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada       
        inner join
          tc_mantic_empresas on tc_mantic_notas_entradas.id_empresa= tc_mantic_empresas.id_empresa         
        inner join
          tc_mantic_proveedores on tc_mantic_notas_entradas.id_proveedor= tc_mantic_proveedores.id_proveedor         
        where
					tc_mantic_notas_entradas.id_empresa in ({idEmpresa})
					and tc_mantic_notas_archivos.id_principal= 1
					and {condicion}
				group by
					tc_mantic_notas_entradas.id_nota_entrada,
					tc_mantic_notas_archivos.ejercicio,
					tc_mantic_notas_archivos.mes,
				  tc_janal_meses.nombre,
					tc_mantic_notas_entradas.id_nota_entrada,
          tc_mantic_notas_entradas.id_empresa,
					tc_mantic_notas_entradas.consecutivo,
					tc_mantic_empresas.clave,
					tc_mantic_proveedores.razon_social,
					tc_mantic_notas_entradas.total,
					tc_mantic_notas_entradas.registro     
				{sortOrder}				
			</select>
			<select id="exportar">
        select
					tc_mantic_notas_archivos.alias as nombre
        from
          tc_mantic_notas_archivos
				inner join
					tc_janal_meses on tc_mantic_notas_archivos.mes= tc_janal_meses.id_mes          
        inner join
          tc_mantic_notas_entradas on tc_mantic_notas_archivos.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada       
        inner join
          tc_mantic_empresas on tc_mantic_notas_entradas.id_empresa= tc_mantic_empresas.id_empresa         
        inner join
          tc_mantic_proveedores on tc_mantic_notas_entradas.id_proveedor= tc_mantic_proveedores.id_proveedor         
        where
					tc_mantic_notas_entradas.id_empresa in ({idEmpresa})
					and tc_mantic_notas_archivos.id_principal= 1
					and {condicion}
			</select>
			<select id="movimientos">
				select
					tc_mantic_notas_bitacora.id_nota_bitacora as id_key,
					tc_mantic_notas_bitacora.consecutivo,
					tc_mantic_notas_bitacora.importe,
					tc_mantic_notas_bitacora.justificacion,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre,
				  tc_mantic_notas_estatus.nombre as estatus,
					tc_mantic_notas_bitacora.registro
				from 
					tc_mantic_notas_bitacora
				inner join
					tc_mantic_notas_estatus on tc_mantic_notas_bitacora.id_nota_estatus= tc_mantic_notas_estatus.id_nota_estatus
				inner join
					tc_janal_usuarios on tc_mantic_notas_bitacora.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_notas_bitacora.id_nota_entrada= {idNotaEntrada}
				order by
					tc_mantic_notas_bitacora.registro desc				
			</select>		
			<select id="lazy">
        select
					tc_mantic_notas_entradas.id_nota_entrada as id_key,
					tc_mantic_notas_entradas.id_nota_entrada,
					tc_mantic_ordenes_compras.id_orden_compra,
          tc_mantic_notas_entradas.id_almacen,
          tc_mantic_notas_entradas.id_empresa,
          tc_mantic_proveedores.id_proveedor,
					tc_mantic_ordenes_compras.consecutivo as orden_compra,
					tc_mantic_notas_entradas.consecutivo,
					tc_mantic_empresas.clave as empresa,
					if(tc_mantic_notas_entradas.id_directa= 1, "DIRECTA", "FACTURA") as directa,
					tc_mantic_notas_entradas.id_directa,
					tc_mantic_proveedores.razon_social,
					tc_mantic_notas_entradas.total,
					tc_mantic_notas_estatus.id_nota_estatus,
					tc_mantic_notas_estatus.nombre as estatus,
					tc_mantic_notas_estatus.estatus_asociados,
					tc_mantic_notas_entradas.registro     
        from
          tc_mantic_notas_entradas         
        inner join
          tc_mantic_empresas on tc_mantic_notas_entradas.id_empresa= tc_mantic_empresas.id_empresa         
        inner join
          tc_mantic_proveedores on tc_mantic_notas_entradas.id_proveedor= tc_mantic_proveedores.id_proveedor         
        inner join
          tc_mantic_notas_estatus on tc_mantic_notas_entradas.id_nota_estatus= tc_mantic_notas_estatus.id_nota_estatus      
        left join
          tc_mantic_ordenes_compras on tc_mantic_notas_entradas.id_orden_compra= tc_mantic_ordenes_compras.id_orden_compra     
        where
					tc_mantic_notas_entradas.id_empresa in ({idEmpresa})
					and {condicion}
				{sortOrder}
			</select>
      <select id="incompleto">
				select
					count(*) as total
				from 
					tc_mantic_notas_entradas
				inner join 
					tc_mantic_notas_detalles on tc_mantic_notas_entradas.id_nota_entrada= tc_mantic_notas_detalles.id_nota_entrada
				where
					tc_mantic_notas_entradas.id_nota_entrada= {idNotaEntrada}
					and tc_mantic_notas_entradas.id_orden_compra= {idOrdenCompra}
					and tc_mantic_notas_detalles.id_orden_detalle is null				
			</select>	
      <select id="diferencia">
        select      
          1 as sin_iva, 
					1 as tipo_de_cambio, 
					tc_mantic_articulos.nombre, 
					tc_mantic_ordenes_detalles.codigo, 
				  tc_mantic_articulos.sat,
					0 as costo, 
					(tc_mantic_ordenes_detalles.costo- (tc_mantic_ordenes_detalles.descuentos/ tc_mantic_ordenes_detalles.cantidad)) as valor, 
					"0" as descuento, 
					tc_mantic_ordenes_detalles.id_orden_compra, 
					"0" as extras, 
					tc_mantic_ordenes_detalles.importe, 
					tc_mantic_ordenes_detalles.importes as total, 
					tc_mantic_ordenes_detalles.propio, 
					tc_mantic_ordenes_detalles.iva, 
					tc_mantic_ordenes_detalles.impuestos, 
					tc_mantic_ordenes_detalles.sub_total, 
					0 as cantidad, 
					tc_mantic_ordenes_detalles.cantidades as solicitados, 
					tc_mantic_ordenes_detalles.id_orden_detalle, 
					tc_mantic_ordenes_detalles.id_articulo, 
					tc_mantic_ordenes_detalles.descuentos, 
					tc_mantic_ordenes_compras.id_proveedor, 
					false as ultimo, 
					false as solicitado, 
					0 as stock,
				  0 as excedentes
        from      
          tc_mantic_ordenes_compras
        inner join      
          tc_mantic_ordenes_detalles on tc_mantic_ordenes_compras.id_orden_compra= tc_mantic_ordenes_detalles.id_orden_compra
        inner join
          tc_mantic_articulos on tc_mantic_ordenes_detalles.id_articulo= tc_mantic_articulos.id_articulo
        where      
          tc_mantic_ordenes_compras.id_orden_compra = {idOrdenCompra}
				  and tc_mantic_ordenes_detalles.cantidades&gt; 0
				order by
				  tc_mantic_ordenes_detalles.registro				
      </select>
			<select id="errores">
        select
					sum(tc_mantic_errores.total) as total
				from (    				
					select
					  count(*) as total
					from
					  tc_mantic_ordenes_detalles
					where      
					  tc_mantic_ordenes_detalles.id_orden_compra= {idOrdenCompra}
					  and (
  				    tc_mantic_ordenes_detalles.cantidades&lt;&gt; 0 or 
	  			    (abs(tc_mantic_ordenes_detalles.importes)* 100/ tc_mantic_ordenes_detalles.importe) between 2.1 and 1000000
						)
					union
					  select 
						  count(*) as total
					  from
						  tc_mantic_notas_entradas
					  inner join
						  tc_mantic_notas_detalles on tc_mantic_notas_entradas.id_nota_entrada= tc_mantic_notas_detalles.id_nota_entrada 
					  where
					    tc_mantic_notas_entradas.id_orden_compra= {idOrdenCompra}
						  and id_orden_detalle is null
				) as tc_mantic_errores
			</select>
			<select id="ordenes">
				select
				  tc_mantic_ordenes_compras.id_orden_compra as id_key,
				  tc_mantic_ordenes_compras.consecutivo,
					tc_mantic_proveedores.clave,
					tc_mantic_proveedores.razon_social,
				  tc_mantic_ordenes_compras.total,
					tc_mantic_ordenes_compras.id_orden_estatus,
				  tc_mantic_ordenes_estatus.nombre as estatus,
				  tc_mantic_ordenes_compras.registro
				from
				  tc_mantic_ordenes_compras
				inner join 
					tc_mantic_empresas on tc_mantic_ordenes_compras.id_empresa = tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_proveedores on tc_mantic_ordenes_compras.id_proveedor= tc_mantic_proveedores.id_proveedor
				inner join 
					tc_mantic_ordenes_estatus on tc_mantic_ordenes_compras.id_orden_estatus=tc_mantic_ordenes_estatus.id_orden_estatus
				where
				  tc_mantic_empresas.id_empresa in ({sucursales})
				  and tc_mantic_ordenes_compras.id_orden_estatus in (3,4,5)
				  and (tc_mantic_ordenes_compras.id_orden_compra= {idOrdenCompra} or {idOrdenCompra} is null)
				order by
				  tc_mantic_ordenes_compras.registro			
			</select>
			<select id="importados">
				select
					tc_mantic_notas_archivos.id_nota_archivo as id_key,
					tc_mantic_notas_archivos.id_nota_entrada,
			  	tc_mantic_notas_archivos.id_tipo_archivo,
					tc_mantic_tipos_archivos.nombre as tipo,
					tc_mantic_notas_archivos.nombre,
					tc_mantic_notas_archivos.alias,
					tc_mantic_notas_archivos.ruta,
					tc_mantic_notas_archivos.id_principal,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as usuario,
					tc_mantic_notas_archivos.observaciones,
					tc_mantic_notas_archivos.registro
				from
					tc_mantic_notas_archivos
				inner join
					tc_mantic_tipos_archivos on tc_mantic_notas_archivos.id_tipo_archivo= tc_mantic_tipos_archivos.id_tipo_archivo
				inner join
					tc_janal_usuarios on tc_mantic_notas_archivos.id_usuario= tc_janal_usuarios.id_usuario          
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_notas_archivos.id_nota_entrada= {idNotaEntrada}
				order by
					tc_mantic_notas_archivos.id_tipo_archivo, tc_mantic_notas_archivos.registro desc				
			</select>
		</unit>
		<unit id="VistaOrdenesComprasDto">
			<select id="movimientos">
				select
					tc_mantic_ordenes_bitacora.id_orden_bitacora as id_key,
					tc_mantic_ordenes_bitacora.consecutivo,
					tc_mantic_ordenes_bitacora.importe,
					tc_mantic_ordenes_bitacora.justificacion,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre,
				  tc_mantic_ordenes_estatus.nombre as estatus,
					tc_mantic_ordenes_bitacora.registro
				from 
					tc_mantic_ordenes_bitacora
				inner join
					tc_mantic_ordenes_estatus on tc_mantic_ordenes_bitacora.id_orden_estatus= tc_mantic_ordenes_estatus.id_orden_estatus
				inner join
					tc_janal_usuarios on tc_mantic_ordenes_bitacora.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_ordenes_bitacora.id_orden_compra= {idOrdenCompra}
				order by
					tc_mantic_ordenes_bitacora.registro desc				
			</select>		
			<select id="lazy">
				select
					tc_mantic_ordenes_compras.id_orden_compra as id_key,
					tc_mantic_ordenes_compras.id_empresa,  
          tc_mantic_ordenes_compras.id_almacen,
				  tc_mantic_empresas.clave as empresa,  
					tc_mantic_ordenes_compras.consecutivo,  
					tc_mantic_proveedores.id_proveedor,  
					tc_mantic_proveedores.razon_social as proveedor,
					tc_mantic_ordenes_compras.total,
				  tc_mantic_ordenes_estatus.nombre as estatus,
					tc_mantic_ordenes_compras.id_orden_estatus,
					tc_mantic_ordenes_compras.registro,
					tc_mantic_ordenes_estatus.estatus_asociados
				from 
					tc_mantic_ordenes_compras
				inner join 
					tr_mantic_proveedor_pago on tc_mantic_ordenes_compras.id_proveedor_pago= tr_mantic_proveedor_pago.id_proveedor_pago
				inner join 
					tc_mantic_proveedores on tr_mantic_proveedor_pago.id_proveedor= tc_mantic_proveedores.id_proveedor
				inner join 
					tc_mantic_empresas on tc_mantic_ordenes_compras.id_empresa= tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_ordenes_estatus on tc_mantic_ordenes_compras.id_orden_estatus=tc_mantic_ordenes_estatus.id_orden_estatus
				where
					tc_mantic_ordenes_compras.id_empresa in ({idEmpresa})
					and {condicion}
				{sortOrder}
			</select>
			<select id="solicitado">
        select      
          tc_mantic_ordenes_detalles.id_orden_detalle as id_key,
				  tc_mantic_articulos.nombre,     
				  tc_mantic_ordenes_compras.consecutivo,
          tc_mantic_ordenes_detalles.cantidad,
          tc_mantic_ordenes_detalles.costo/tc_mantic_ordenes_compras.tipo_de_cambio as costo,
          tc_mantic_proveedores.rfc,
          tc_mantic_proveedores.prefijo,
          tc_mantic_proveedores.razon_social,
          tc_mantic_tipos_monedas.nombre as moneda,
          tc_mantic_ordenes_detalles.registro
        from      
          tc_mantic_ordenes_detalles
				inner join
					tc_mantic_articulos on tc_mantic_ordenes_detalles.id_articulo = tc_mantic_articulos.id_articulo
				inner join 
					tc_mantic_ordenes_compras on tc_mantic_ordenes_detalles.id_orden_compra= tc_mantic_ordenes_compras.id_orden_compra
				inner join
					tc_mantic_proveedores on tc_mantic_ordenes_compras.id_proveedor= tc_mantic_proveedores.id_proveedor       
        inner join 
          tc_mantic_tipos_monedas on tc_mantic_proveedores.id_tipo_moneda= tc_mantic_tipos_monedas.id_tipo_moneda
        where      
          tc_mantic_ordenes_detalles.id_articulo = {idArticulo}
          and tc_mantic_ordenes_compras.id_orden_estatus in (3,4,5)
        order by
          tc_mantic_ordenes_detalles.registro desc				
			</select>
			<select id="almacen">
				select
					tc_mantic_articulos.id_articulo as id_key,
					tc_mantic_articulos_codigos.codigo as propio,
					tc_mantic_articulos.nombre,
					tc_mantic_articulos.precio as costo,
					'0.00' as descuento,
					-1 as id_orden_compra,
					'0.00' as extras,
					tc_mantic_articulos.precio as importe,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= {idProveedor}) as codigo,
					tc_mantic_articulos.iva,
					0.0 as total_impuesto,
					0.0 as sub_total,
					tc_mantic_almacenes_articulos.maximo- tc_mantic_almacenes_articulos.stock as cantidad,
					-1 as id_orden_detalle,
					tc_mantic_articulos.id_articulo,
					0.0 as descuentos,
					-1 as id_proveedor,
					tc_mantic_almacenes_articulos.stock,
					tc_mantic_almacenes_articulos.minimo,
					tc_mantic_almacenes_articulos.maximo
				from
					tc_mantic_articulos
				inner join
					tc_mantic_almacenes_articulos on tc_mantic_articulos.id_articulo= tc_mantic_almacenes_articulos.id_articulo
				inner join
					tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo= tc_mantic_articulos_codigos.id_articulo
				where 
					tc_mantic_almacenes.id_empresa in ({sucursales})
					and tc_mantic_almacenes.id_almacen= {idAlmacen}
					and tc_mantic_almacenes_articulos.stock &lt;= tc_mantic_almacenes_articulos.minimo
					and tc_mantic_articulos_codigos.id_principal= 1
				order by
					tc_mantic_articulos.nombre
			</select>
			<select id="proveedor">
				select
					tc_mantic_articulos.id_articulo as id_key,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
					tc_mantic_articulos.nombre,
					tc_mantic_articulos.precio as costo,
					'0.00' as descuento,
					-1 as id_orden_compra,
					'0.00' as extras,
					tc_mantic_articulos.precio as importe,
					tc_mantic_articulos_codigos.codigo,
					tc_mantic_articulos.iva,
					0.0 as total_impuesto,
					0.0 as sub_total,
					tc_mantic_almacenes_articulos.maximo- tc_mantic_almacenes_articulos.stock as cantidad,
					-1 as id_orden_detalle,
					tc_mantic_articulos.id_articulo,
					0.0 as descuentos,
					tc_mantic_proveedores.id_proveedor,
					tc_mantic_almacenes_articulos.stock,
					tc_mantic_almacenes_articulos.minimo,
					tc_mantic_almacenes_articulos.maximo
				from
					tc_mantic_articulos
				inner join
					tc_mantic_almacenes_articulos on tc_mantic_articulos.id_articulo= tc_mantic_almacenes_articulos.id_articulo
				inner join
					tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo= tc_mantic_articulos_codigos.id_articulo
				inner join
					tc_mantic_proveedores on tc_mantic_articulos_codigos.id_proveedor= tc_mantic_proveedores.id_proveedor
				where 
					tc_mantic_almacenes.id_empresa in ({sucursales})
					and tc_mantic_almacenes.id_almacen= {idAlmacen}
					and tc_mantic_almacenes_articulos.stock&lt;= tc_mantic_almacenes_articulos.minimo
					and tc_mantic_proveedores.id_proveedor= {idProveedor}
				order by
					tc_mantic_articulos.nombre				
			</select>
			<select id="faltantes">
				select
					tc_mantic_articulos.id_articulo as id_key,
					tc_mantic_articulos.id_articulo,
					tc_mantic_articulos_codigos.codigo as propio,
					tc_mantic_articulos.nombre,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= {idProveedor}) as codigo,
					tc_mantic_articulos.iva,
					tc_mantic_articulos.precio as costo,
					tc_mantic_articulos.precio,
					ifnull(tc_mantic_ordenes_compras.id_orden_estatus, 0) as id_orden_estatus,
					tc_mantic_ordenes_estatus.nombre as estatus,
					tc_mantic_almacenes_articulos.maximo- tc_mantic_almacenes_articulos.stock as cantidad,
					tc_mantic_almacenes_articulos.stock,
					tc_mantic_almacenes_articulos.minimo,
					tc_mantic_almacenes_articulos.maximo
				from
					tc_mantic_articulos
				inner join
					tc_mantic_almacenes_articulos on tc_mantic_articulos.id_articulo= tc_mantic_almacenes_articulos.id_articulo
				inner join
					tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo= tc_mantic_articulos_codigos.id_articulo
				left join	
					tc_mantic_ordenes_detalles on tc_mantic_articulos.id_articulo= tc_mantic_ordenes_detalles.id_articulo
				left join 
					tc_mantic_ordenes_compras on tc_mantic_ordenes_detalles.id_orden_compra= tc_mantic_ordenes_compras.id_orden_compra
				left join
					tc_mantic_ordenes_estatus on tc_mantic_ordenes_estatus.id_orden_estatus= tc_mantic_ordenes_compras.id_orden_estatus
				where 
					tc_mantic_almacenes.id_empresa in ({sucursales})
					and tc_mantic_almacenes.id_almacen= {idAlmacen}
					and tc_mantic_almacenes_articulos.stock &lt;= tc_mantic_almacenes_articulos.minimo
					and tc_mantic_articulos_codigos.id_principal= 1
          and (tc_mantic_ordenes_compras.id_orden_estatus in (3,4,5) or tc_mantic_ordenes_compras.id_orden_estatus is null)
				order by
					tc_mantic_articulos.nombre
			</select>			
			<select id="ultimo">
        select      
          tc_mantic_ordenes_detalles.id_orden_detalle as id_key,
				  tc_mantic_articulos.nombre,
				  tc_mantic_ordenes_compras.consecutivo,
          tc_mantic_ordenes_detalles.costo/tc_mantic_ordenes_compras.tipo_de_cambio	as costo,
          tc_mantic_articulos.stock,
          tc_mantic_proveedores.razon_social,
          tc_mantic_tipos_monedas.nombre as moneda,
          tc_mantic_ordenes_detalles.registro
        from      
          tc_mantic_ordenes_detalles
				inner join
					tc_mantic_articulos on tc_mantic_ordenes_detalles.id_articulo = tc_mantic_articulos.id_articulo
				inner join 
					tc_mantic_ordenes_compras on tc_mantic_ordenes_detalles.id_orden_compra= tc_mantic_ordenes_compras.id_orden_compra
				inner join
						tc_mantic_proveedores on tc_mantic_ordenes_compras.id_proveedor= tc_mantic_proveedores.id_proveedor       
        inner join 
          tc_mantic_tipos_monedas on tc_mantic_proveedores.id_tipo_moneda= tc_mantic_tipos_monedas.id_tipo_moneda
        where      
          tc_mantic_ordenes_detalles.id_articulo =  {idArticulo}
          and tc_mantic_ordenes_compras.id_orden_estatus in (6)
        order by
          tc_mantic_ordenes_detalles.registro desc				
			</select>
			<select id="sugerido">
        select      
          tr_mantic_articulo_precio_sugerido.id_articulo_precio_sugerido as id_key,   
				  tc_mantic_articulos.nombre,     
          tc_mantic_proveedores.clave as clave_proveedor,
          tc_mantic_proveedores.razon_social as proveedor,
          tr_mantic_articulo_precio_sugerido.precio,
          tr_mantic_articulo_precio_sugerido.descuento,
          tr_mantic_articulo_precio_sugerido.observaciones,
          tr_mantic_articulo_precio_sugerido.id_leido
        from      
          tr_mantic_articulo_precio_sugerido
				inner join
					tc_mantic_articulos on tr_mantic_articulo_precio_sugerido.id_articulo = tc_mantic_articulos.id_articulo
				inner join 
					tc_mantic_proveedores on tr_mantic_articulo_precio_sugerido.id_proveedor= tc_mantic_proveedores.id_proveedor
        where      
          tr_mantic_articulo_precio_sugerido.id_articulo = {idArticulo} and tr_mantic_articulo_precio_sugerido.id_leido= 2
				order by
				  tr_mantic_articulo_precio_sugerido.registro				
			</select>
			<select id="articulo">
        select 
          tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
				  tc_mantic_articulos.id_articulo,
				  tc_mantic_articulos_codigos.codigo,
				  tc_mantic_articulos_codigos.id_principal,
				  tc_mantic_articulos_codigos.id_proveedor
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and (
				    (tc_mantic_articulos.id_articulo= {idArticulo} and tc_mantic_articulos_codigos.id_principal= 1)
				    or
				    (tc_mantic_articulos.id_articulo= {idArticulo} and tc_mantic_articulos_codigos.id_proveedor= {idProveedor})	
				   ) 			
				order by 
				  tc_mantic_articulos_codigos.id_articulo,
				  tc_mantic_articulos_codigos.id_principal
			</select>
			<select id="codigos">
				select 
				  tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
				  tc_mantic_articulos.id_articulo,
				  tc_mantic_articulos_codigos.codigo as propio,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= 1) as codigo,
				  tc_mantic_articulos_codigos.id_principal,
				  tc_mantic_articulos_codigos.id_proveedor,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and (
				      upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%'
				    or 
				      upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*'
				    or
				      (upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%' and tc_mantic_articulos_codigos.id_proveedor= {idProveedor})	
				    or
				      tc_mantic_articulos.id_articulo= {idArticulo}
				   ) 			
				order by 
				  tc_mantic_articulos.nombre
			</select>			
			<select id="porNombre">
				select 
				  tc_mantic_articulos.id_articulo as id_key,
				  tc_mantic_articulos.id_articulo,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.menudeo,
				  tc_mantic_articulos.medio_mayoreo,
				  tc_mantic_articulos.mayoreo,
				  tc_mantic_articulos.limite_medio_mayoreo,
				  tc_mantic_articulos.limite_mayoreo,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear,
				  tc_mantic_unidades_medidas.nombre unidad_medida
				from 
					tc_mantic_articulos
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				left join
				  tr_mantic_articulo_presentacion on tc_mantic_articulos.id_articulo= tr_mantic_articulo_presentacion.id_articulo
				left join
				  tr_mantic_empaque_unidad_medida on tr_mantic_articulo_presentacion.id_empaque_unidad_medida= tr_mantic_empaque_unidad_medida.id_empaque_unidad_medida
        left join 
          tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida= tc_mantic_unidades_medidas.id_unidad_medida
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and 
				  (
				    upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*'
				  or
				    tc_mantic_articulos.id_articulo= {idArticulo}
				  ) 			
				order by 
				  tc_mantic_articulos.nombre				
			</select>
			<select id="porCodigo">
				select 
				  tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
				  tc_mantic_articulos.id_articulo,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.menudeo,
				  tc_mantic_articulos.medio_mayoreo,
				  tc_mantic_articulos.mayoreo,
				  tc_mantic_articulos.limite_medio_mayoreo,
				  tc_mantic_articulos.limite_mayoreo,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear,
				  tc_mantic_unidades_medidas.nombre unidad_medida
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				left join
				  tr_mantic_articulo_presentacion on tc_mantic_articulos.id_articulo= tr_mantic_articulo_presentacion.id_articulo
				left join
				  tr_mantic_empaque_unidad_medida on tr_mantic_articulo_presentacion.id_empaque_unidad_medida= tr_mantic_empaque_unidad_medida.id_empaque_unidad_medida
        left join 
          tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida= tc_mantic_unidades_medidas.id_unidad_medida
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and (
				      upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%'
				    or
				      tc_mantic_articulos.id_articulo= {idArticulo}
				   ) 			
				order by 
				  tc_mantic_articulos_codigos.codigo
			</select>
			<select id="proveedores">
        select
					tc_mantic_proveedores.id_proveedor as id_key,
					tc_mantic_proveedores.clave,  
					tc_mantic_proveedores.razon_social as nombre,
					tc_mantic_proveedores.dias_entrega
				from 
					tc_mantic_ordenes_compras
				inner join
						tr_mantic_proveedor_pago on tc_mantic_ordenes_compras.id_proveedor_pago= tr_mantic_proveedor_pago.id_proveedor_pago
				inner join
						tc_mantic_proveedores on tr_mantic_proveedor_pago.id_proveedor= tc_mantic_proveedores.id_proveedor       
				where 		
				  tc_mantic_ordenes_compras.id_empresa in ({sucursales})
				group by
          tc_mantic_proveedores.id_proveedor,
					tc_mantic_proveedores.clave,  
					tc_mantic_proveedores.razon_social,
					tc_mantic_proveedores.dias_entrega			
				order by
				  tc_mantic_proveedores.clave
			</select>
			<select id="condiciones">
        select      
				  tr_mantic_proveedor_pago.id_proveedor_pago as id_key,
          tr_mantic_proveedor_pago.id_proveedor,
          tr_mantic_proveedor_pago.clave,
          tr_mantic_proveedor_pago.descuento,
          tr_mantic_proveedor_pago.id_tipo_pago,
          tc_mantic_tipos_pagos.nombre,
          tr_mantic_proveedor_pago.observaciones
        from      
          tr_mantic_proveedor_pago
        inner join 
          tc_mantic_tipos_pagos on tr_mantic_proveedor_pago.id_tipo_pago= tc_mantic_tipos_pagos.id_tipo_pago
        where      
          tr_mantic_proveedor_pago.id_proveedor = {idProveedor}
				order by
				  tr_mantic_proveedor_pago.clave				
			</select>	
			<select id="moneda">
        select      
					tc_mantic_proveedores.id_proveedor as id_key,
          tc_mantic_proveedores.*,
          tc_mantic_tipos_monedas.nombre as moneda,
          tc_mantic_tipos_monedas.siglas,
          tc_mantic_tipos_monedas.simbolo,
          tc_mantic_tipos_proveedores.nombre as tipo_proveedor,
          tc_mantic_tipos_proveedores.dias,
          tc_mantic_tipos_dias.nombre as tipo_dia
        from      
          tc_mantic_proveedores
        inner join 
          tc_mantic_tipos_monedas on tc_mantic_proveedores.id_tipo_moneda= tc_mantic_tipos_monedas.id_tipo_moneda
        inner join 
          tc_mantic_tipos_proveedores on tc_mantic_proveedores.id_tipo_proveedor= tc_mantic_tipos_proveedores.id_tipo_proveedor
        inner join 
          tc_mantic_tipos_dias on tc_mantic_proveedores.id_tipo_dia= tc_mantic_tipos_dias.id_tipo_dia
        where 
          tc_mantic_proveedores.id_empresa in ({sucursales})
				order by
				  tc_mantic_proveedores.clave
			</select>
		  <select id="consulta">
				select
					tc_mantic_notas_detalles.id_nota_detalle as id_key,
					tc_mantic_notas_entradas.consecutivo,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_notas_detalles.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
					tc_mantic_notas_detalles.sat,
					tc_mantic_notas_detalles.codigo,
					tc_mantic_notas_detalles.nombre,
					tc_mantic_notas_detalles.cantidad,
					tc_mantic_notas_detalles.extras,
					tc_mantic_notas_detalles.cantidades,
					tc_mantic_notas_detalles.costo,
					tc_mantic_notas_detalles.descuento,
					tc_mantic_notas_detalles.importe,
				  if(tc_mantic_notas_detalles.id_orden_detalle is null, '*', '') as nuevo,
				  tc_mantic_notas_estatus.nombre as estatus,
				  tc_mantic_notas_estatus.id_nota_estatus,
				  tc_mantic_notas_entradas.id_nota_entrada,
				  tc_mantic_notas_entradas.id_orden_compra,
				  if(tc_mantic_ordenes_detalles.costo is null, 0, tc_mantic_ordenes_detalles.costo) as valor,
				  if(tc_mantic_ordenes_detalles.costo is null, tc_mantic_notas_detalles.costo, tc_mantic_ordenes_detalles.costo- tc_mantic_notas_detalles.costo) as temporal,				
				  tc_mantic_notas_detalles.id_aplicar,
					tc_mantic_notas_detalles.id_articulo
				from
					tc_mantic_notas_entradas
				inner join
					tc_mantic_notas_detalles on tc_mantic_notas_entradas.id_nota_entrada= tc_mantic_notas_detalles.id_nota_entrada
				inner join
				  tc_mantic_notas_estatus on tc_mantic_notas_entradas.id_nota_estatus= tc_mantic_notas_estatus.id_nota_estatus
				left join
				  tc_mantic_ordenes_detalles on tc_mantic_notas_detalles.id_orden_detalle= tc_mantic_ordenes_detalles.id_orden_detalle
				where  
					tc_mantic_notas_entradas.id_orden_compra= {idOrdenCompra}
				  {condicion}
				{sortOrder}
			</select>
			<select id="confronta">
				select
					tc_mantic_ordenes_detalles.id_orden_detalle as id_key,
				  tc_mantic_ordenes_compras.consecutivo,
					tc_mantic_ordenes_detalles.propio,
					tc_mantic_ordenes_detalles.codigo,
					tc_mantic_ordenes_detalles.nombre,
					tc_mantic_ordenes_detalles.cantidad,
					tc_mantic_ordenes_detalles.costo,
					tc_mantic_ordenes_detalles.descuento,
					tc_mantic_ordenes_detalles.extras,
					tc_mantic_ordenes_detalles.importe,
					tc_mantic_ordenes_detalles.cantidades,
					tc_mantic_ordenes_detalles.cantidades as unidades,
					tc_mantic_ordenes_detalles.importes,
					tc_mantic_ordenes_detalles.importes as valores,
				  (abs(tc_mantic_ordenes_detalles.importes)* 100/ tc_mantic_ordenes_detalles.importe) as porcentaje,
				  tc_mantic_ordenes_compras.id_orden_compra,
					tc_mantic_ordenes_detalles.id_articulo
				from
					tc_mantic_ordenes_compras
				inner join
					tc_mantic_ordenes_detalles on tc_mantic_ordenes_compras.id_orden_compra= tc_mantic_ordenes_detalles.id_orden_compra
				where  
					tc_mantic_ordenes_detalles.id_orden_compra= {idOrdenCompra}
				{sortOrder}
			</select>
			<select id="registrados">
        select      
          tc_mantic_faltantes.id_faltante as id_key,
          tc_mantic_articulos_codigos.codigo,
          tc_mantic_articulos_codigos.codigo as propio,
				  tc_mantic_articulos.id_articulo,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.iva,
          tc_mantic_faltantes.cantidad,
          concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as usuario,
				  tc_mantic_faltantes.registro
        from      
          tc_mantic_faltantes
        inner join
          tc_mantic_articulos on tc_mantic_faltantes.id_articulo= tc_mantic_articulos.id_articulo
        inner join
					tc_janal_usuarios on tc_mantic_faltantes.id_usuario= tc_janal_usuarios.id_usuario          
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
        left join
          tc_mantic_articulos_codigos on tc_mantic_faltantes.id_articulo= tc_mantic_articulos_codigos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1
				where 
				  tc_mantic_faltantes.id_vigente= 1
				order by
				   tc_mantic_articulos.nombre
			</select>
		</unit>
		<unit id="VistaDomiciliosCatalogosDto">
			<select id="domicilios">
				select 
          tc_mantic_domicilios.id_domicilio as id_key,
          tc_mantic_domicilios.*,
          concat(tc_janal_entidades.descripcion,' , ',calle,' ',numero_exterior,' ',asentamiento) as domicilio,          
          tc_janal_localidades.clave as clave_localidad,
          tc_janal_localidades.descripcion as localidad,
          tc_janal_municipios.id_municipio,
          tc_janal_municipios.clave as clave_municipio,
          tc_janal_municipios.descripcion as municipio,
          tc_janal_entidades.id_entidad,
          tc_janal_entidades.clave as clave_entidad,
          tc_janal_entidades.descripcion as entidad
        from 
          tc_mantic_domicilios
        inner join 
          tc_janal_localidades on tc_mantic_domicilios.id_localidad = tc_janal_localidades.id_localidad
        inner join
          tc_janal_municipios on tc_janal_localidades.id_municipio = tc_janal_municipios.id_municipio
        inner join 
          tc_janal_entidades on tc_janal_municipios.id_entidad = tc_janal_entidades.id_entidad
        where 
          {condicion}
        order by 
          tc_janal_entidades.clave,
          tc_janal_municipios.clave,
          tc_janal_localidades.clave,
          tc_mantic_domicilios.codigo_postal
			</select>
		</unit>
		<unit id="VistaArticulosAlmacenDto">
			<select id="articulos">
				select 
				  tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
				  tc_mantic_articulos.id_articulo,
				  tc_mantic_articulos_codigos.codigo as propio,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= 1) as codigo,
				  tc_mantic_articulos_codigos.id_principal,
				  tc_mantic_articulos_codigos.id_proveedor,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and (
				    (upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%' and tc_mantic_articulos_codigos.id_principal= 1)
				    or 
				    upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*'
				    or
				    upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%' 
				   ) 			
				order by 
				  tc_mantic_articulos.nombre
			</select>
			<select id="findArticulo">
				select 
					*
				from (
					select 				  
						tc_mantic_articulos.id_articulo as id_key,				  
						(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= 1) as codigo,				  
						tc_mantic_articulos.nombre				  
					from 
						tc_mantic_articulos
					inner join
						tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
					inner join 
						tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
					where 
						tc_mantic_empresas.id_empresa in ({sucursales})
						and (
							(upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%' and tc_mantic_articulos_codigos.id_principal= 1)
							or 
							upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*'
							or
							upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%' 
						 ) 		
					order by 
						tc_mantic_articulos.nombre) principal
				group by 
					id_key, codigo, nombre
			</select>
		</unit>
		<unit id="VistaPortalProveedoresDto">
			<select id="banca">
				select 
					tc_mantic_proveedores_bancos.id_proveedor_banca as id_key,
					tc_mantic_proveedores_bancos.convenio_cuenta,
					tc_mantic_proveedores_bancos.clabe_referencia,
					tc_mantic_bancos.nombre
				 from 
					 tc_mantic_proveedores_bancos
				 inner join
					 tc_mantic_bancos on tc_mantic_proveedores_bancos.id_banco = tc_mantic_bancos.id_banco
				 where 
					 tc_mantic_proveedores_bancos.id_proveedor = {idProveedor}
					and 
					 tc_mantic_proveedores_bancos.id_tipo_cuenta= {idTipoCuenta}
			</select>
		</unit>
		<unit id="VistaEmpresasDto">
			<select id="row">
				select 
					tc_mantic_empresas.id_empresa as id_key,
					tc_mantic_empresas.id_tipo_empresa,
					tc_mantic_empresas.clave, 
					tc_mantic_empresas.nombre,
					tc_mantic_empresas.titulo,
					tc_mantic_tipos_empresas.nombre tipo 
				from 
					tc_mantic_empresas
				inner join 
					tc_mantic_tipos_empresas on tc_mantic_tipos_empresas.id_tipo_empresa = tc_mantic_empresas.id_tipo_empresa
				where 
					upper(tc_mantic_empresas.clave) like upper('%{clave}%')
				and 
					upper(tc_mantic_empresas.nombre) like upper('%{nombre}%')
				and
					upper(tc_mantic_empresas.titulo) like upper('%{titulo}%')
				and 
					tc_mantic_tipos_empresas.id_tipo_empresa in ({tipoEmpresa}) 					
				{sortOrder}
			</select>
			<select id="cuentasBusqueda">
				select
					tc_mantic_empresas_deudas.id_empresa_deuda as id_key,
					tc_mantic_empresas_deudas.id_empresa,
					tc_mantic_notas_entradas.consecutivo,
					tc_mantic_empresas_deudas.importe,
					tc_mantic_empresas_deudas.saldo,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_empresas_deudas.limite,
					tc_mantic_empresas_deudas.registro,
					datediff(tc_mantic_empresas_deudas.limite, now()) as dias,
					tc_mantic_empresas.nombre,
          tc_mantic_empresas.clave,
					tc_mantic_proveedores.razon_social proveedor,
					tc_mantic_almacenes.nombre almacen,
          tc_mantic_almacenes.id_almacen,
					tc_mantic_proveedores.id_proveedor
				from
					tc_mantic_empresas_deudas
				inner join
					tc_mantic_notas_entradas on tc_mantic_empresas_deudas.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada				
				inner join 
					tc_mantic_proveedores on tc_mantic_notas_entradas.id_proveedor = tc_mantic_proveedores.id_proveedor
				inner join 
					tc_mantic_almacenes on tc_mantic_notas_entradas.id_almacen = tc_mantic_almacenes.id_almacen
				inner join 
					tc_mantic_empresas on tc_mantic_empresas_deudas.id_empresa = tc_mantic_empresas.id_empresa
				inner join
					tc_janal_usuarios on tc_mantic_empresas_deudas.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona				
				where
					{condicion}				
				and 					
					tc_mantic_proveedores.razon_social like '%{proveedor}%'
				and 
					tc_mantic_almacenes.id_empresa in ({idEmpresa})
				and 
					(tc_mantic_almacenes.clave like upper('%{almacen}%') or tc_mantic_almacenes.nombre like upper('%{almacen}%'))
				and 
					tc_mantic_notas_entradas.id_empresa in ({idEmpresa})
				{sortOrder}						
			</select>		
			<select id="cuentas">
				select
					tc_mantic_empresas_deudas.id_empresa_deuda as id_key,
					tc_mantic_empresas_deudas.id_empresa,
					tc_mantic_notas_entradas.consecutivo,
					tc_mantic_empresas_deudas.importe,
					tc_mantic_empresas_deudas.saldo,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_empresas_deudas.limite,
					tc_mantic_empresas_deudas.registro,
					datediff(tc_mantic_empresas_deudas.limite, now()) as dias,
					tc_mantic_empresas.nombre,
					tc_mantic_proveedores.razon_social proveedor,
					tc_mantic_almacenes.nombre almacen
				from
					tc_mantic_empresas_deudas
				inner join
					tc_mantic_notas_entradas on tc_mantic_empresas_deudas.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada				
				inner join 
					tc_mantic_proveedores on tc_mantic_notas_entradas.id_proveedor = tc_mantic_proveedores.id_proveedor
				inner join 
					tc_mantic_almacenes on tc_mantic_notas_entradas.id_almacen = tc_mantic_almacenes.id_almacen
				inner join 
					tc_mantic_empresas on tc_mantic_empresas_deudas.id_empresa = tc_mantic_empresas.id_empresa
				inner join
					tc_janal_usuarios on tc_mantic_empresas_deudas.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona				
				where
					tc_mantic_empresas_deudas.id_empresa_deuda = {idEmpresaDeuda}								
				{sortOrder}						
			</select>		
			<select id="pagosDeuda">
				select
					tc_mantic_empresas_pagos.id_empresa_pago as id_key,
					tc_mantic_notas_entradas.consecutivo,
					tc_mantic_empresas_deudas.importe,
					tc_mantic_empresas_deudas.saldo,
					tc_mantic_empresas_pagos.pago,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_empresas_pagos.registro,
					tc_mantic_empresas_pagos.observaciones,
					tc_mantic_tipos_medios_pagos.clave,
					tc_mantic_tipos_medios_pagos.nombre
				from
					tc_mantic_empresas_pagos
				inner join
					tc_mantic_empresas_deudas on tc_mantic_empresas_pagos.id_empresa_deuda= tc_mantic_empresas_deudas.id_empresa_deuda
				inner join
					tc_mantic_notas_entradas on tc_mantic_empresas_deudas.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada
				inner join
					tc_janal_usuarios on tc_mantic_empresas_pagos.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				inner join 
					tc_mantic_tipos_medios_pagos on tc_mantic_empresas_pagos.id_tipo_medio_pago = tc_mantic_tipos_medios_pagos.id_tipo_medio_pago
				where
					tc_mantic_empresas_deudas.id_empresa_deuda= {idEmpresaDeuda}									
				order by
					tc_mantic_notas_entradas.consecutivo, 
					tc_mantic_empresas_deudas.registro desc				
			</select>
			<select id="pagosBusqueda">
				select
					tc_mantic_empresas_pagos.id_empresa_pago as id_key,
					tc_mantic_notas_entradas.consecutivo,
					tc_mantic_empresas_deudas.importe,
					tc_mantic_empresas_deudas.saldo,
					tc_mantic_empresas_pagos.pago,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as persona,
					tc_mantic_empresas_pagos.registro,
					tc_mantic_empresas.nombre
				from
					tc_mantic_empresas_pagos
				inner join
					tc_mantic_empresas_deudas on tc_mantic_empresas_pagos.id_empresa_deuda= tc_mantic_empresas_deudas.id_empresa_deuda
				inner join
					tc_mantic_notas_entradas on tc_mantic_empresas_deudas.id_nota_entrada= tc_mantic_notas_entradas.id_nota_entrada
				inner join 
					tc_mantic_proveedores on tc_mantic_notas_entradas.id_proveedor = tc_mantic_proveedores.id_proveedor
				inner join 
					tc_mantic_almacenes on tc_mantic_notas_entradas.id_almacen = tc_mantic_almacenes.id_almacen
				inner join 
					tc_mantic_empresas on tc_mantic_empresas_deudas.id_empresa = tc_mantic_empresas.id_empresa				
				inner join
					tc_janal_usuarios on tc_mantic_empresas_pagos.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					{condicion}				
				and 					
					tc_mantic_proveedores.razon_social like '%{proveedor}%'
				and 
					tc_mantic_almacenes.id_empresa in ({idEmpresa})
				and 
					(tc_mantic_almacenes.clave like upper('%{almacen}%') or tc_mantic_almacenes.nombre like upper('%{almacen}%'))
				and 
					tc_mantic_notas_entradas.id_empresa in ({idEmpresa})
				order by
					tc_mantic_notas_entradas.consecutivo, 
					tc_mantic_empresas_deudas.registro desc						
			</select>
			<select id="importados">
				select
					tc_mantic_empresas_archivos.id_empresa_archivo as id_key,
					tc_mantic_empresas_archivos.id_empresa_pago,
			  	tc_mantic_empresas_archivos.id_tipo_archivo,
					tc_mantic_tipos_archivos.nombre as tipo,
					tc_mantic_empresas_archivos.nombre,
					tc_mantic_empresas_archivos.alias,
					tc_mantic_empresas_archivos.ruta,
					tc_mantic_empresas_archivos.id_principal,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as usuario,
					tc_mantic_empresas_archivos.observaciones,
					tc_mantic_empresas_archivos.registro,
				  tc_mantic_empresas_pagos.pago,
				  tc_mantic_empresas_pagos.registro registro_pago
				from
					tc_mantic_empresas_archivos
				inner join
					tc_mantic_tipos_archivos on tc_mantic_empresas_archivos.id_tipo_archivo= tc_mantic_tipos_archivos.id_tipo_archivo				
				inner join 
					tc_mantic_empresas_pagos on tc_mantic_empresas_archivos.id_empresa_pago = tc_mantic_empresas_pagos.id_empresa_pago
				inner join 
					tc_mantic_empresas_deudas on tc_mantic_empresas_pagos.id_empresa_deuda = tc_mantic_empresas_deudas.id_empresa_deuda
				inner join
					tc_janal_usuarios on tc_mantic_empresas_archivos.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_empresas_deudas.id_empresa_deuda= {idEmpresaDeuda}
				order by
					tc_mantic_empresas_archivos.id_tipo_archivo, 
				  tc_mantic_empresas_archivos.registro desc				
			</select>
			<select id="exists">
        select      
          tc_mantic_empresas_archivos.*
        from      
          tc_mantic_empresas_archivos
				inner join 
					tc_mantic_empresas_pagos on tc_mantic_empresas_archivos.id_empresa_pago = tc_mantic_empresas_pagos.id_empresa_pago
				inner join 
					tc_mantic_empresas_deudas on tc_mantic_empresas_pagos.id_empresa_deuda = tc_mantic_empresas_deudas.id_empresa_deuda
        where      
          tc_mantic_empresas_archivos.id_tipo_archivo = {idTipoArchivo} and tc_mantic_empresas_deudas.id_empresa_deuda = {idEmpresaDeuda}
				order by
				  tc_mantic_empresas_archivos.registro desc
      </select>
		</unit>
		<unit id="VistaTallerServiciosDto">
			<select id="porNombre">
				select
					*
				from 
							(
				select 
				  tc_mantic_articulos.id_articulo as id_key,
				  tc_mantic_articulos.id_articulo,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear,
				  1 as is_articulo,
				  'ARTICULO' as is_tipo
				from 
					tc_mantic_articulos
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and 
				  (
				    upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*'
				  or
				    tc_mantic_articulos.id_articulo= {idArticulo}
				  ) 			
				union all
				select
					tc_mantic_trabajos.id_trabajo as id_key,
					tc_mantic_trabajos.id_trabajo,
					tc_mantic_trabajos.codigo as propio,
					tc_mantic_trabajos.nombre,
					tc_mantic_trabajos.precio,
					tc_mantic_trabajos.iva,
					2 as id_redondear,
					2 as is_articulo,
				  'SERVICIO' as is_tipo
				from
					tc_mantic_trabajos
				inner join 
					tc_mantic_empresas on tc_mantic_trabajos.id_empresa = tc_mantic_empresas.id_empresa
				where
				  tc_mantic_trabajos.id_empresa in ({sucursales})
				  and 
				  (
				    upper(tc_mantic_trabajos.nombre) regexp '.*{codigo}.*'
				   or
				    tc_mantic_trabajos.id_trabajo= {idTrabajo}				
				  ) 
			  ) as tc_mantic_dual
				order by
					nombre
			</select>
			<select id="porCodigo">
				select
					*
				from 
							(
				select 
				  tc_mantic_articulos.id_articulo as id_key,
				  tc_mantic_articulos.id_articulo,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
				  tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear,
				  1 as is_articulo,
				  'ARTICULO' as is_tipo
				from 
					tc_mantic_articulos
				inner join
					tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and 
				  (
				    upper(tc_mantic_articulos.codigo) regexp '.*{codigo}.*'
				  or
				    tc_mantic_articulos.id_articulo= {idArticulo}
				  ) 			
				union all
				select
					tc_mantic_trabajos.id_trabajo as id_key,
					tc_mantic_trabajos.id_trabajo,
					tc_mantic_trabajos.codigo as propio,
					tc_mantic_trabajos.nombre,
					tc_mantic_trabajos.precio,
					tc_mantic_trabajos.iva,
					2 as id_redondear,
					2 as is_articulo,
				  'SERVICIO' as is_tipo
				from
					tc_mantic_trabajos
				inner join 
					tc_mantic_empresas on tc_mantic_trabajos.id_empresa = tc_mantic_empresas.id_empresa
				where
				  tc_mantic_trabajos.id_empresa in ({sucursales})
				  and 
				  (
				    upper(tc_mantic_trabajos.codigo) regexp '.*{codigo}.*'
				  or
				    tc_mantic_trabajos.id_trabajo= {idTrabajo}				
				  ) 
				) as tc_mantic_dual
				order by
					propio
			</select>			
			<select id="movimientos">
				select
					tc_mantic_servicios_bitacora.id_servicio_bitacora as id_key,
					tc_mantic_servicios_bitacora.consecutivo,
					tc_mantic_servicios_bitacora.importe,
					tc_mantic_servicios_bitacora.seguimiento as justificacion,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre,
				  tc_mantic_servicios_estatus.nombre as estatus,
					tc_mantic_servicios_bitacora.registro
				from 
					tc_mantic_servicios_bitacora
				inner join
					tc_mantic_servicios_estatus on tc_mantic_servicios_bitacora.id_servicio_estatus= tc_mantic_servicios_estatus.id_servicio_estatus
				inner join
					tc_janal_usuarios on tc_mantic_servicios_bitacora.id_usuario= tc_janal_usuarios.id_usuario
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_servicios_bitacora.id_servicio_bitacora= {idServicioBitacora}
				order by
					tc_mantic_servicios_bitacora.registro desc				
			</select>
			<select id="principal">
				select  
					tc_mantic_servicios.id_servicio as id_key,
					tc_mantic_servicios.consecutivo,
					tc_mantic_servicios.herramienta,
					tc_mantic_servicios.marca,
					tc_mantic_servicios.modelo,
					tc_mantic_servicios.fecha_estimada,
          tc_mantic_clientes.razon_social, 
					tc_mantic_servicios_estatus.nombre estatus,
					tc_mantic_servicios_estatus.estatus_asociados
				from 
					tc_mantic_servicios
				inner join 
					tc_mantic_clientes on tc_mantic_servicios.id_cliente = tc_mantic_clientes.id_cliente
				inner join 
					tc_mantic_servicios_estatus on tc_mantic_servicios.id_servicio_estatus = tc_mantic_servicios_estatus.id_servicio_estatus
				where 
					tc_mantic_servicios.id_empresa={idEmpresa}
				and
					tc_mantic_servicios.consecutivo like '%{consecutivo}%'
				and 
					tc_mantic_servicios_estatus.id_servicio_estatus in ({estatus})
				and 
					upper(tc_mantic_servicios.herramienta) like upper('%{herramienta}%')
				and 
					upper(tc_mantic_clientes.razon_social) like upper('%{cliente}%')
				{sortOrder}
			</select>		
		</unit>
    <unit id="VistaInformacionProveedor">		
      <select id="telefonos">
        select group_concat(telefono_proveedor.valor separator ' , ') tels from 
          tc_mantic_ordenes_compras
        inner join 
          tc_mantic_proveedores on tc_mantic_ordenes_compras.id_proveedor= tc_mantic_proveedores.id_proveedor
        left join 
          tr_mantic_proveedor_tipo_contacto telefono_proveedor on tc_mantic_proveedores.id_proveedor = telefono_proveedor.id_proveedor and telefono_proveedor.id_tipo_contacto between 1 and 8
        where 
          tc_mantic_ordenes_compras.id_orden_compra= {idOrdenCompra}
      </select>	
      <select id="emails">
        select group_concat(valor separator ' , ') emails from 
          tc_mantic_ordenes_compras
        inner join 
          tc_mantic_proveedores on tc_mantic_ordenes_compras.id_proveedor= tc_mantic_proveedores.id_proveedor
        left join 
          tr_mantic_proveedor_tipo_contacto on tc_mantic_proveedores.id_proveedor = tc_mantic_proveedores.id_proveedor and tr_mantic_proveedor_tipo_contacto.id_tipo_contacto between 9 and 11
        where 
        tc_mantic_ordenes_compras.id_orden_compra= {idOrdenCompra}
      </select>
    </unit>	    			
    <unit id="VistaInformacionAlmacen">		
      <select id="telefonos">
        select group_concat(tr_mantic_almacen_tipo_contacto.valor separator ' , ') tels from 
          tc_mantic_ordenes_compras
        inner join 
          tc_mantic_almacenes on tc_mantic_ordenes_compras.id_almacen= tc_mantic_almacenes.id_almacen
        left join 
          tr_mantic_almacen_tipo_contacto on tc_mantic_almacenes.id_almacen = tr_mantic_almacen_tipo_contacto.id_almacen and tr_mantic_almacen_tipo_contacto.id_tipo_contacto between 1 and 8
        where 
          tc_mantic_ordenes_compras.id_orden_compra= {idOrdenCompra}
      </select>	
      <select id="emails">
        select group_concat(tr_mantic_almacen_tipo_contacto.valor separator ' , ') emails from 
          tc_mantic_ordenes_compras
        inner join 
          tc_mantic_almacenes on tc_mantic_ordenes_compras.id_almacen= tc_mantic_almacenes.id_almacen
        left join 
          tr_mantic_almacen_tipo_contacto on tc_mantic_almacenes.id_almacen = tr_mantic_almacen_tipo_contacto.id_almacen and tr_mantic_almacen_tipo_contacto.id_tipo_contacto between 9 and 11
        where 
          tc_mantic_ordenes_compras.id_orden_compra= {idOrdenCompra}
      </select>
    </unit>	    			
    <unit id="VistaInformacionEmpresas">	
      <select id="datosEmpresa">
        select
					tc_mantic_empresas.id_empresa,
          tc_mantic_empresas.clave,
          tc_mantic_empresas.nombre,
					domicilio_empresa.numero_interior,
					concat(domicilio_empresa.calle, case  when domicilio_empresa.numero_exterior is null then ' ' else concat(' # ',domicilio_empresa.numero_exterior) end, case  when domicilio_empresa.numero_interior is null then ' ' else concat(' INT. ',domicilio_empresa.numero_interior) end) as empresa_direccion,
          domicilio_empresa.codigo_postal,
					domicilio_empresa.asentamiento as colonia,
				  (select 
					  group_concat(tr_mantic_empresa_tipo_contacto.valor separator ' , ') tels 
					 from 
					   tc_mantic_empresas left join tr_mantic_empresa_tipo_contacto on tc_mantic_empresas.id_empresa = tr_mantic_empresa_tipo_contacto.id_empresa and tr_mantic_empresa_tipo_contacto.id_tipo_contacto between 1 and 8 
					 where 
        				tc_mantic_empresas.id_empresa) telefonos_empresa,
        	(select 
					  group_concat(tr_mantic_empresa_tipo_contacto.valor separator ' , ') emails 
					 from 
					   tc_mantic_empresas left join tr_mantic_empresa_tipo_contacto on tc_mantic_empresas.id_empresa = tr_mantic_empresa_tipo_contacto.id_empresa and tr_mantic_empresa_tipo_contacto.id_tipo_contacto between 9 and 11 
					 where 
        	tc_mantic_empresas.id_empresa) emails_empresa,
        	concat(responsable_empresa.nombres,' ' ,responsable_empresa.paterno,' ',responsable_empresa.materno) as responsable_empresa,
          responsable_empresa.rfc rfc_empresa,
	        concat(replace(replace(upper(municipio_empresa.descripcion),char(10),' '),char(13),' '),', ' ,upper(entidad_empresa.descripcion),', ',upper(pais_empresa.descripcion)) as empresa_region,
          (select 
					  group_concat(tr_mantic_persona_tipo_contacto.valor separator ' , ') emails 
					 from 
					   tc_mantic_personas left join tr_mantic_persona_tipo_contacto on tc_mantic_personas.id_persona  = tr_mantic_persona_tipo_contacto.id_persona and tr_mantic_persona_tipo_contacto.id_tipo_contacto between 9 and 11 
					 where 
        				tc_mantic_personas.id_persona= responsable_empresa.id_persona) emails_contacto,
          (select 
            group_concat(tr_mantic_persona_tipo_contacto.valor separator ' , ') tels 
          from 
            tc_mantic_personas left join tr_mantic_persona_tipo_contacto on tc_mantic_personas.id_persona  = tr_mantic_persona_tipo_contacto.id_persona and tr_mantic_persona_tipo_contacto.id_tipo_contacto between 1 and 8 
          where 
            tc_mantic_personas.id_persona= responsable_empresa.id_persona) telefonos_contacto
				from 
					tc_mantic_empresas 
				inner join 
					tr_mantic_empresa_domicilio  on tc_mantic_empresas.id_empresa= tr_mantic_empresa_domicilio.id_empresa
				inner join 
					tc_mantic_domicilios  domicilio_empresa on tr_mantic_empresa_domicilio.id_domicilio = domicilio_empresa.id_domicilio
				inner join 
					tc_janal_localidades localidad_empresa on domicilio_empresa.id_localidad = localidad_empresa.id_localidad
				inner join
          tc_janal_municipios municipio_empresa on localidad_empresa.id_municipio = municipio_empresa.id_municipio
        inner join
					tc_janal_entidades  entidad_empresa on municipio_empresa.id_entidad = entidad_empresa.id_entidad
				inner join
					tc_janal_paises  pais_empresa on entidad_empresa.id_pais = pais_empresa.id_pais
				left join 
					tc_mantic_personas responsable_empresa on tc_mantic_empresas.id_responsable = responsable_empresa.id_persona
				left join 
					tr_mantic_persona_tipo_contacto telefono on responsable_empresa.id_persona = telefono.id_persona and telefono.id_tipo_contacto=1
				left join 
					tr_mantic_persona_tipo_contacto correo on telefono.id_persona = correo.id_persona and correo.id_tipo_contacto=9
				where
					tc_mantic_empresas.id_empresa in ({idEmpresa})
      </select>	
      <select id="datosAlmacen">
        select
					tc_mantic_almacenes.id_almacen,
        	tc_mantic_almacenes.clave,
					domicilio_almacen.numero_interior,
					concat(domicilio_almacen.calle, case  when domicilio_almacen.numero_exterior is null then ' ' else concat(' # ',domicilio_almacen.numero_exterior) end, case  when domicilio_almacen.numero_interior is null then ' ' else concat(' INT. ',domicilio_almacen.numero_interior) end) as almacen_direccion,	
          domicilio_almacen.codigo_postal,
					domicilio_almacen.asentamiento as colonia,
				  (select 
					  group_concat(tr_mantic_almacen_tipo_contacto.valor separator ' , ') tels 
					 from 
					   tc_mantic_almacenes left join tr_mantic_almacen_tipo_contacto on tc_mantic_almacenes.id_almacen = tr_mantic_almacen_tipo_contacto.id_almacen and tr_mantic_almacen_tipo_contacto.id_tipo_contacto between 1 and 8 
					 where 
        				tc_mantic_almacenes.id_almacen) telefonos_almacen,
        	(select 
					  group_concat(tr_mantic_almacen_tipo_contacto.valor separator ' , ') emails 
					 from 
					   tc_mantic_almacenes left join tr_mantic_almacen_tipo_contacto on tc_mantic_almacenes.id_almacen = tr_mantic_almacen_tipo_contacto.id_almacen and tr_mantic_almacen_tipo_contacto.id_tipo_contacto between 9 and 11 
					 where 
        	tc_mantic_almacenes.id_almacen) emails_almacen,
        	concat(responsable_almacen.nombres,' ' ,responsable_almacen.paterno,' ',responsable_almacen.materno) as responsable_almacen,
          responsable_almacen.rfc rfc_almacen,
	        concat(replace(replace(upper(municipio_almacen.descripcion),char(10),' '),char(13),' '),', ' ,upper(entidad_almacen.descripcion),', ',upper(pais_almacen.descripcion)) as almacen_region,
          (select 
					  group_concat(tr_mantic_persona_tipo_contacto.valor separator ' , ') emails 
					 from 
					   tc_mantic_personas left join tr_mantic_persona_tipo_contacto on tc_mantic_personas.id_persona  = tr_mantic_persona_tipo_contacto.id_persona and tr_mantic_persona_tipo_contacto.id_tipo_contacto between 9 and 11 
					 where 
        				tc_mantic_personas.id_persona= responsable_almacen.id_persona) emails_contacto,
          (select 
            group_concat(tr_mantic_persona_tipo_contacto.valor separator ' , ') tels 
          from 
            tc_mantic_personas left join tr_mantic_persona_tipo_contacto on tc_mantic_personas.id_persona  = tr_mantic_persona_tipo_contacto.id_persona and tr_mantic_persona_tipo_contacto.id_tipo_contacto between 1 and 8 
          where 
            tc_mantic_personas.id_persona= responsable_almacen.id_persona) telefonos_contacto
				from 
					tc_mantic_almacenes 
				inner join 
					tr_mantic_almacen_domicilio  on tc_mantic_almacenes.id_almacen= tr_mantic_almacen_domicilio.id_almacen
				inner join 
					tc_mantic_domicilios  domicilio_almacen on tr_mantic_almacen_domicilio.id_domicilio = domicilio_almacen.id_domicilio
				inner join 
					tc_janal_localidades localidad_almacen on domicilio_almacen.id_localidad = localidad_almacen.id_localidad
				inner join
          tc_janal_municipios municipio_almacen on localidad_almacen.id_municipio = municipio_almacen.id_municipio
        inner join
					tc_janal_entidades  entidad_almacen on municipio_almacen.id_entidad = entidad_almacen.id_entidad
				inner join
					tc_janal_paises  pais_almacen on entidad_almacen.id_pais = pais_almacen.id_pais
				left join 
					tc_mantic_personas responsable_almacen on tc_mantic_almacenes.id_responsable = responsable_almacen.id_persona
				left join 
					tr_mantic_persona_tipo_contacto telefono on responsable_almacen.id_persona = telefono.id_persona and telefono.id_tipo_contacto=1
				left join 
					tr_mantic_persona_tipo_contacto correo on telefono.id_persona = correo.id_persona and correo.id_tipo_contacto=9
				where
					tc_mantic_almacenes.id_almacen in ({idAlmacen})
      </select>
      <select id="datosProveedor">
        select
					tc_mantic_proveedores.id_proveedor,
          tc_mantic_proveedores.clave,
          tc_mantic_proveedores.rfc,
          tc_mantic_proveedores.razon_social,
					domicilio_proveedor.numero_interior,
					domicilio_proveedor.calle,
					concat(domicilio_proveedor.calle, case  when domicilio_proveedor.numero_exterior is null then ' ' else concat(' # ',domicilio_proveedor.numero_exterior) end, case  when domicilio_proveedor.numero_interior is null then ' ' else concat(' INT. ',domicilio_proveedor.numero_interior) end) as proveedor_direccion,
					domicilio_proveedor.codigo_postal,
					domicilio_proveedor.asentamiento as colonia,
          concat(replace(replace(upper(municipio_proveedor.descripcion),char(10),' '),char(13),' '),', ' ,upper(entidad_proveedor.descripcion),', ',upper(pais_proveedor.descripcion)) as proveedor_region,
          concat(agentes.nombres, ' ' ,  agentes.paterno, ' ',agentes.materno) as agente,
				  (select 
					  group_concat(tr_mantic_proveedor_tipo_contacto.valor separator ' , ') tels 
           from 
					   tc_mantic_proveedores left join tr_mantic_proveedor_tipo_contacto on tc_mantic_proveedores.id_proveedor = tr_mantic_proveedor_tipo_contacto.id_proveedor and tr_mantic_proveedor_tipo_contacto.id_tipo_contacto between 1 and 8 
					 where 
        				tc_mantic_proveedores.id_proveedor in ({idProveedor})) telefonos_proveedor,
        	(select 
					  group_concat(tr_mantic_proveedor_tipo_contacto.valor separator ' , ') emails 
          from 
            tc_mantic_proveedores left join tr_mantic_proveedor_tipo_contacto on tc_mantic_proveedores.id_proveedor = tr_mantic_proveedor_tipo_contacto.id_proveedor and tr_mantic_proveedor_tipo_contacto.id_tipo_contacto between 9 and 11 
          where 
            tc_mantic_proveedores.id_proveedor in ({idProveedor})) emails_proveedor
        from 
          tc_mantic_proveedores 
        inner join 
          tr_mantic_proveedor_domicilio  on tc_mantic_proveedores.id_proveedor= tr_mantic_proveedor_domicilio.id_proveedor
        inner join 
          tc_mantic_domicilios  domicilio_proveedor on tr_mantic_proveedor_domicilio.id_domicilio = domicilio_proveedor.id_domicilio
        inner join 
          tc_janal_localidades localidad_proveedor on domicilio_proveedor.id_localidad = localidad_proveedor.id_localidad
        inner join
          tc_janal_municipios municipio_proveedor on localidad_proveedor.id_municipio = municipio_proveedor.id_municipio
        inner join
          tc_janal_entidades  entidad_proveedor on municipio_proveedor.id_entidad = entidad_proveedor.id_entidad
        inner join
          tc_janal_paises  pais_proveedor on entidad_proveedor.id_pais = pais_proveedor.id_pais
        left join 
					tr_mantic_proveedor_agente on tc_mantic_proveedores.id_proveedor = tr_mantic_proveedor_agente.id_proveedor and tr_mantic_proveedor_agente.id_principal=1
				left join 
					tc_mantic_personas agentes on tr_mantic_proveedor_agente.id_agente= agentes.id_persona
        where
          tc_mantic_proveedores.id_proveedor in ({idProveedor})
      </select>
      <select id="telefonos">
        select group_concat(tr_mantic_empresa_tipo_contacto.valor separator ' , ') tels from 
          tc_mantic_ordenes_compras
        inner join 
          tc_mantic_empresas on tc_mantic_ordenes_compras.id_empresa= tc_mantic_empresas.id_empresa
        left join 
          tr_mantic_empresa_tipo_contacto on tc_mantic_empresas.id_empresa = tr_mantic_empresas_tipo_contacto.id_empresa and tr_mantic_empresas_tipo_contacto.id_tipo_contacto between 1 and 8
        where 
          tc_mantic_ordenes_compras.id_orden_compra= {idOrdenCompra}
      </select>	
      <select id="emails">
        select group_concat(tr_mantic_empresa_tipo_contacto.valor separator ' , ') emails from 
          tc_mantic_ordenes_compras
        inner join 
          tc_mantic_empresas on tc_mantic_ordenes_compras.id_empresa= tc_mantic_empresas.id_empresa
        left join 
          tr_mantic_empresa_tipo_contacto on tc_mantic_empresas.id_empresa = tr_mantic_empresas_tipo_contacto.id_empresa and tr_mantic_empresas_tipo_contacto.id_tipo_contacto between 9 and 11
        where 
          tc_mantic_ordenes_compras.id_orden_compra= {idOrdenCompra}
      </select>
      <select id="datosCliente">
        select
					tc_mantic_clientes.id_cliente,
        	tc_mantic_clientes.clave,
          tc_mantic_clientes.razon_social,
        tc_mantic_clientes.rfc,
					domicilio_cliente.numero_interior,
					concat(domicilio_cliente.calle, case  when domicilio_cliente.numero_exterior is null then ' ' else concat(' # ',domicilio_cliente.numero_exterior) end, case  when domicilio_cliente.numero_interior is null then ' ' else concat(' INT. ',domicilio_cliente.numero_interior) end) as cliente_direccion,	
          domicilio_cliente.codigo_postal,
					domicilio_cliente.asentamiento as colonia,
				  (select 
					  group_concat(tr_mantic_cliente_tipo_contacto.valor separator ' , ') tels 
					 from 
					   tc_mantic_clientes left join tr_mantic_cliente_tipo_contacto on tc_mantic_clientes.id_cliente = tr_mantic_cliente_tipo_contacto.id_cliente and tr_mantic_cliente_tipo_contacto.id_tipo_contacto between 1 and 8 
					 where 
        				tc_mantic_clientes.id_cliente in ({idCliente})) telefonos_cliente,
        	(select 
					  group_concat(tr_mantic_cliente_tipo_contacto.valor separator ' , ') emails 
					 from 
					   tc_mantic_clientes left join tr_mantic_cliente_tipo_contacto on tc_mantic_clientes.id_cliente = tr_mantic_cliente_tipo_contacto.id_cliente and tr_mantic_cliente_tipo_contacto.id_tipo_contacto between 9 and 11 
					 where 
        	tc_mantic_clientes.id_cliente in ({idCliente})) emails_cliente,
        	concat(responsable_cliente.nombres,' ' ,responsable_cliente.paterno,' ',responsable_cliente.materno) as responsable_cliente,
          responsable_cliente.rfc rfc_cliente,
	        concat(replace(replace(upper(municipio_cliente.descripcion),char(10),' '),char(13),' '),', ' ,upper(entidad_cliente.descripcion),', ',upper(pais_cliente.descripcion)) as cliente_region,
          (select 
					  group_concat(tr_mantic_persona_tipo_contacto.valor separator ' , ') emails 
					 from 
					   tc_mantic_personas left join tr_mantic_persona_tipo_contacto on tc_mantic_personas.id_persona  = tr_mantic_persona_tipo_contacto.id_persona and tr_mantic_persona_tipo_contacto.id_tipo_contacto between 9 and 11 
					 where 
        				tc_mantic_personas.id_persona= responsable_cliente.id_persona) emails_contacto,
          (select 
            group_concat(tr_mantic_persona_tipo_contacto.valor separator ' , ') tels 
          from 
            tc_mantic_personas left join tr_mantic_persona_tipo_contacto on tc_mantic_personas.id_persona  = tr_mantic_persona_tipo_contacto.id_persona and tr_mantic_persona_tipo_contacto.id_tipo_contacto between 1 and 8 
          where 
            tc_mantic_personas.id_persona= responsable_cliente.id_persona) telefonos_contacto
				from 
					tc_mantic_clientes 
				inner join 
					tr_mantic_cliente_domicilio  on tc_mantic_clientes.id_cliente= tr_mantic_cliente_domicilio.id_cliente
				inner join 
					tc_mantic_domicilios  domicilio_cliente on tr_mantic_cliente_domicilio.id_domicilio = domicilio_cliente.id_domicilio
				inner join 
					tc_janal_localidades localidad_cliente on domicilio_cliente.id_localidad = localidad_cliente.id_localidad
				inner join
          tc_janal_municipios municipio_cliente on localidad_cliente.id_municipio = municipio_cliente.id_municipio
        inner join
					tc_janal_entidades  entidad_cliente on municipio_cliente.id_entidad = entidad_cliente.id_entidad
				inner join
					tc_janal_paises  pais_cliente on entidad_cliente.id_pais = pais_cliente.id_pais
				left join 
					tc_mantic_personas responsable_cliente on tc_mantic_clientes.id_cliente = responsable_cliente.id_persona
				left join 
					tr_mantic_persona_tipo_contacto telefono on responsable_cliente.id_persona = telefono.id_persona and telefono.id_tipo_contacto=1
				left join 
					tr_mantic_persona_tipo_contacto correo on telefono.id_persona = correo.id_persona and correo.id_tipo_contacto=9
        where
          tc_mantic_clientes.id_cliente in ({idCliente})
      </select>
    </unit>	    		
		<unit id="VistaTrabajosDto">
			<select id="row">
				select 
					tc_mantic_trabajos.id_trabajo as id_key,
					tc_mantic_trabajos.*
				from 
					tc_mantic_trabajos
				where 
					codigo like '%{codigo}%'
				and 
					nombre like '%{nombre}%'
				and 
					descripcion like '%{descripcion}%'
				and 
					id_empresa= {idEmpresa}
			</select>
		</unit>
		<unit id="VistaClientesRepresentantesDto">
			<select id="representantesCliente">
				select 
					tr_mantic_clientes_representantes.id_cliente_representante as id_key,
					tr_mantic_clientes_representantes.id_cliente,
					tr_mantic_clientes_representantes.id_representante,
					tr_mantic_clientes_representantes.id_principal,
					tr_mantic_clientes_representantes.observaciones,
					tr_mantic_clientes_representantes.registro,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) nombre_completo,
					tc_mantic_personas.rfc,
					tc_mantic_personas.curp
				from 	
					tr_mantic_clientes_representantes
				inner join
					tc_mantic_personas ON tr_mantic_clientes_representantes.id_representante = tc_mantic_personas.id_persona
				where 
					tr_mantic_clientes_representantes.id_cliente={idCliente}
			</select>
			<select id="importados">
				select
					tc_mantic_clientes_archivos.id_cliente_archivo as id_key,
					tc_mantic_clientes_archivos.id_cliente_representante,
			  	tc_mantic_clientes_archivos.id_tipo_archivo,
					tc_mantic_tipos_archivos.nombre as tipo,
					tc_mantic_clientes_archivos.nombre,
					tc_mantic_clientes_archivos.alias,
					tc_mantic_clientes_archivos.ruta,
					tc_mantic_clientes_archivos.id_principal,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as usuario,
					tc_mantic_clientes_archivos.observaciones,
					tc_mantic_clientes_archivos.registro
				from
					tc_mantic_clientes_archivos
				inner join
					tc_mantic_tipos_archivos on tc_mantic_clientes_archivos.id_tipo_archivo= tc_mantic_tipos_archivos.id_tipo_archivo
				inner join
					tr_mantic_clientes_representantes on tc_mantic_clientes_archivos.id_cliente_representante = tr_mantic_clientes_representantes.id_cliente_representante
				inner join
					tc_mantic_personas ON tr_mantic_clientes_representantes.id_representante = tc_mantic_personas.id_persona
				where
					tr_mantic_clientes_representantes.id_cliente= {idCliente}
				order by
					tc_mantic_clientes_archivos.id_tipo_archivo, 
				  tc_mantic_clientes_archivos.registro desc				
			</select>
			<select id="exists">
        select      
          tc_mantic_clientes_archivos.*
        from      
          tc_mantic_clientes_archivos
				inner join
					tr_mantic_clientes_representantes on tc_mantic_clientes_archivos.id_cliente_representante = tr_mantic_clientes_representantes.id_cliente_representante
        where      
          tc_mantic_clientes_archivos.id_tipo_archivo = {idTipoArchivo} and tr_mantic_clientes_representantes.id_cliente = {idCliente}
				order by
				  tc_mantic_clientes_archivos.registro desc
      </select>
		</unit>
    <unit id="VistaAlmacenesTransferenciasDto">
      <select id="row">
        select 
          tc_mantic_transferencias.id_transferencia as id_key,
          tc_mantic_transferencias.id_transferencia,
          tc_mantic_transferencias.id_almacen,
          origen.nombre  nombre_origen,
          origen.clave clave_origen,
          tc_mantic_transferencias.id_destino,
          destino.nombre nombre_destino,
          destino.clave clave_destino,
          tc_mantic_transferencias.id_articulo,
          tc_mantic_articulos.nombre,
          concat('(',
          ifnull((select
              tc_mantic_articulos_codigos.codigo 
          from
              tc_mantic_articulos_codigos 
          where
              tc_mantic_articulos_codigos.id_proveedor= tc_mantic_articulos.id_articulo),
          ''),
          ' ) ',
          tc_mantic_articulos.nombre) as nombre_articulo,
          tc_mantic_articulos_codigos.codigo,
          tc_mantic_transferencias.id_solicito,
          concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as solicito,
          tc_mantic_transferencias.id_usuario,
          tc_mantic_transferencias.cantidad,
          tc_mantic_transferencias.registro,
          tc_mantic_transferencias.observaciones,
          tc_mantic_transferencias.id_transferencia_estatus estatus,
          tc_mantic_transferencias_estatus.nombre nombre_estatus,
          tc_mantic_transferencias_estatus.estatus_asociados
        from
          tc_mantic_transferencias
        inner join
          tc_mantic_transferencias_estatus on tc_mantic_transferencias.id_transferencia_estatus = tc_mantic_transferencias_estatus.id_transferencias_estatus
        inner join 
          tc_mantic_articulos on tc_mantic_transferencias.id_articulo = tc_mantic_articulos.id_articulo
        inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
        inner join
           tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1   
        inner join 
          tc_mantic_personas  on tc_mantic_transferencias.id_solicito = tc_mantic_personas.id_persona
        inner join 
        	tc_mantic_almacenes origen on tc_mantic_transferencias.id_almacen = origen.id_almacen
        inner join 
        	tc_mantic_almacenes destino on tc_mantic_transferencias.id_destino = destino.id_almacen
        where 
          tc_mantic_empresas.id_empresa in ({idEmpresa}) and ((
          (upper(tc_mantic_articulos_codigos.codigo) like upper('%{codigoArticulo}%'))
           and 
           upper(tc_mantic_articulos.nombre) like upper('%{nombreArticulo}%')	)
            or(((origen.clave like '%{clave}%' or origen.clave is null) or origen.nombre like '%{nombre}%'))
            or(((destino.clave like '%{clave}%' or destino.clave is null) or destino.nombre like '%{nombre}%')))		
        {sortOrder}
      </select>   
      <select id="porNombre">
				select 
				  tc_mantic_articulos.id_articulo as id_key,
				  tc_mantic_articulos.id_articulo,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
          tc_mantic_articulos_codigos.codigo,  
          tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.menudeo,
				  tc_mantic_articulos.medio_mayoreo,
				  tc_mantic_articulos.mayoreo,
				  tc_mantic_articulos.limite_medio_mayoreo,
				  tc_mantic_articulos.limite_mayoreo,
				  tc_mantic_articulos.iva,
          tc_mantic_almacenes_articulos.stock,
          tc_mantic_almacenes_articulos.minimo,
          tc_mantic_almacenes_articulos.maximo,
				  tc_mantic_articulos.id_redondear,
				  tc_mantic_imagenes.ruta,
				  tc_mantic_imagenes.archivo
				from 
					tc_mantic_articulos
        left join 
					tc_mantic_imagenes on tc_mantic_articulos.id_imagen = tc_mantic_imagenes.id_imagen
        inner join
           tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_almacenes_articulos on tc_mantic_articulos.id_articulo = tc_mantic_almacenes_articulos.id_articulo 
				inner join 
				  tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
				inner join 
				  tc_mantic_almacenes_ubicaciones on tc_mantic_almacenes_articulos.id_almacen_ubicacion= tc_mantic_almacenes_ubicaciones.id_almacen_ubicacion
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and 
				  (
				    upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*'
				  )		
          and 
              tc_mantic_almacenes.id_almacen = {idAlmacenOrigen} 	
				order by 
				  tc_mantic_articulos.nombre				
			</select>
			<select id="porCodigo">
				select 
				  tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
				  tc_mantic_articulos.id_articulo,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
				  tc_mantic_articulos_codigos.codigo,
          tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.menudeo,
				  tc_mantic_articulos.medio_mayoreo,
				  tc_mantic_articulos.mayoreo,
				  tc_mantic_articulos.limite_medio_mayoreo,
				  tc_mantic_articulos.limite_mayoreo,
				  tc_mantic_articulos.iva,
          tc_mantic_almacenes_articulos.stock,
          tc_mantic_almacenes_articulos.minimo,
          tc_mantic_almacenes_articulos.maximo,
				  tc_mantic_articulos.id_redondear,
				  tc_mantic_imagenes.ruta,
				  tc_mantic_imagenes.archivo
				from 
					tc_mantic_articulos
        left join 
					tc_mantic_imagenes on tc_mantic_articulos.id_imagen = tc_mantic_imagenes.id_imagen
        inner join
           tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_almacenes_articulos on tc_mantic_articulos.id_articulo = tc_mantic_almacenes_articulos.id_articulo 
				inner join 
				  tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
				inner join 
				  tc_mantic_almacenes_ubicaciones on tc_mantic_almacenes_articulos.id_almacen_ubicacion= tc_mantic_almacenes_ubicaciones.id_almacen_ubicacion
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and (
				      upper(tc_mantic_articulos_codigos.codigo) like '%{codigo}%'
				   ) 
           and 
            tc_mantic_almacenes.id_almacen = {idAlmacenOrigen} 
        order by 
				  tc_mantic_articulos_codigos.codigo
			</select>
      <select id="articuloAlmacen">
				select 
				  tc_mantic_articulos_codigos.id_articulo_codigo as id_key,
				  tc_mantic_articulos.id_articulo,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio,
				  tc_mantic_articulos_codigos.codigo,
          tc_mantic_articulos.nombre,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.menudeo,
				  tc_mantic_articulos.medio_mayoreo,
				  tc_mantic_articulos.mayoreo,
				  tc_mantic_articulos.limite_medio_mayoreo,
				  tc_mantic_articulos.limite_mayoreo,
				  tc_mantic_articulos.iva,
          tc_mantic_almacenes_articulos.stock,
          tc_mantic_almacenes_articulos.minimo,
          tc_mantic_almacenes_articulos.maximo,
				  tc_mantic_articulos.id_redondear,
				  tc_mantic_imagenes.ruta,
				  tc_mantic_imagenes.archivo
				from 
					tc_mantic_articulos
        left join 
					tc_mantic_imagenes on tc_mantic_articulos.id_imagen = tc_mantic_imagenes.id_imagen
        inner join
           tc_mantic_articulos_codigos on tc_mantic_articulos.id_articulo = tc_mantic_articulos_codigos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_almacenes_articulos on tc_mantic_articulos.id_articulo = tc_mantic_almacenes_articulos.id_articulo 
				inner join 
				  tc_mantic_almacenes on tc_mantic_almacenes_articulos.id_almacen= tc_mantic_almacenes.id_almacen
				inner join 
				  tc_mantic_almacenes_ubicaciones on tc_mantic_almacenes_articulos.id_almacen_ubicacion= tc_mantic_almacenes_ubicaciones.id_almacen_ubicacion
				where 
					tc_mantic_empresas.id_empresa in ({sucursales})
				  and 
             tc_mantic_articulos.id_articulo = {idArticulo}
          and 
            tc_mantic_almacenes.id_almacen = {idAlmacenDestino}  						   
        order by 
				  tc_mantic_articulos_codigos.codigo
			</select>
    </unit>
		<unit id="VistaRequisicionesDto">
			<select id="lazy">
        select
					tc_mantic_requisiciones.id_requisicion as id_key,
					tc_mantic_requisiciones.id_empresa,  
				  tc_mantic_empresas.clave as empresa,  
				  tc_mantic_empresas.nombre as nombre_empresa,  
					tc_mantic_requisiciones.consecutivo,  															
				  tc_mantic_requisiciones_estatus.nombre as estatus,
					tc_mantic_requisiciones.id_requisicion_estatus,
					tc_mantic_requisiciones.registro,
					tc_mantic_requisiciones.observaciones,
					tc_mantic_requisiciones.fecha_pedido,
					tc_mantic_requisiciones.fecha_entregada,
					tc_mantic_requisiciones_estatus.estatus_asociados, 					
					tc_mantic_personas.cuenta,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as nombre					          
				from 
					tc_mantic_requisiciones				
				inner join 
					tc_mantic_empresas on tc_mantic_requisiciones.id_empresa= tc_mantic_empresas.id_empresa
				inner join 
					tc_mantic_requisiciones_estatus on tc_mantic_requisiciones.id_requisicion_estatus=tc_mantic_requisiciones_estatus.id_requisicion_estatus				
				inner join				
					tc_mantic_personas on tc_mantic_personas.id_persona = tc_mantic_requisiciones.id_solicita
				where
					tc_mantic_requisiciones.id_empresa in ({idEmpresa})
					and {condicion}
				{sortOrder}
			</select>
		</unit>
		<unit id="VistaListasArchivosDto">
			<select id="lazy">
        select 
          tc_mantic_listas_precios.id_lista_precio as id_key,
          tc_mantic_listas_precios.id_lista_precio,
          tc_mantic_listas_precios.id_proveedor,
          tc_mantic_listas_precios.observaciones,
          tc_mantic_listas_precios.registro,
          tc_mantic_proveedores.razon_social,
          tc_mantic_proveedores.clave,
          tc_mantic_proveedores.rfc,
          tc_mantic_proveedores.id_empresa
        from 
          tc_mantic_listas_precios 
        inner join
          tc_mantic_proveedores on tc_mantic_listas_precios.id_proveedor= tc_mantic_proveedores.id_proveedor
        where
          tc_mantic_proveedores.id_empresa in ({idEmpresa})
          and {condicion}
        {sortOrder}
			</select>
      <select id="importados">
				select
					tc_mantic_listas_precios_archivos.id_lista_precio_archivo as id_key,
					tc_mantic_listas_precios_archivos.id_lista_precio,
			  	tc_mantic_listas_precios_archivos.id_tipo_archivo,
					tc_mantic_tipos_archivos.nombre as tipo,
					tc_mantic_listas_precios_archivos.nombre,
					tc_mantic_listas_precios_archivos.alias,
					tc_mantic_listas_precios_archivos.ruta,
					tc_mantic_listas_precios_archivos.id_principal,
					concat(tc_mantic_personas.nombres, ' ', tc_mantic_personas.paterno, ' ', tc_mantic_personas.materno) as usuario,
					tc_mantic_listas_precios_archivos.observaciones,
					tc_mantic_listas_precios_archivos.registro
				from
					tc_mantic_listas_precios_archivos
				inner join
					tc_mantic_tipos_archivos on tc_mantic_listas_precios_archivos.id_tipo_archivo= tc_mantic_tipos_archivos.id_tipo_archivo
				inner join
					tc_janal_usuarios on tc_mantic_listas_precios_archivos.id_usuario= tc_janal_usuarios.id_usuario          
				inner join
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				where
					tc_mantic_listas_precios_archivos.id_lista_precio= {idListaPrecio}
				order by
					tc_mantic_listas_precios_archivos.id_principal, tc_mantic_listas_precios_archivos.registro desc, tc_mantic_listas_precios_archivos.id_tipo_archivo asc				
			</select>
      <select id="lazyProveedores">
        select 
          tc_mantic_listas_precios.id_lista_precio as id_key,
          tc_mantic_listas_precios.id_lista_precio,
          tc_mantic_listas_precios.id_proveedor,
          tc_mantic_listas_precios.observaciones,
          DATE_FORMAT(tc_mantic_listas_precios.registro,'%d/%m/%Y') registro,
          tc_mantic_proveedores.razon_social,
          tc_mantic_proveedores.clave,
          tc_mantic_proveedores.rfc,
          tc_mantic_proveedores.id_empresa,
          ifnull( tc_mantic_proveedores.logotipo,'bonanza.svg') as logotipo,
          tc_mantic_listas_precios_archivos.alias,
          tc_mantic_listas_precios_archivos.nombre,
          tc_mantic_listas_precios_archivos.ruta
        from 
          tc_mantic_listas_precios 
        inner join
          tc_mantic_proveedores on tc_mantic_listas_precios.id_proveedor= tc_mantic_proveedores.id_proveedor
        inner join 
      		tc_mantic_listas_precios_archivos on tc_mantic_listas_precios.id_lista_precio = tc_mantic_listas_precios_archivos.id_lista_precio and tc_mantic_listas_precios_archivos.id_tipo_archivo = 2 and tc_mantic_listas_precios_archivos.id_principal=1
        where
          tc_mantic_proveedores.id_empresa in ({idEmpresa})
          and {condicion}
        {sortOrder}
			</select>
      <select id="lazyArticulos">
				select 
				  tc_mantic_listas_precios_detalles.id_lista_precio_detalle as id_key,
				  tc_mantic_listas_precios_detalles.* ,
				  tc_mantic_proveedores.razon_social as proveedor         
				from 
					tc_mantic_listas_precios_detalles
				inner join 
      			tc_mantic_listas_precios on tc_mantic_listas_precios_detalles.id_lista_precio = tc_mantic_listas_precios.id_lista_precio 
				inner join
          		tc_mantic_proveedores on tc_mantic_listas_precios.id_proveedor= tc_mantic_proveedores.id_proveedor
        where
					{condicion}			      
				{sortOrder}
			</select>
		</unit>
		<unit id="VistaTcManticVentasDetallesDto">
			<select id="detalle">
				select
					tc_mantic_ventas_detalles.id_venta_detalle as id_comodin,
          tc_mantic_ventas_detalles.*,
					(select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1) as propio
				from 
					tc_mantic_ventas_detalles 
				inner join
					tc_mantic_articulos on tc_mantic_ventas_detalles.id_articulo = tc_mantic_articulos.id_articulo
				where  
					id_venta = {idVenta}
				order by
					tc_mantic_ventas_detalles.registro
			</select>
		</unit>
	</dml>    
</process>
