<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
 company KAANA
 project KAJOOL (Control system polls)
 date 14/08/2015
 time 11:30:04 AM
 author Team Developer 2016 <team.developer@kaana.org.mx>
-->
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                template="/WEB-INF/plantillas/filtro.xhtml">
  <ui:param name="titulo" value="Bienvenido" />
  <ui:define name="librerias">
    <h:outputScript library="janal" name="core/jquery.underscore.min-1.3.3.js"/>
    <h:outputScript library="janal" name="highcharts/js/highcharts.js"/>    
    <script type="text/javascript">			
			function loadChart(id, json) {
				if (json !== '') { $('#' + id).highcharts(JSON.parse(json)); }
			};

			function skinChart() {
				this.cfg.shadow = false;
				this.cfg.seriesColors = ['#dae8ef', '#27aae1'];
				this.cfg.grid = {
					background: '#f3f5f7',
					borderColor: '#e5ebf0',
					gridLineColor: '#e5ebf0',
					shadow: false
				};
				this.cfg.axesDefaults = {
					rendererOptions: {
						textColor: '#9fadb5'
					}
				};
				this.cfg.seriesDefaults = {
					shadow: false,
					markerOptions: { shadow: false }
				};
			}
			;

			function skinPie() {
				this.cfg.seriesColors = ['#dae8ef', '#27aae1', '#33ccff', '#9fadb5'];
				this.cfg.grid = {
					background: '#ffffff',
					borderColor: '#eaeaea',
					gridLineColor: '#e5ebf0',
					shadow: false,
					borderWidth: 0
				};
				this.cfg.seriesDefaults.shadow = false;
			}
			;
    </script>
    <style type="text/css">
      .jqplot-target, .jqplot-axis {
				color: #9fadb5;
      }
      .jqplot-title {
				display: none;
      }
      rect.highcharts-background{
				fill: transparent !important;
      }
      .janal-progressbar-1 .ui-progressbar-value{
				background-color: orange !important;			
				background-image: none !important;
      }
      .janal-progressbar-2 .ui-progressbar-value{
				background-color: green !important;
				background-image: none !important;				
      }
      .janal-progressbar-3 .ui-progressbar-value{
				background-color: yellow !important;				
				background-image: none !important;
      }
      .janal-progressbar-4 .ui-progressbar-value{
				background-color: red !important;				
				background-image: none !important;
      }
      .janal-progressbar-5 .ui-progressbar-value{
				background-color: blue !important;
				background-image: none !important;
      }
      .janal-progressbar-6 .ui-progressbar-value{
				background-color: brown !important;
				background-image: none !important;
      }
      .janal-progressbar-7 .ui-progressbar-value{
				background-color: gold !important;
				background-image: none !important;
      }
      .janal-progressbar-8 .ui-progressbar-value{
				background-color: pink !important;
				background-image: none !important;
      }
      .janal-progressbar-9 .ui-progressbar-value{
				background-color: purple !important;
				background-image: none !important;				
      }
      .janal-progressbar-10 .ui-progressbar-value{
				background-color: cyan !important;				
				background-image: none !important;
      }
    </style>
  </ui:define>
  <ui:define name="contenido">
    <!-- SECTION 1 -->
    <div class="Container100">
      <div class="ContainerIndent">
        <div class="Container50 Responsive">					
					<div class="Container50 Responsive">					
						<div class="ContainerIndent">
							<p:panel style="min-height: 290px;">
								<i class="icon-user-2 Fs50 Fleft Wid25 hardblue TexAlCenter"></i>
								<div class="Fs24 Fright MarTop10 leaden Wid70">Bienvenido, <span class="hardblue">#{sessionScope.autentifica.persona.cuenta}</span></div>
								<div class="Fs12 Fright leaden Wid70">Tu tienes <span class="red">#{kajoolTablero.attrs.mensajesNoLeidos} mensajes sin leer</span></div>
								<div class="EmptyBox10"></div>
								<p:separator styleClass="Wid100"/>
								<div class="EmptyBox10"></div>
								<div class="Fs16 Fright">
									<a href="#{kajoolTablero.attrs.pathCaptura}" class="DispInlBlock Fleft Fs16 MarRight20"><i class="icon-mail hardblue"> Buzón (0)</i></a>
									<a href="#{kajoolTablero.attrs.pathMensajes}" class="DispInlBlock Fleft Fs16 MarRight20"><i class="icon-bell-alt hardblue"> Mensajes (#{kajoolTablero.attrs.mensajesNoLeidos})</i></a>
									<a href="#{kajoolTablero.attrs.pathConfiguracion}" class="DispInlBlock Fleft Fs16 MarRight20"><i class="icon-cog-alt hardblue"> Configuración</i></a>
								</div>
								<div class="EmptyBox10"></div>
								<p:separator styleClass="Wid100"/>
								<div class="EmptyBox10"></div>
								<span class="janal-help-icon janal-help-1 fa fa-lg fa-fw fa-question-circle Fright" onclick="countHelp(1);"/>
								<pe:tooltip for="@(.janal-help-1)" showEvent="click">
									<h:outputLabel value="#{kajoolUtilAplicacion.toTextHelp(1)}" styleClass="Fs15" escape="false"/>
								</pe:tooltip>
								<i class="icon-key softgray MarRight10 Fs14 Fright">Último acceso</i>
								<i class="softgray MarRight10 Fs14 Fright">#{sessionScope.autentifica.ultimoAcceso}</i>
								<div class="EmptyBox10"></div>              
							</p:panel>
						</div>										
					</div>
					<div class="Container50 Responsive">          
						<div class="ContainerIndent">
							<p:panel style="min-height: 290px;">
								<i class="icon-sitemap Fs50 Fleft Wid25 red TexAlCenter"></i>
								<div class="Fs24 Fright MarTop10 leaden Wid70">Equipo de trabajo</div>
								<div class="Fs18 Fright leaden Wid70">Plantilla de <span class="red">#{kajoolTablero.attrs.contadoresGenerales.total}</span> personas</div>
								<div class="EmptyBox5"></div>   
								<div class="Fs12 Fright leaden Wid70">Perfiles que llevaran a cabo actividades en el sistema</div>
								<div class="EmptyBox10"></div>
								<p:separator styleClass="Wid100"></p:separator>
								<div class="EmptyBox10"></div>
								<div class="Fs12 Fright leaden Wid50 TexAlCenter Responsive">Administrador<br/><span class="Fs20 orange">#{kajoolTablero.attrs.contadoresGenerales.admin}</span></div>
								<div class="Fs12 Fright leaden Wid50 TexAlCenter Responsive">Gerente<br/><span class="Fs20 orange">1</span></div>
								<div class="Fs12 Fright leaden Wid50 TexAlCenter Responsive">Vendedor<br/><span class="Fs20 red">#{kajoolTablero.attrs.contadoresGenerales.respEstatal}</span></div>
								<div class="Fs12 Fright leaden Wid50 TexAlCenter Responsive">Caja<br/><span class="Fs20 hardblue">#{kajoolTablero.attrs.contadoresGenerales.capturista}</span></div>
								<div class="EmptyBox10"></div>              
							</p:panel>
						</div>															
					</div>   						
        </div>   						
        <div class="Container50 Responsive">
          <div class="ContainerIndent">            
            <p:panel style="height:290px;">
              <div class="Container100 Responsive Fs20">
                <i class="icon-chart-outline"></i> Utilidad por sucursal
              </div>
              <div class="Container100">
                <div id="kajool-chart-utilidad-por-sucursal"></div>
                <script type="text/javascript">
									$(document).ready(function () {
										loadChart('kajool-chart-utilidad-por-sucursal', '#{kajoolTablero.attrs.utilidadPorSucursal}');
									});
                </script>
              </div>
            </p:panel>
          </div>
        </div>

        <div class="Container50 Responsive">
          <div class="ContainerIndent">
            <div class="EmptyBox10"></div>                
            <p:panel id="panelMest" style="min-height: 420px;">
              <i class="icon-users Fs50 Fleft Wid25 orange TexAlCenter"></i>
              <div class="Fs24 Fright MarTop10 leaden Wid70">Ventas por trabajador</div>
              <div class="Fs12 Fright leaden Wid70">Cantidad de ventas realizadas por trabajador: <span class="orange">320</span></div>
              <div class="EmptyBox10"></div>
              <p:separator styleClass="Wid100"/>
              <div>
                <p:scrollPanel styleClass="Wid95" style="height: 315px;">
                  <h:panelGroup id="panelVentas" styleClass="Wid90">									
                    <div style="width:100%; text-align:left; padding-left: 4px;"><i class="icon-user"></i><p:outputLabel value="ALEJANDRO JIMENEZ GARCIA"/></div>
                    <h:panelGrid columns="2" title="Total de ventas: 30" columnClasses="janal-wid-90, janal-wid-10" style="width: 100%">
                      <p:progressBar value="30" displayOnly="true" style="height: 8px;" styleClass="janal-progressbar-1"/>
                      <p:outputLabel value="3%" style="width: 50px; text-align: right; display: grid;"/>
                    </h:panelGrid>
                    <p:separator styleClass="Wid100"/>
                    <div style="width:100%; text-align:left; padding-left: 4px;"><i class="icon-user"></i><p:outputLabel value="ARACELY MARTINEZ"/></div>
                    <h:panelGrid columns="2" title="Total de ventas: 50" columnClasses="janal-wid-90, janal-wid-10" style="width: 100%">
                      <p:progressBar value="50" displayOnly="true" style="height: 8px;" styleClass="janal-progressbar-2"/>
                      <p:outputLabel value="6%" style="width: 50px; text-align: right; display: grid;"/>
                    </h:panelGrid>
                    <p:separator styleClass="Wid100"/>
                    <div style="width:100%; text-align:left; padding-left: 4px;"><i class="icon-user"></i><p:outputLabel value="NANCY ACEVES"/></div>
                    <h:panelGrid columns="2" title="Total de ventas: 70" columnClasses="janal-wid-90, janal-wid-10" style="width: 100%">
                      <p:progressBar value="70" displayOnly="true" style="height: 8px;" styleClass="janal-progressbar-3"/>
                      <p:outputLabel value="20%" style="width: 50px; text-align: right; display: grid;"/>
                    </h:panelGrid>
                    <p:separator styleClass="Wid100"/>
                    <div style="width:100%; text-align:left; padding-left: 4px;"><i class="icon-user"></i><p:outputLabel value="JUAN MARTINEZ"/></div>
                    <h:panelGrid columns="2" title="Total de ventas: 10" columnClasses="janal-wid-90, janal-wid-10" style="width: 100%">
                      <p:progressBar value="10" displayOnly="true" style="height: 8px;" styleClass="janal-progressbar-4"/>
                      <p:outputLabel value="2%" style="width: 50px; text-align: right; display: grid;"/>
                    </h:panelGrid>										
                    <p:separator styleClass="Wid100"/>
                    <div style="width:100%; text-align:left; padding-left: 4px;"><i class="icon-user"></i><p:outputLabel value="MILTON RAMIREZ"/></div>
                    <h:panelGrid columns="2" title="Total de ventas: 85" columnClasses="janal-wid-90, janal-wid-10" style="width: 100%">
                      <p:progressBar value="85" displayOnly="true" style="height: 8px;" styleClass="janal-progressbar-5"/>
                      <p:outputLabel value="40%" style="width: 50px; text-align: right; display: grid;"/>
                    </h:panelGrid>
                    <p:separator styleClass="Wid100"/>
                    <div style="width:100%; text-align:left; padding-left: 4px;"><i class="icon-user"></i><p:outputLabel value="JORGE SANDOVAL"/></div>
                    <h:panelGrid columns="2" title="Total de ventas: 53" columnClasses="janal-wid-90, janal-wid-10" style="width: 100%">
                      <p:progressBar value="53" displayOnly="true" style="height: 8px;" styleClass="janal-progressbar-10"/>
                      <p:outputLabel value="9%" style="width: 50px; text-align: right; display: grid;"/>
                    </h:panelGrid>
                    <p:separator styleClass="Wid100"/>
                    <div style="width:100%; text-align:left; padding-left: 4px;"><i class="icon-user"></i><p:outputLabel value="JORGE VAZQUEZ"/></div>
                    <h:panelGrid columns="2" title="Total de ventas: 29" columnClasses="janal-wid-90, janal-wid-10" style="width: 100%">
                      <p:progressBar value="29" displayOnly="true" style="height: 8px;" styleClass="janal-progressbar-8"/>
                      <p:outputLabel value="11%" style="width: 50px; text-align: right; display: grid;"/>
                    </h:panelGrid>
                    <p:separator styleClass="Wid100"/>
                    <div style="width:100%; text-align:left; padding-left: 4px;"><i class="icon-user"></i><p:outputLabel value="ESTEBAN RAMIREZ"/></div>
                    <h:panelGrid columns="2" title="Total de ventas: 17" columnClasses="janal-wid-90, janal-wid-10" style="width: 100%">
                      <p:progressBar value="17" displayOnly="true" style="height: 8px;" styleClass="janal-progressbar-9"/>
                      <p:outputLabel value="8%" style="width: 50px; text-align: right; display: grid;"/>
                    </h:panelGrid>
                    <p:separator styleClass="Wid100"/>
                    <div style="width:100%; text-align:left; padding-left: 4px;"><i class="icon-user"></i><p:outputLabel value="CARLOS ORTIZ"/></div>
                    <h:panelGrid columns="2" title="Total de ventas: 3" columnClasses="janal-wid-90, janal-wid-10" style="width: 100%">
                      <p:progressBar value="3" displayOnly="true" style="height: 8px;" styleClass="janal-progressbar-6"/>
                      <p:outputLabel value="1%" style="width: 50px; text-align: right; display: grid;"/>
                    </h:panelGrid>
                    <p:separator styleClass="Wid100"/>
                    <div style="width:100%; text-align:left; padding-left: 4px;"><i class="icon-user"></i><p:outputLabel value="LEO GONZALEZ"/></div>
                    <h:panelGrid columns="2" title="Total de ventas: 0" columnClasses="janal-wid-90, janal-wid-10" style="width: 100%">
                      <p:progressBar value="0" displayOnly="true" style="height: 8px;" styleClass="janal-progressbar-7"/>
                      <p:outputLabel value="0%" style="width: 50px; text-align: right; display: grid;"/>
                    </h:panelGrid>
                  </h:panelGroup>
                </p:scrollPanel>
              </div>
            </p:panel>
          </div>
          <div class="EmptyBox10"></div>
          <div class="ContainerIndent">
            <p:panel style="min-height:290px;">
              <div class="Container40 Responsive Fs20">
                <i class="icon-down-big"></i> Articulos por terminarse
              </div>
              <div class="Container60 Responsive Fs12">                  
                <!--p:selectOneMenu id="entidad" label="Sucursal" styleClass="Wid70 Fright" rendered="#{kajoolTablero.attrs.isAdmin}">                  
                  <f:selectItems value="#{kajoolTablero.sucursales}"/>
                </p:selectOneMenu-->                
              </div>
              <div class="EmptyBox10"></div>
              <div class="Container100">
                <h:form id="sucursales">                  			                  
                  <p:dataTable lazy="true" id="tabla" var="row" widgetVar="kajoolTable" rowIndexVar="index" value="#{kajoolTablero.articulos}" paginator="true" rowsPerPageTemplate="#{Constantes.REGISTROS_POR_CADA_PAGINA}" paginatorTemplate="#{Constantes.ICONOS_DE_PAGINACION}" emptyMessage="#{Constantes.NO_EXISTEN_REGISTROS}" rows="5" styleClass="janal-content-table" selectionMode="single" selection="#{kajoolTablero.attrs.selected}" reflow="true" paginatorPosition="top" rowKey="#{row.idKey}">
                    <f:facet name="header">
                      <p:menuButton value="Opciones">
                        <p:menuitem id="pdf" icon="fa fa-file-pdf-o" value="Exportar PDF" onstart="return janal.exportTable('dataPdfCapturista', 'tablaCapturista')" oncomplete="janal.desbloquear()"/>
                        <p:menuitem id="xls" icon="fa fa-file-excel-o" value="Exportar XLS" onstart="return janal.exportTable('dataXlsCapturista', 'tablaCapturista')" oncomplete="janal.desbloquear()"/>
                      </p:menuButton>
                    </f:facet>
                    <p:column styleClass="janal-column-left ColWid10 Responsive">
                      <f:facet name="header">
                        <h:outputText value="Articulo"/>
                      </f:facet>
                      <h:outputText value="#{row.nombre}"  />
                    </p:column>                    
                    <p:column styleClass="janal-column-right ColWid10 Responsive" >
                      <f:facet name="header">
                        <h:outputText value="Stock"/>
                      </f:facet>
                      <h:outputText value="#{row.stock}"/>
                    </p:column>                    
                    <f:facet name="footer">
                      <p:outputLabel value="Total [#{kajoolTablero.articulos.size()}] registros"/>
                    </f:facet>
                  </p:dataTable>
                  <h:commandLink id="dataPdfCapturista">                    
                    <pe:exporter type="pdf"  skipComponents="com.sun.faces.facelets.component.UIRepeat,org.primefaces.component.menuitem.UIMenuItem,org.primefaces.component.separator.UISeparator,org.primefaces.component.rowtoggler.RowToggler,org.primefaces.component.menubutton.MenuButton"  target="tabla" fileName="#{kajoolUtilAplicacion.nameFile}" encoding="ISO-8859-1" facetFontSize="10"  cellFontSize="10" fontName="Helvetica" pageOnly="false" preProcessor="#{kajoolUtilAplicacion.doPreProcessPdf}"/> 
                  </h:commandLink>
                  <h:commandLink id="dataXlsCapturista">
                    <pe:exporter type="xlsx" skipComponents="org.primefaces.component.menuitem.UIMenuItem,org.primefaces.component.separator.UISeparator,org.primefaces.component.rowtoggler.RowToggler, org.primefaces.component.menubutton.MenuButton" encoding="ISO-8859-1" target="tabla" fileName="#{kajoolUtilAplicacion.nameFile}" pageOnly="false"/>                
                  </h:commandLink>	                  
                </h:form>
              </div>
            </p:panel>
          </div>
					<div class="EmptyBox10"></div>
					<c:forEach items="#{kajoolTablero.attrs.jsons}" var="prop" varStatus="index">													
						<!--div class="Container50 Responsive"-->
							<div class="ContainerIndent">
								<p:panel style="min-height:250px;">
									<div class="Container100 Responsive Fs20">
										<i class="icon-chart-bar"></i> #{prop.titulo}
									</div>
									<div class="Container100">
										<div id="kajool-chart-avance-#{prop.id}"></div>
										<script type="text/javascript">
											$(document).ready(function () {
												loadChart('kajool-chart-avance-#{prop.id}', '#{prop.json}');
											});
										</script>
									</div>
								</p:panel>
							</div>
						<!--/div-->
					</c:forEach>
					<!--div class="Container50 Responsive"-->
						<div class="ContainerIndent">            
							<p:panel style="height:290px;">
								<div class="Container100 Responsive Fs20">
									<i class="icon-money"></i> Cuentas por cobrar
								</div>
								<div class="Container100">
									<div id="kajool-chart-avance-cobro"></div>
									<script type="text/javascript">
										$(document).ready(function () {
											loadChart('kajool-chart-avance-cobro', '#{kajoolTablero.attrs.jsonCobro}');
										});
									</script>
								</div>
							</p:panel>
						</div>
					<!--/div-->
        </div>		  

        <div class="Container50 Responsive">
          <div class="ContainerIndent">            
            <div class="EmptyBox10"></div>
            <p:panel style="height:240px;">
              <div class="Container100 Responsive Fs20">
                <i class="icon-chart-outline"></i> Utilidad por caja
              </div>
              <div class="Container100">
                <div id="kajool-chart-json-utilidad-por-caja"></div>
                <script type="text/javascript">
									$(document).ready(function () {
										loadChart('kajool-chart-json-utilidad-por-caja', '#{kajoolTablero.attrs.jsonUtilidadPorCaja}');
									});
                </script>
              </div>
            </p:panel>
          </div>

          <div class="Container100 Responsive">
            <div class="ContainerIndent">
              <div class="EmptyBox10"></div>
              <p:panel style="min-height:402px;">
                <div class="Container100 Responsive Fs20">
                  <i class="icon-cube"></i>Articulos mas vendidos 
                  <p:separator styleClass="Wid100"/>
                </div>
                <div class="Container100">
                  <div id="kajool-chart-avance-nacional"></div>
                  <script type="text/javascript">
										$(document).ready(function () {
											loadChart('kajool-chart-avance-nacional', '#{kajoolTablero.attrs.jsonVentas.json}');
										});
                  </script>
                </div>
              </p:panel>
            </div>	
          </div>
          <div class="Container100 Responsive">
            <div class="ContainerIndent">
              <div class="EmptyBox10"></div>
              <p:panel style="min-height:402px;">
                <div class="Container100 Responsive Fs20">
                  <i class="icon-dollar"></i>Articulos con mayor utilidad 
                  <p:separator styleClass="Wid100"/>
                </div>								
                <div class="Container100">
                  <div id="kajool-chart-avance-nacional-dos"></div>
                  <script type="text/javascript">
										$(document).ready(function () {
											loadChart('kajool-chart-avance-nacional-dos', '#{kajoolTablero.attrs.jsonNacional.json}');
											$("text").each(function (index) {
												if ($(this).text() === 'Highcharts.com') {
													$(this).text(' ');
												}
											});
										});
                  </script>
                </div>
              </p:panel>
            </div>				     
          </div>						
        </div>            				
				<div class="Container50 Responsive">
          <div class="ContainerIndent">            
            <p:panel style="height:290px;">
              <div class="Container100 Responsive Fs20">
                <i class="icon-bank"></i> Cuentas por pagar
              </div>
              <div class="Container100">
                <div id="kajool-chart-avance-pago"></div>
                <script type="text/javascript">
									$(document).ready(function () {
										loadChart('kajool-chart-avance-pago', '#{kajoolTablero.attrs.jsonPago}');
									});
                </script>
              </div>
            </p:panel>
          </div>
        </div>
      </div>
    </div>		
  </ui:define>
</ui:composition>
