<?xml version="1.0" encoding="ISO-8859-1" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions">
	<script type="text/javascript">
		fieldsDialogExpressArt = {
			'codigoDialog'      : {validaciones: 'requerido', mascara: 'codigo', formatos: 'cambiar-mayusculas'},
			'satDialog'         : {validaciones: 'libre', mascara: 'ocho-digitos', formatos: 'cambiar-mayusculas', individual: true},			
			'nombreDialog'      : {validaciones: 'requerido', mascara: 'libre', formatos: 'cambiar-mayusculas'},
			'precioDialog'      : {validaciones: 'requerido|flotante|mayor({"cuanto": 0})', mascara: 'libre', individual: true},
			'menudeoDialog'     : {validaciones: 'requerido|flotante|mayor({"cuanto": 0})|mayor-a({"cual":"medioMayoreoDialog"})', mascara: 'libre', individual: true},
			'medioMayoreoDialog': {validaciones: 'requerido|flotante|mayor({"cuanto": 0})|mayor-a({"cual":"mayoreoDialog"})', mascara: 'libre', individual: true},
			'mayoreoDialog'     : {validaciones: 'requerido|flotante|mayor({"cuanto": 0})|mayor-a({"cual":"precioDialog"})', mascara: 'libre', individual: true},
			'descripcionDialog' : {validaciones: 'libre', mascara: 'libre', formatos: 'cambiar-mayusculas', individual: true}
		};
		
		function validaCaptura() {
			var ok= janal.execute() &amp;&amp; confirm('Esta seguro que los datos son los correctos ?');
			if(ok) {
				PF('dlgArtExpress').hide();
				janal.restore();
				janal.refresh();
			} // 
			return ok;
		}
	</script>   	
	<p:dialog header="Agregar articulo de forma express" id="dialogoArtExpress" widgetVar="dlgArtExpress" onShow="notificarExpress();" onHide="janal.desbloquear(); janal.restore();" dynamic="true" width="70%" resizable="false" closeOnEscape="true" closable="true" appendTo="@(body)">
		<h:form id="formDialogoExpressArticulos" prependId="false">
			<p:remoteCommand name="notificarExpress" actionListener="#{manticCatalogosArticulosExpress.doUpdateArticuloExpress}" process="@this" update="@(.express)" oncomplete="janal.change('formDialogoExpressArticulos', fieldsDialogExpressArt);"/>
			<div class="ui-grid ui-grid-responsive" style="overflow-y:hidden;">
				<div class="ui-grid-row janal-grid-row">
					<div class="ui-grid-col-12">
						<p:panelGrid columns="3" layout="grid" styleClass="janal-wid-100" columnClasses="janal-wid-20, janal-wid-20, janal-wid-60">
							<p:outputLabel for="codigoDialog" value="Código:"/>
							<p:outputLabel for="satDialog" value="SAT:"/>
							<p:outputLabel for="nombreDialog" value="Nombre:"/>
							<p:inputText id="codigoDialog" styleClass="janal-wid-100-txt express" value="#{manticCatalogosArticulosExpress.attrs.codigo}" />
							<p:inputText id="satDialog" styleClass="janal-wid-100-txt express" value="#{manticCatalogosArticulosExpress.registroArticulo.articulo.sat}"/>                    
							<p:inputText id="nombreDialog" styleClass="janal-wid-100-txt express" value="#{manticCatalogosArticulosExpress.registroArticulo.articulo.nombre}" />                    							
						</p:panelGrid>
						<p:panelGrid columns="1" layout="grid" styleClass="janal-wid-100" columnClasses="janal-wid-100">
							<p:outputLabel for="descripcionDialog" value="Descripción:"/>
							<p:inputTextarea id="descripcionDialog" styleClass="janal-wid-100-txt express" value="#{manticCatalogosArticulosExpress.registroArticulo.articulo.descripcion}"/>                    
						</p:panelGrid>
						<p:separator/>
						<p:panelGrid columns="4" layout="grid" styleClass="janal-wid-100">																																	
							<p:outputLabel for="precioDialog" value="Costo:"/>
							<p:outputLabel for="menudeoDialog" value="Menudeo:"/>
							<p:outputLabel for="medioMayoreoDialog" value="Medio mayoreo:"/>
							<p:outputLabel for="mayoreoDialog" value="Mayoreo:"/>
								<p:inputNumber id="precioDialog" styleClass="janal-wid-100-txt janal-column-right express" value="#{manticCatalogosArticulosExpress.registroArticulo.articulo.precio}" inputStyleClass="janal-wid-100-txt">
								<p:ajax event="blur" listener="#{manticCatalogosArticulosExpress.doActualizaPrecios}" process="@this precioDialog" update="menudeoDialog medioMayoreoDialog mayoreoDialog"/>
							</p:inputNumber>                    														
							<p:inputNumber id="menudeoDialog" styleClass="janal-wid-100-txt janal-column-right express" value="#{manticCatalogosArticulosExpress.registroArticulo.articulo.menudeo}" inputStyleClass="janal-wid-100-txt"/>							
							<p:inputNumber id="medioMayoreoDialog" styleClass="janal-wid-100-txt janal-column-right express" value="#{manticCatalogosArticulosExpress.registroArticulo.articulo.medioMayoreo}" inputStyleClass="janal-wid-100-txt"/>                    														
							<p:inputNumber id="mayoreoDialog" styleClass="janal-wid-100-txt janal-column-right express" value="#{manticCatalogosArticulosExpress.registroArticulo.articulo.mayoreo}" inputStyleClass="janal-wid-100-txt"/>                    							
						</p:panelGrid>								
					</div>
				</div>
			</div>			
			<hr class="ui-widget-content"/>
			<div class="janal-line-button">
				<div class="lg-pantalla">
					<p:commandButton id="aceptarDialog" value="Aceptar" icon="fa fa-check" process="@form" actionListener="#{manticCatalogosArticulosExpress.doAceptar}" onstart="return validaCaptura();" oncomplete="janal.desbloquear();" update="tabla"/>
					<p:commandButton id="cancelarDialog" value="Cancelar" icon="fa fa-close" process="@this" oncomplete="PF('dlgArtExpress').hide();"/>
				</div>		
				<div class="xs-pantalla">
					<p:commandButton id="aceptarIconDialog" value="Aceptar" icon="fa fa-check" process="@form" actionListener="#{manticCatalogosArticulosExpress.doAceptar}" onstart="return validaCaptura();" oncomplete="janal.desbloquear();" update="tabla"/>
					<p:commandButton id="cancelarIconDialog" value="Cancelar" icon="fa fa-close" process="@this" oncomplete="PF('dlgArtExpress').hide();"/>
				</div>
			</div>				
		</h:form>
	</p:dialog>
</ui:composition>	
