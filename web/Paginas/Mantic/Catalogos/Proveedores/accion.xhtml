<?xml version="1.0" encoding="ISO-8859-1" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/WEB-INF/plantillas/accion.xhtml">
  <ui:param name="titulo" value=" al catálogo de proveedores" />
  <ui:define name="librerias">
    <script type="text/javascript">
      Janal.Control.fields = {
        
        'contenedorGrupos\\:prefijo': {validaciones: 'requerido|cambiar-mayusculas', mascara: 'libre', grupo:'general'},
        'contenedorGrupos\\:rfc': {validaciones: 'requerido|cambiar-mayusculas', mascara: 'libre',grupo:'general'},
        'contenedorGrupos\\:razonSocial': {validaciones: 'requerido|cambiar-mayusculas', mascara: 'libre',grupo:'general'},
        'contenedorGrupos\\:idTipoProveedor': {validaciones: 'requerido', mascara: 'libre',grupo:'general'},
        'contenedorGrupos\\:descuento': {validaciones: 'requerido', mascara: 'libre',grupo:'general'},
        'contenedorGrupos\\:dias_entrega': {validaciones: 'requerido', mascara: 'libre',grupo:'general'},
        'contenedorGrupos\\:idTipoDia': {validaciones: 'libre', mascara: 'libre',grupo:'general'},
        'contenedorGrupos\\:observaciones': {validaciones: 'libre', mascara: 'libre',grupo:'general'},
        'contenedorGrupos\\:detalleCalle': {validaciones: 'requerido', mascara: 'libre',grupo:'general'},
        'contenedorGrupos\\:clave': {validaciones: 'requerido|cambiar-mayusculas', mascara: 'libre',grupo:'general'},
        'contenedorGrupos\\:entidad'      : {validaciones: 'requerido', mascara: 'libre', grupo:'domicilio'},				
	    'contenedorGrupos\\:municipio'    : {validaciones: 'requerido', mascara: 'libre', grupo:'domicilio'},				
		'contenedorGrupos\\:localidad'    : {validaciones: 'requerido', mascara: 'libre', grupo:'domicilio'},				
		'contenedorGrupos\\:cp'           : {validaciones: 'requerido', mascara: 'libre', grupo:'domicilio'},				
		'contenedorGrupos\\:calle'        : {validaciones: 'requerido|cambiar-mayusculas', mascara: 'libre', grupo:'domicilio'}
      };

      function applyMayusTable(parent, index, name) {
        var mayus = $('#contenedorGrupos\\:' + parent + '\\:' + index + '\\:' + name).val().toUpperCase();
        $('#contenedorGrupos\\:' + parent + '\\:' + index + '\\:' + name).val(mayus);
      } // applyMayusTable

      function refresh(index) {
        janal.refresh('tabview_'+ index);
        janal.show([{summary: 'Tabview', detail: 'tab: '+ index}]);
      }
    </script>   
    <style type="text/css">
      span.ui-inputnumber > input{
        width: -webkit-fill-available;
      }
      span.ui-calendar > input{
        width: -webkit-fill-available;
      }
      div.ui-datatable-footer{
        border: transparent !important;
        background: transparent !important;
      }
      li.ui-datalist-item{
        text-align: left !important;
        font-weight: bold !important;
        padding-left: 10px !important;
      }
      ul.ui-datalist-data{								
        padding-left: 0px !important;
      }
      div.ui-selectonemenu-filter-container{								
        width: -webkit-fill-available !important;
      }
      input.ui-selectonemenu-filter{								
        width: -webkit-fill-available !important;
      }
      div.ui-datalist{
        border: transparent !important;
      }
      div.ui-datalist-footer{
        border: transparent !important;
        background: transparent !important;
        text-align: left !important;
        color: black !important;
      }
      table.janal-panel-tabla > tbody > tr > td{
        vertical-align: top !important;
      }
    </style>		
  </ui:define>
  <ui:define name="contenido">
    <div class="ui-grid ui-grid-responsive" style="overflow-y:hidden;">
      <div class="ui-grid-row janal-grid-row">
        <div class="ui-grid-col-12">
          <p:tabView id="contenedorGrupos" cache="true">
            <p:ajax event="tabChange" process="@this" oncomplete="refresh(janal.tabView('contenedorGrupos'))"/>
            <p:tab id="general"  title="General">
              <p:panelGrid columns="2" layout="grid" styleClass="janal-wid-100" columnClasses="janal-wid-10, janal-wid-100">								
                <p:outputLabel for="clave" value="Clave"/>
                <p:inputText id="clave" styleClass="janal-wid-100-txt" maxlength="50" value="#{manticCatalogosProveedoresAccion.renglonProveedor.tcManticProveedoresDto.clave}" onblur="janal.individual('contenedorGrupos\\:clave')"/>                    
                <p:outputLabel for="prefijo" value="Prefijo:"/>
                <p:inputText id="prefijo" styleClass="janal-wid-100-txt" maxlength="50" value="#{manticCatalogosProveedoresAccion.renglonProveedor.tcManticProveedoresDto.prefijo}" onblur="janal.individual('contenedorGrupos\\:prefijo')"/>                    
                <p:separator/><p:separator/>
                <p:outputLabel for="rfc" value="RFC:"/>
                <p:inputNumber id="rfc" styleClass="janal-wid-100-txt" value="#{manticCatalogosProveedoresAccion.renglonProveedor.tcManticProveedoresDto.razonSocial}"/>                    
                <p:outputLabel for="razonSocial" value="Razón social:"/>
                <p:inputText id="razonSocial" styleClass="janal-wid-100-txt" maxlength="255" value="#{manticCatalogosProveedoresAccion.renglonProveedor.tcManticProveedoresDto.razonSocial}" onblur="janal.individual('contenedorGrupos\\:razonSocial')"/>                    
                <p:separator/><p:separator/>
                <p:outputLabel for="idTipoProveedor"  value="Tipo proveedor:"/>
                <p:selectOneMenu  id="idTipoProveedor" value="#{manticCatalogosProveedoresAccion.renglonProveedor.idTipoProveedor}" var="item" converter="janal.convertidor.Entity" styleClass="janal-wid-100-txt">
                  <f:selectItems value="#{manticCatalogosProveedoresAccion.renglonProveedor.tiposProveedores}"  var="element" itemValue="#{element}" itemLabel="#{element.nombre}"/>
                  <p:column>
                    <h:outputText value="#{item.nombre}"/>
                  </p:column>   
                  <p:column styleClass="janal-column-right" headerText="Tiempo estimado de entrega(dias)">
                    <h:outputText value="#{item.dias}"/>
                  </p:column>   
                </p:selectOneMenu>                
                <p:outputLabel  for="diasEntrega" value="Tiempo de entrega (dias)"/>
                <p:inputNumber id="diasEntrega" styleClass="janal-wid-100-txt" value="#{manticCatalogosProveedoresAccion.renglonProveedor.tcManticProveedoresDto.diasEntrega}"/> 
                <p:outputLabel value="Tipo de dias de entrega" for="idTipoDia"/>
                <p:selectOneMenu id="idTipoDia" var="item" value="#{manticCatalogosProveedoresAccion.renglonProveedor.tcManticProveedoresDto.idTipoDia}" converter="javax.faces.Long"  styleClass="janal-wid-100-txt">
                  <f:selectItem itemLabel="NATURALES" itemValue="1"/>
                  <f:selectItem itemLabel="HÁBILES" itemValue="2"/>
                  <f:selectItem itemLabel="NO ESPECIFICADO" itemValue="3"/>
                </p:selectOneMenu>
                <p:outputLabel value="Descuento:" for="descuento"/>
                <p:inputNumber id="descuento" styleClass="janal-wid-100-txt" value="#{manticCatalogosProveedoresAccion.renglonProveedor.tcManticProveedoresDto.descuento}"  symbol="%" emptyValue="zero" symbolPosition="s"/> 
              </p:panelGrid>
            </p:tab>						
            <p:tab id="tabDomicilio" title="Domicilios">	
              <div class="ui-grid ui-grid-responsive" style="overflow-y:hidden;">
                <div class="ui-grid-row janal-grid-row">
                  <div class="ui-grid-col-3">
                    <p:panel  header="Domicilios:">
                      <h:panelGrid styleClass="janal-wid-100">
                        <p:dataList emptyMessage="No existen registros" rowIndexVar="index" value="#{manticCatalogosProveedoresAccion.renglonProveedor.domicilios}" styleClass="paginated" id="direcciones" var="direccion">
                          <p:commandLink  actionListener="#{manticCatalogosProveedoresAccion.doAgregarDocimilio(direccion,index)}" process="@this contenedorGrupos:panelDomicilio" onstart="return janal.partial('domicilio')" rendered="#{direccion.accion eq 'SELECT'}" >                           
                            <i class="fa fa-plus-square"></i>                           
                          </p:commandLink>                         
                          <p:commandLink  actionListener="#{manticCatalogosProveedoresAccion.doEliminarDomicilio(direccion,index)}" rendered="#{direccion.accion != 'SELECT'}" >
                             <i class="fa fa-minus-square"></i>   
                          </p:commandLink> 
                          <p:commandLink   actionListener="#{manticCatalogosProveedoresAccion.doBuscarDomicilio(direccion,index)}" process="@this" update="contenedorGrupos:panelDomicilio" value="Direccion  #{index+1}"/>                                                                    
                        </p:dataList>
                      </h:panelGrid>
                    </p:panel>
                  </div>
                  <p:spacer width="10px"/>
                  <div class="ui-grid-col-9 janal-grid-row">                  
                    <ui:include src="../Proveedores/Secciones/domicilios.xhtml"/>                                          
                  </div>
                </div>
              </div>
            </p:tab> 
            <p:tab id="tabTipoPago" title="Condiciones de pago">
              <ui:include src="../Proveedores/Secciones/condicionPago.xhtml"/>	
            </p:tab>
            <p:tab id="tabPersonaContacto" title="Responsables">								
              <ui:include src="../Proveedores/Secciones/responsables.xhtml"/>
            </p:tab>
            <p:tab id="tabTipoContacto" title="Contacto">
               <ui:include src="../Proveedores/Secciones/contacto.xhtml"/>
            </p:tab>
            <p:tab id="tabAgentes" title="Agentes">
              <ui:include src="../Proveedores/Secciones/agentes.xhtml"/>
            </p:tab>
            
            <p:tab title="Observaciones">
              <p:panelGrid columns="2" layout="grid" styleClass="janal-wid-100" columnClasses="janal-wid-10, janal-wid-100">
                <p:outputLabel for="observaciones" value="Observaciones:"/>
                <p:editor id="observaciones" styleClass="janal-wid-100-txt" height="200" value="#{manticCatalogosProveedoresAccion.renglonProveedor.tcManticProveedoresDto.observaciones}"/>  
              </p:panelGrid>
            </p:tab>
          </p:tabView>
        </div>
      </div>
    </div>	
  </ui:define>    
  <ui:define name="acciones">
    <div class="lg-pantalla">
      <p:commandButton id="aceptar" value="Aceptar" icon="fa fa-check" process="@form" action="#{manticCatalogosProveedoresAccion.doAceptar}" ajax="false" styleClass="janal-text-white" onstart="janal.bloquear()" oncomplete="janal.desbloquear()"/>
      <p:commandButton id="cancelar" value="Cancelar" icon="fa fa-close" process="@this" action="#{manticCatalogosProveedoresAccion.doCancelar}" ajax="false" styleClass="janal-text-white" onstart="janal.bloquear()" oncomplete="janal.desbloquear()"/>
    </div>		
    <div class="xs-pantalla">
      <p:commandButton id="aceptarIcon" value="Aceptar" icon="fa fa-check" process="@form" action="#{manticCatalogosProveedoresAccion.doAceptar}" ajax="false" styleClass="janal-text-white" onstart="janal.bloquear()" oncomplete="janal.desbloquear()"/>
      <p:commandButton id="cancelarIcon" value="Cancelar" icon="fa fa-close" process="@this" action="#{manticCatalogosProveedoresAccion.doCancelar}" ajax="false" styleClass="janal-text-white" onstart="janal.bloquear()" oncomplete="janal.desbloquear()"/>
    </div>		
  </ui:define>
</ui:composition>
