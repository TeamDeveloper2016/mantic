<?xml version="1.0" encoding="ISO-8859-1" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/WEB-INF/plantillas/accion.xhtml">
	<ui:param name="titulo" value="Administración de las preguntas"/>
	<ui:define name="librerias">
		<script type="text/javascript">			
			Janal.Control.fields = {				 				
			};	
			
    	$(document).ready(function() {
      });							
			
			 function chartExtender() {        
				 // this = chart widget instance        
				 // this.cfg = options      
				 this.cfg.seriesDefaults.rendererOptions.varyBarColor = true;
			 }
		</script>   
		<style type="text/css">
			.value {
        font-weight: bold;
      }
			.janal-label-size {
				font-size: 17px !important;
			}
		</style>
	</ui:define>
	<ui:define name="contenido">
		<p:defaultCommand target="limpio"/>
		<p:poll interval="5" listener="#{manticEvaluacionesAccion.doCheckStateQuestion}" update="question answer @(.question)" process="@this @(.answer) @(.question)" autoStart="true" global="true"/>
		<p:panelGrid id="question" layout="grid" columns="1" styleClass="ui-panelgrid-blank ui-fluid janal-wid-100-txt question" style="display: #{manticEvaluacionesAccion.control? '': 'none'}">
			<p:outputLabel value="#{manticEvaluacionesAccion.question.index}.- #{manticEvaluacionesAccion.question.text}" styleClass="janal-label-size"/>
			<p:selectOneRadio value="#{manticEvaluacionesAccion.question.answer}" layout="responsive" columns="1" styleClass="janal-label-size answer">
				<f:selectItems itemLabel="#{item.value}) #{item.text}" itemValue="#{item.value}" value="#{manticEvaluacionesAccion.question.answers}" var="item" />
			</p:selectOneRadio>
		</p:panelGrid>	
		<p:panelGrid id="answer" layout="grid" columns="1" styleClass="ui-panelgrid-blank ui-fluid janal-wid-100-txt question" style="display: #{manticEvaluacionesAccion.control? 'none': ''}">
			<p:outputLabel value="Respuestas obtenidas de la pregunta #{manticEvaluacionesAccion.question.index}." styleClass="janal-label-size"/>
			<p:chart type="bar" model="#{manticEvaluacionesAccion.model}" style="height:450px" responsive="true" styleClass="janal-wid-100-txt"/>
			<p:outputLabel value="Tu respuesta fue [#{manticEvaluacionesAccion.question.answer}]" styleClass="janal-label-size janal-wid-100-txt"/>
		</p:panelGrid>	
		<p:commandButton id="limpio" value="" styleClass="janal-zero-size"/>
	</ui:define>    
	<ui:define name="acciones">		
		<div class="lg-pantalla">
			<p:commandButton id="aceptar" value="Siguiente" icon="fa fa-chevron-right" accesskey="a" process="@this @(.answer)" update="@(.question)" action="#{manticEvaluacionesAccion.doNext()}" onstart="return true;" oncomplete="janal.desbloquear()" styleClass="question" style="display: #{manticEvaluacionesAccion.last? 'none': ''}" rendered="false"/>
			<p:commandButton id="cancelar" value="Anterior" icon="fa fa-chevron-left" accesskey="r" process="@this @(.answer)" update="@(.question)" action="#{manticEvaluacionesAccion.doPrevious()}" onstart="return true;" oncomplete="janal.desbloquear()" style="float: left; display: #{manticEvaluacionesAccion.first and manticEvaluacionesAccion.control? 'none': ''}" styleClass="question" rendered="false"/>
		</div>	
		<div class="xs-pantalla">
			<p:commandButton id="aceptarIcon" value="Siguiente" icon="fa fa-chevron-right" process="@this @(.answer)" update="@(.question)" action="#{manticEvaluacionesAccion.doNext()}" onstart="return true;" oncomplete="janal.desbloquear()" styleClass="question" style="display: #{manticEvaluacionesAccion.last? 'none': ''}" rendered="false"/>
			<p:commandButton id="cancelarIcon" value="Anterior" icon="fa fa-chevron-left" process="@this @(.answer)" update="@(.question)" action="#{manticEvaluacionesAccion.doPrevious()}" onstart="return true;" oncomplete="janal.desbloquear()" style="float: left; display: #{manticEvaluacionesAccion.first and manticEvaluacionesAccion.control? 'none': ''}" styleClass="question" rendered="false"/>
		</div>						
	</ui:define>	
</ui:composition>
